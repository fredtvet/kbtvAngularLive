(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"1eh6":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("K9Ia"),o=n("TYT/"),i=function(){function e(){this.unsubscribe=new r.a}return e.prototype.ngOnDestroy=function(){this.unsubscribe.next(),this.unsubscribe.complete()},e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o["\u0275\u0275defineDirective"]({type:e}),e}()},"9qP0":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("TYT/"),o=n("Valr"),i=n("FfOm"),a=n("qaSM"),s=n("dAsQ");function l(e,t){1&e&&r["\u0275\u0275element"](0,"app-icon-button",4),2&e&&r["\u0275\u0275property"]("config",t.$implicit)}function c(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-toolbar",3),r["\u0275\u0275element"](1,"app-icon-button",4),r["\u0275\u0275elementStart"](2,"span",5),r["\u0275\u0275elementStart"](3,"span",6),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](5,l,1,1,"app-icon-button",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngClass",n.config.colorClass?n.config.colorClass:"bg-accent"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("config",n.config.leftBtn),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](n.config.title),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",n.config.buttons)}}var m=["*"],u=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-simple-top-nav"]],inputs:{config:"config"},ngContentSelectors:m,decls:4,vars:1,consts:[[1,"column"],["class","toolbar-slim mat-elevation-z2 flex-nav",3,"ngClass",4,"ngIf"],[1,"main-content","p-3"],[1,"toolbar-slim","mat-elevation-z2","flex-nav",3,"ngClass"],[3,"config"],[1,"mr-auto"],[1,"ml-1"],[3,"config",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(r["\u0275\u0275projectionDef"](),r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275template"](1,c,6,4,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275projection"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.config))},directives:[o.l,i.a,o.j,a.a,s.a,o.k],styles:[".column[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.main-content[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}"],changeDetection:0}),e}()},zrcO:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",(function(){return ie}));var r=n("PCNd"),o=n("DUip"),i=n("dJ3e"),a=n("mrSG"),s=n("1YJq"),l=n("67Y/"),c=n("h/AT"),m=n("1ua0"),u=n("VnD/"),p=n("TYT/"),d=n("ea4N"),f=n("9qP0"),h=n("QJY3"),v=n("Valr"),g=n("uLXW"),y=n("eHTH"),b=n("cSbt"),w=n("agxM"),S=n("qaSM"),x=n("p+mS"),N=n("Up+3"),I=n("GsDI"),C=n("MqYC");function E(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1," Minst 4 tegn. \xc6\xd8\xc5 og mellomrom ikke tillatt. "),p["\u0275\u0275elementEnd"]())}function P(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1," Passord er ett obligatorisk felt p\xe5 minst 7 tegn. "),p["\u0275\u0275elementEnd"]())}function F(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"mat-form-field"),p["\u0275\u0275element"](1,"input",12),p["\u0275\u0275elementStart"](2,"mat-icon",13),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=p["\u0275\u0275nextContext"](2);return e.hidePassword=!e.hidePassword})),p["\u0275\u0275text"](3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](4,P,2,0,"mat-error",3),p["\u0275\u0275elementEnd"]()}if(2&e){var r=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("type",r.hidePassword?"password":"text"),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",r.hidePassword?"visibility_off":"visibility"," "),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",r.password.invalid)}}function k(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1," Fornavn er ett obligatorisk felt p\xe5 maks 100 tegn. "),p["\u0275\u0275elementEnd"]())}function O(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1," Etternavn er ett obligatorisk felt p\xe5 maks 100 tegn. "),p["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"mat-option",14),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;p["\u0275\u0275property"]("value",n),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](n)}}function B(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"mat-option",14),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;p["\u0275\u0275property"]("value",n.id),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](n.name)}}function _(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1," Kontaktnummer m\xe5 v\xe6re mellom 4 og 12 siffer. "),p["\u0275\u0275elementEnd"]())}function L(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"form",1),p["\u0275\u0275elementStart"](1,"mat-form-field"),p["\u0275\u0275element"](2,"input",2),p["\u0275\u0275template"](3,E,2,0,"mat-error",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](4,F,5,3,"mat-form-field",3),p["\u0275\u0275elementStart"](5,"mat-form-field"),p["\u0275\u0275element"](6,"input",4),p["\u0275\u0275template"](7,k,2,0,"mat-error",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"mat-form-field"),p["\u0275\u0275element"](9,"input",5),p["\u0275\u0275template"](10,O,2,0,"mat-error",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"mat-form-field"),p["\u0275\u0275elementStart"](12,"mat-select",6),p["\u0275\u0275listener"]("change",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().changeRole(e)})),p["\u0275\u0275template"](13,j,2,2,"mat-option",7),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](14,"mat-form-field",8),p["\u0275\u0275elementStart"](15,"mat-select",9),p["\u0275\u0275listener"]("change",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().changeEmployerId(e)})),p["\u0275\u0275template"](16,B,2,2,"mat-option",7),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](17,"mat-form-field"),p["\u0275\u0275element"](18,"input",10),p["\u0275\u0275template"](19,_,2,0,"mat-error",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](20,"button",11),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().onSubmit()})),p["\u0275\u0275text"](21),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var r=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("formGroup",r.userForm),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",r.userName.invalid),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",r.isCreateForm),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",r.firstName.invalid),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",r.lastName.invalid),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngForOf",r.roles),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("fxHide",r.role.value!==r.Roles.Oppdragsgiver),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngForOf",r.employers),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",r.phoneNumber.invalid),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("disabled",r.userForm.invalid||r.userForm.pristine),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",r.isCreateForm?"Legg til":"Oppdater"," ")}}var R=function(){function e(e){this._formBuilder=e,this.Roles=s.i,this.formSubmitted=new p.EventEmitter,this.isCreateForm=!1,this.hidePassword=!0}return e.prototype.ngOnInit=function(){this.user&&this.user.userName||(this.isCreateForm=!0),this.initalizeForm(this.user)},e.prototype.initalizeForm=function(e){this.userForm=this._formBuilder.group({userName:[{value:e?e.userName:null,disabled:!this.isCreateForm},[h.s.required,h.s.pattern("^[a-zA-Z0-9_.-]*$"),h.s.minLength(4),h.s.maxLength(100)]],password:[{value:null,disabled:!this.isCreateForm},[h.s.required,h.s.minLength(7),h.s.maxLength(100)]],firstName:[e?e.firstName:null,[h.s.required,h.s.maxLength(100)]],lastName:[e?e.lastName:null,[h.s.required,h.s.maxLength(100)]],phoneNumber:[e?e.phoneNumber:null,[h.s.minLength(4),h.s.maxLength(12)]],role:[e?e.role:null,[h.s.required]],employerId:[e?e.employerId:null]})},e.prototype.onSubmit=function(){this.userForm.valid&&this.userForm.dirty&&this.formSubmitted.emit(this.userForm.getRawValue())},e.prototype.changeRole=function(e){this.role.setValue(e.target.value,{onlySelf:!0})},e.prototype.changeEmployerId=function(e){this.employerId.setValue(e.target.value,{onlySelf:!0})},Object.defineProperty(e.prototype,"userName",{get:function(){return this.userForm.get("userName")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this.userForm.get("password")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstName",{get:function(){return this.userForm.get("firstName")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastName",{get:function(){return this.userForm.get("lastName")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phoneNumber",{get:function(){return this.userForm.get("phoneNumber")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"role",{get:function(){return this.userForm.get("role")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"employerId",{get:function(){return this.userForm.get("employerId")},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](h.c))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-user-form-view"]],inputs:{user:"user",employers:"employers",roles:"roles"},outputs:{formSubmitted:"formSubmitted"},decls:1,vars:1,consts:[["fxLayout","column",3,"formGroup",4,"ngIf"],["fxLayout","column",3,"formGroup"],["matInput","","placeholder","Brukernavn","formControlName","userName","required",""],[4,"ngIf"],["matInput","","placeholder","Fornavn","formControlName","firstName","required",""],["matInput","","placeholder","Etternavn","formControlName","lastName","required",""],["placeholder","Rolle","formControlName","role","required","",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"fxHide"],["placeholder","Oppdragsgiver","formControlName","employerId",3,"change"],["matInput","","placeholder","Kontaktnummer","formControlName","phoneNumber"],["appHttpCommandButton","","mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"],["matInput","","placeholder","Passord","formControlName","password","required","",3,"type"],["matSuffix","",3,"click"],[3,"value"]],template:function(e,t){1&e&&p["\u0275\u0275template"](0,L,22,11,"form",0),2&e&&p["\u0275\u0275property"]("ngIf",t.userForm)},directives:[v.l,h.t,h.m,g.c,h.e,y.c,b.a,h.b,h.l,h.d,h.r,w.a,v.k,S.b,x.b,N.a,y.b,I.a,y.h,C.h],encapsulation:2,changeDetection:0}),e}(),$=function(){function e(e,t,n,r){this.notificationService=e,this._roleService=t,this._userService=n,this._employerService=r,this.Roles=s.i,this.finished=new p.EventEmitter,this.isCreateForm=!1}return e.prototype.ngOnInit=function(){this.userNamePreset?this.user$=this._userService.get$(this.userNamePreset):this.isCreateForm=!0,this.roles$=this._roleService.getAll$().pipe(Object(l.a)((function(e){return e.filter((function(e){return e!=s.i.Leder}))}))),this.employers$=this._employerService.getAll$()},e.prototype.onSubmit=function(e){e?this.isCreateForm?this.createUser(e):this.updateUser(e):this.finished.emit()},e.prototype.createUser=function(e){var t=this;this._userService.add$(e).subscribe((function(e){t.notificationService.setNotification("Vellykket! Ny bruker registrert."),t.finished.emit(e)}))},e.prototype.updateUser=function(e){var t=this;this._userService.update$(e).subscribe((function(e){t.notificationService.setNotification("Vellykket oppdatering!"),t.finished.emit(e)}))},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](i.w),p["\u0275\u0275directiveInject"](i.y),p["\u0275\u0275directiveInject"](i.C),p["\u0275\u0275directiveInject"](i.l))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-user-form"]],inputs:{userNamePreset:"userNamePreset"},outputs:{finished:"finished"},decls:4,vars:9,consts:[[3,"user","roles","employers","formSubmitted"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"app-user-form-view",0),p["\u0275\u0275listener"]("formSubmitted",(function(e){return t.onSubmit(e)})),p["\u0275\u0275pipe"](1,"async"),p["\u0275\u0275pipe"](2,"async"),p["\u0275\u0275pipe"](3,"async"),p["\u0275\u0275elementEnd"]()),2&e&&p["\u0275\u0275property"]("user",p["\u0275\u0275pipeBind1"](1,3,t.user$))("roles",p["\u0275\u0275pipeBind1"](2,5,t.roles$))("employers",p["\u0275\u0275pipeBind1"](3,7,t.employers$))},directives:[R],pipes:[v.b],encapsulation:2,changeDetection:0}),e}(),V=function(){function e(e,t,n,r){var o=this;this._userService=e,this._dialog=t,this._bottomSheetRef=n,this.data=r,this.close=function(){return o._bottomSheetRef.dismiss()},this.confirmDelete=function(){o._dialog.open(m.a,{data:"Bekreft at du \xf8nsker \xe5 slette oppdragsgiveren fra systemet."}).afterClosed().pipe(Object(u.a)((function(e){return e}))).subscribe((function(e){return o.deleteEmployer()}))},this.deleteEmployer=function(){return o._userService.delete$(o.data.userNamePreset).subscribe((function(e){return o.close()}))}}return e.prototype.ngOnInit=function(){var e=!this.data||!this.data.userNamePreset;this.navConfig={title:e?"Registrer bruker":"Rediger bruker",leftBtn:{icon:"close",callback:this.close},buttons:e?void 0:[{icon:"delete_forever",callback:this.confirmDelete}]}},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](i.C),p["\u0275\u0275directiveInject"](d.b),p["\u0275\u0275directiveInject"](c.d),p["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-user-form-sheet-wrapper"]],decls:2,vars:2,consts:[[3,"config"],[3,"userNamePreset","finished"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"app-simple-top-nav",0),p["\u0275\u0275elementStart"](1,"app-user-form",1),p["\u0275\u0275listener"]("finished",(function(){return t.close()})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("config",t.navConfig),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("userNamePreset",null==t.data?null:t.data.userNamePreset))},directives:[f.a,$],encapsulation:2,changeDetection:0}),e}();function q(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1," Passord m\xe5 v\xe6re p\xe5 minst 7 tegn. "),p["\u0275\u0275elementEnd"]())}function D(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"mat-error"),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){var n=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",n.error," ")}}function M(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"form",1),p["\u0275\u0275elementStart"](1,"mat-form-field"),p["\u0275\u0275element"](2,"input",2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"mat-form-field"),p["\u0275\u0275element"](4,"input",3),p["\u0275\u0275elementStart"](5,"mat-icon",4),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=p["\u0275\u0275nextContext"]();return e.hidePasswords.new=!e.hidePasswords.new})),p["\u0275\u0275text"](6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](7,q,2,0,"mat-error",5),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"mat-form-field"),p["\u0275\u0275element"](9,"input",6),p["\u0275\u0275elementStart"](10,"mat-icon",4),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=p["\u0275\u0275nextContext"]();return e.hidePasswords.confirm=!e.hidePasswords.confirm})),p["\u0275\u0275text"](11),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](12,D,2,1,"mat-error",5),p["\u0275\u0275element"](13,"br"),p["\u0275\u0275elementStart"](14,"button",7),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().onSubmit()})),p["\u0275\u0275text"](15," Lagre "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var r=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("formGroup",r.passwordForm),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("type",r.hidePasswords.new?"password":"text"),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",r.hidePasswords.new?"visibility_off":"visibility"," "),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",r.newPassword.invalid),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("type",r.hidePasswords.confirm?"password":"text"),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",r.hidePasswords.confirm?"visibility_off":"visibility"," "),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",r.error),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("disabled",r.passwordForm.invalid||r.passwordForm.pristine)}}var A=function(){function e(e){this._formBuilder=e,this.formSubmitted=new p.EventEmitter,this.hidePasswords={new:!0,confirm:!0}}return e.prototype.ngOnInit=function(){this.initalizeForm()},e.prototype.initalizeForm=function(){this.passwordForm=this._formBuilder.group({userName:{value:this.userName,disabled:!0},newPassword:["",[h.s.required,h.s.minLength(7)]],confirmPassword:["",[h.s.required,h.s.minLength(7)]]})},e.prototype.onSubmit=function(){var e=this.passwordForm;e.valid&&this.newPassword.value===this.confirmPassword.value?(this.formSubmitted.emit(e.value),this.passwordForm.reset()):this.newPassword.value!==this.confirmPassword.value&&(this.error="Passordene er ikke like")},Object.defineProperty(e.prototype,"newPassword",{get:function(){return this.passwordForm.get("newPassword")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"confirmPassword",{get:function(){return this.passwordForm.get("confirmPassword")},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](h.c))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-new-password-form-view"]],inputs:{error:"error",userName:"userName"},outputs:{formSubmitted:"formSubmitted"},decls:1,vars:1,consts:[["fxLayout","column",3,"formGroup",4,"ngIf"],["fxLayout","column",3,"formGroup"],["matInput","","placeholder","Brukernavn","formControlName","userName"],["matInput","","placeholder","Nytt passord","formControlName","newPassword",3,"type"],["matSuffix","",3,"click"],[4,"ngIf"],["matInput","","placeholder","Gjenta nytt passord","formControlName","confirmPassword",3,"type"],["appHttpCommandButton","","mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"]],template:function(e,t){1&e&&p["\u0275\u0275template"](0,M,16,8,"form",0),2&e&&p["\u0275\u0275property"]("ngIf",t.passwordForm)},directives:[v.l,h.t,h.m,g.c,h.e,y.c,b.a,h.b,h.l,h.d,I.a,y.h,x.b,N.a,y.b],encapsulation:2,changeDetection:0}),e}(),U=function(){function e(e,t){this.userService=e,this.notificationService=t,this.finished=new p.EventEmitter}return e.prototype.onSubmit=function(e){var t=this;e&&null!=e||this.finished.emit(),this.userService.newPassword$(this.userName,e.newPassword).subscribe((function(e){t.notificationService.setNotification("Vellykket oppdatering!"),t.finished.emit()}),(function(e){return t.serverError=e}))},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](i.C),p["\u0275\u0275directiveInject"](i.w))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-new-password-form"]],inputs:{userName:"userName"},outputs:{finished:"finished"},decls:1,vars:2,consts:[[3,"error","userName","formSubmitted"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"app-new-password-form-view",0),p["\u0275\u0275listener"]("formSubmitted",(function(e){return t.onSubmit(e)})),p["\u0275\u0275elementEnd"]()),2&e&&p["\u0275\u0275property"]("error",t.serverError)("userName",t.userName)},directives:[A],encapsulation:2,changeDetection:0}),e}(),z=function(){function e(e,t){var n=this;this._bottomSheetRef=e,this.data=t,this.close=function(){return n._bottomSheetRef.dismiss()}}return e.prototype.ngOnInit=function(){this.navConfig={title:"Nytt passord",leftBtn:{icon:"close",callback:this.close}}},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](c.d),p["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-new-password-form-sheet-wrapper"]],decls:2,vars:2,consts:[[3,"config"],[3,"userName","finished"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"app-simple-top-nav",0),p["\u0275\u0275elementStart"](1,"app-new-password-form",1),p["\u0275\u0275listener"]("finished",(function(){return t.close()})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("config",t.navConfig),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("userName",t.data.userName))},directives:[f.a,U],encapsulation:2,changeDetection:0}),e}(),G=n("dAsQ");function T(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"mat-hint"),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](n.user.employer.name)}}function Y(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"a",7),p["\u0275\u0275elementStart"](1,"mat-icon"),p["\u0275\u0275text"](2,"phone"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275propertyInterpolate1"]("href","tel:",n.user.phoneNumber,"",p["\u0275\u0275sanitizeUrl"])}}function H(e,t){if(1&e&&p["\u0275\u0275element"](0,"app-icon-button",8),2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("config",n.newPasswordButton)}}function J(e,t){if(1&e&&p["\u0275\u0275element"](0,"app-icon-button",8),2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("config",n.editButton)}}var K=function(){function e(){this.Roles=s.i}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-user-card"]],inputs:{user:"user",editButton:"editButton",newPasswordButton:"newPasswordButton"},decls:12,vars:7,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"app-card","mb-1","p-3"],[1,"mr-2"],[1,"ellipsis","mr-auto"],[1,"mat-h4"],[4,"ngIf"],["class","color-success","mat-icon-button","",3,"href",4,"ngIf"],[3,"config",4,"ngIf"],["mat-icon-button","",1,"color-success",3,"href"],[3,"config"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275elementStart"](1,"mat-icon",1),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"span",2),p["\u0275\u0275elementStart"](4,"span",3),p["\u0275\u0275text"](5),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](6,"br"),p["\u0275\u0275template"](7,T,2,1,"mat-hint",4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"span"),p["\u0275\u0275template"](9,Y,3,1,"a",5),p["\u0275\u0275template"](10,H,1,1,"app-icon-button",6),p["\u0275\u0275template"](11,J,1,1,"app-icon-button",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](t.user.role==t.Roles.Oppdragsgiver?"work":"person"),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate2"]("",t.user.firstName," ",t.user.lastName,""),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.user.employer),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.user.phoneNumber),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.newPasswordButton&&t.user.role!=t.Roles.Leder),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.editButton&&t.user.role!=t.Roles.Leder))},directives:[g.c,g.b,I.a,v.l,y.f,x.a,G.a],encapsulation:2,changeDetection:0}),e}(),Q=n("uad8"),W=function(e){return[e]},X=function(e,t,n){return{icon:"edit",allowedRoles:e,callback:t,params:n}},Z=function(e,t,n){return{icon:"vpn_key",colorClass:"color-accent",allowedRoles:e,callback:t,params:n}};function ee(e,t){if(1&e&&p["\u0275\u0275element"](0,"app-user-card",4),2&e){var n=t.$implicit,r=p["\u0275\u0275nextContext"](2);p["\u0275\u0275property"]("user",n)("editButton",p["\u0275\u0275pureFunction3"](7,X,p["\u0275\u0275pureFunction1"](3,W,r.Roles.Leder),r.openUserForm,p["\u0275\u0275pureFunction1"](5,W,n.userName)))("newPasswordButton",p["\u0275\u0275pureFunction3"](15,Z,p["\u0275\u0275pureFunction1"](11,W,r.Roles.Leder),r.openNewPasswordForm,p["\u0275\u0275pureFunction1"](13,W,n.userName)))}}function te(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",2),p["\u0275\u0275template"](1,ee,1,19,"app-user-card",3),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",n)}}function ne(e,t){1&e&&p["\u0275\u0275element"](0,"mat-spinner",5)}var re=[{path:"",component:function(){function e(e,t,n){var r=this;this.mainNavService=e,this.userService=t,this._bottomSheet=n,this.Roles=s.i,this.users$=this.userService.getAllDetails$().pipe(Object(l.a)(this.sortByRole)),this.openUserForm=function(e){return r._bottomSheet.open(V,{data:{userNamePreset:e}})},this.openNewPasswordForm=function(e){return r._bottomSheet.open(z,{data:{userName:e}})},this.configureMainNav()}return e.prototype.configureMainNav=function(){var e={title:"Brukere"};e.buttons=[{icon:"person_add",colorClass:"color-accent",aria:"Ny bruker",callback:this.openUserForm,allowedRoles:[s.i.Leder]}],this.mainNavService.addTopNavConfig({default:e})},e.prototype.sortByRole=function(e){var t=e.reduce((function(e,t){switch(t.role){case s.i.Leder:e[s.i.Leder].push(t);break;case s.i.Mellomleder:e[s.i.Mellomleder].push(t);break;case s.i.Ansatt:e[s.i.Ansatt].push(t);break;case s.i.Oppdragsgiver:e[s.i.Oppdragsgiver].push(t)}return e}),{Leder:[],Mellomleder:[],Ansatt:[],Oppdragsgiver:[]});return Object(a.d)(t[s.i.Leder],t[s.i.Mellomleder],t[s.i.Ansatt],t[s.i.Oppdragsgiver])},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](i.p),p["\u0275\u0275directiveInject"](i.C),p["\u0275\u0275directiveInject"](c.b))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-user-list"]],decls:4,vars:4,consts:[["class","p-2 max-width",4,"ngIf","ngIfElse"],["loading",""],[1,"p-2","max-width"],[3,"user","editButton","newPasswordButton",4,"ngFor","ngForOf"],[3,"user","editButton","newPasswordButton"],["color","accent",1,"center-spinner"]],template:function(e,t){if(1&e&&(p["\u0275\u0275template"](0,te,2,1,"div",0),p["\u0275\u0275pipe"](1,"async"),p["\u0275\u0275template"](2,ne,1,0,"ng-template",null,1,p["\u0275\u0275templateRefExtractor"])),2&e){var n=p["\u0275\u0275reference"](3);p["\u0275\u0275property"]("ngIf",p["\u0275\u0275pipeBind1"](1,2,t.users$))("ngIfElse",n)}},directives:[v.l,v.k,K,Q.b],pipes:[v.b],encapsulation:2,changeDetection:0}),e}(),canActivate:[i.d],data:{allowedRoles:[s.i.Leder,s.i.Mellomleder]}}],oe=function(){function e(){}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.f.forChild(re)],o.f]}),e}(),ie=function(){function e(){}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.a,oe]]}),e}()}}]);
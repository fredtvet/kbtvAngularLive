(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"Iah+":function(e,t,n){"use strict";n.r(t),n.d(t,"TimesheetStatisticModule",(function(){return M}));var i=n("DUip"),r=n("VnD/"),a=n("tkcm"),o=n("k5Aa"),s=n("TYT/"),u=n("dJ3e"),c=n("h/AT"),l=n("uLXW"),m=n("sNR5"),p=n("QJY3"),d=n("Valr"),h=n("st1I"),f=["dataGrid"],v=function(){function e(e){var t=this;this.datePipe=e,this.users=[],this.columnDefs=[],this.rowData=[],this.convertMonthIndex=function(e){if(null!=e.value)return t.datePipe.transform((new Date).setMonth(e.value),"MMM")},this.convertDate=function(e){if(null!=e.value)return t.datePipe.transform(e.value)}}return Object.defineProperty(e.prototype,"timesheetSummaries",{get:function(){return this._timesheetSummaries},set:function(e){this._timesheetSummaries=e,this.initNgGrid(this.timesheetSummaries)},enumerable:!0,configurable:!0}),e.prototype.autoSizeGrid=function(){var e=this.dataGrid.columnApi.getAllColumns().filter((function(e){return"checkbox"!=e.getColId()}));this.dataGrid.columnApi.autoSizeColumns(e)},e.prototype.initNgGrid=function(e){if(this.columnDefs=[],this.rowData=[],!e||0==e.length)return null;var t=Object.getOwnPropertyNames(e[0]);t.includes("year")&&this.columnDefs.push({field:"year",headerName:"\xc5r",sortable:!0}),t.includes("month")&&this.columnDefs.push({field:"month",headerName:"M\xe5ned",sortable:!0,valueFormatter:this.convertMonthIndex}),t.includes("week")&&this.columnDefs.push({field:"week",headerName:"Uke",sortable:!0}),t.includes("date")&&this.columnDefs.push({field:"date",headerName:"Dato",sortable:!0,valueFormatter:this.convertDate}),this.columnDefs.push({field:"fullName",headerName:"Ansatt",sortable:!0}),this.columnDefs.push({field:"confirmedHours",headerName:"L\xe5ste timer",sortable:!0}),this.columnDefs.push({field:"openHours",headerName:"\xc5pne timer",sortable:!0});var n=e.reduce((function(e,t){return e+t.openHours}),0),i=e.reduce((function(e,t){return e+t.confirmedHours}),0);this.dataGrid&&this.dataGrid.api.setPinnedBottomRowData([{openHours:n,confirmedHours:i,userName:"Sum av timer",timesheets:[]}]),this.rowData=e},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](d.e))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-statistic-table"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275viewQuery"](f,!0),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.dataGrid=n.first)},inputs:{users:"users",timesheetSummaries:"timesheetSummaries"},decls:2,vars:2,consts:[["rowSelection","multiple","suppressRowClickSelection","true","suppressColumnVirtualisation","true","overlayNoRowsTemplate","Tomt",1,"ag-theme-balham","h-100","fadeInRight",3,"rowData","columnDefs","modelUpdated"],["dataGrid",""]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"ag-grid-angular",0,1),s["\u0275\u0275listener"]("modelUpdated",(function(){return t.autoSizeGrid()})),s["\u0275\u0275elementEnd"]()),2&e&&s["\u0275\u0275property"]("rowData",t.rowData)("columnDefs",t.columnDefs)},directives:[h.a],encapsulation:2,changeDetection:0}),e}(),g=n("p+mS"),y=n("GsDI");function S(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",6),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"]().openBottomSheet(e)})),s["\u0275\u0275elementStart"](1,"mat-icon"),s["\u0275\u0275text"](2,"filter_list"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}var b=[{path:"",component:function(){function e(e,t,n,i){var r=this;this.userService=e,this.mainNavService=t,this.timesheetService=n,this._bottomSheet=i,this.groupByTypes=o.b,this.filter$=this.timesheetService.filter$,this.groupBy$=this.timesheetService.groupBy$,this.timesheetSummaries$=this.timesheetService.timesheetSummaries$,this.users$=this.userService.getAll$(),this.changeGroupingType=function(e){return r.timesheetService.addGroupBy(e)},this.configureMainNav()}return e.prototype.openBottomSheet=function(e){var t=this;this._bottomSheet.open(a.a,{data:{filter:e,disabledFilters:["status"]}}).afterDismissed().pipe(Object(r.a)((function(e){return null!=e}))).subscribe((function(e){return t.timesheetService.addFilter(e)}))},e.prototype.configureMainNav=function(){this.mainNavService.addTopNavConfig({default:{title:"Timestatistikk"}})},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](u.A),s["\u0275\u0275directiveInject"](u.o),s["\u0275\u0275directiveInject"](u.y),s["\u0275\u0275directiveInject"](c.b))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-statistic"]],decls:17,vars:16,consts:[["fxLayout","column","fxLayoutGap","8px",1,"h-100","p-2"],["fxLayout","row","fxLayoutAlign","space-between center",1,"fadeInLeft"],["aria-label","Grupper etter tidsperiode",3,"ngModel","ngModelChange"],[3,"value"],["mat-raised-button","","class","bg-accent",3,"click",4,"ngIf"],["fxFlex","",1,"mat-elevation-z2",3,"timesheetSummaries","users"],["mat-raised-button","",1,"bg-accent",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"span",1),s["\u0275\u0275elementStart"](2,"mat-button-toggle-group",2),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.changeGroupingType(e)})),s["\u0275\u0275pipe"](3,"async"),s["\u0275\u0275elementStart"](4,"mat-button-toggle",3),s["\u0275\u0275text"](5,"Dag"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"mat-button-toggle",3),s["\u0275\u0275text"](7,"Uke"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"mat-button-toggle",3),s["\u0275\u0275text"](9,"M\xe5ned"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"mat-button-toggle",3),s["\u0275\u0275text"](11,"\xc5r"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](12,S,3,0,"button",4),s["\u0275\u0275pipe"](13,"async"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](14,"app-timesheet-statistic-table",5),s["\u0275\u0275pipe"](15,"async"),s["\u0275\u0275pipe"](16,"async"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",s["\u0275\u0275pipeBind1"](3,8,t.groupBy$)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("value",t.groupByTypes.Day),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("value",t.groupByTypes.Week),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("value",t.groupByTypes.Month),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("value",t.groupByTypes.Year),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",s["\u0275\u0275pipeBind1"](13,10,t.filter$)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("timesheetSummaries",s["\u0275\u0275pipeBind1"](15,12,t.timesheetSummaries$))("users",s["\u0275\u0275pipeBind1"](16,14,t.users$)))},directives:[l.c,l.d,l.b,m.b,p.l,p.o,m.a,d.l,v,l.a,g.b,y.a],pipes:[d.b],encapsulation:2,changeDetection:0}),e}()}],D=function(){function e(){}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(b)],i.f]}),e}(),w=n("DEyP"),N=n("OYkh"),M=function(){function e(){}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[N.a,D,w.a]]}),e}()}}]);
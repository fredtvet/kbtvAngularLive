(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"4SoM":function(e,t,n){"use strict";n.r(t),n.d(t,"TimesheetModule",(function(){return Z}));var i=n("DUip"),r=n("67Y/"),a=n("15JJ"),o=n("ea4N"),c=n("F/XL"),s=n("9Z1F"),p=n("TYT/"),m=n("dJ3e"),l=n("kxXi"),u=n("Valr"),d=function(){function e(e,t,n){this.userTimesheetService=e,this.dialogRef=t,this.timesheetId=n,this.timesheet$=this.userTimesheetService.getWithMission$(this.timesheetId).pipe(Object(s.a)((function(e){return Object(c.a)(null)})))}return e.prototype.deleteTimesheet=function(){var e=this;this.userTimesheetService.delete$(this.timesheetId).subscribe((function(t){return e.dialogRef.close()}))},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](m.B),p["\u0275\u0275directiveInject"](o.e),p["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-card-dialog-wrapper"]],decls:2,vars:3,consts:[[3,"timesheet","deleteClicked"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"app-timesheet-card",0),p["\u0275\u0275listener"]("deleteClicked",(function(){return t.deleteTimesheet()})),p["\u0275\u0275pipe"](1,"async"),p["\u0275\u0275elementEnd"]()),2&e&&p["\u0275\u0275property"]("timesheet",p["\u0275\u0275pipeBind1"](1,1,t.timesheet$))},directives:[l.a],pipes:[u.b],encapsulation:2,changeDetection:0}),e}(),g=n("h/AT"),h=n("uLXW"),f=n("MqYC"),v=n("GsDI"),C=function(){function e(e){this.dialog=e,this.labelClicked=new p.EventEmitter}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](o.b))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-day-label"]],inputs:{date:"date"},outputs:{labelClicked:"labelClicked"},decls:13,vars:12,consts:[["fxLayout","column","fxLayoutAlign","start center","matRipple","",1,"mat-elevation-z2","bg-foreground","pt-2",3,"click"],["fxLayout","column","fxLayoutAlign","center center"],[1,"mat-h3","m-0","line-height-100"],[1,"mat-title","m-0","line-height-100"],[1,"mat-small","line-height-100"],[1,"icon","m-1"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",0),p["\u0275\u0275listener"]("click",(function(){return t.labelClicked.emit(t.date)})),p["\u0275\u0275elementStart"](1,"div",1),p["\u0275\u0275elementStart"](2,"span",2),p["\u0275\u0275text"](3),p["\u0275\u0275pipe"](4,"date"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"span",3),p["\u0275\u0275text"](6),p["\u0275\u0275pipe"](7,"date"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"span",4),p["\u0275\u0275text"](9),p["\u0275\u0275pipe"](10,"date"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"mat-icon",5),p["\u0275\u0275text"](12,"add"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind2"](4,3,t.date,"E")," "),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind2"](7,6,t.date,"dd")," "),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind2"](10,9,t.date,"MMM")," "))},directives:[h.c,h.b,f.l,v.a],pipes:[u.e],encapsulation:2,changeDetection:0}),e}(),x=n("qaSM"),b=function(e,t){return{"bg-accent-light":e,"bg-warn-light":t}};function y(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",1),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().clickBar()})),p["\u0275\u0275elementStart"](1,"span",2),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var i=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction2"](2,b,2==i.timesheet.status,0==i.timesheet.status)),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",i.timesheet.totalHours,"t ")}}var P=function(){function e(){this.barClicked=new p.EventEmitter}return e.prototype.clickBar=function(){this.barClicked.emit(this.timesheet.id)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-mission-bar"]],inputs:{timesheet:"timesheet"},outputs:{barClicked:"barClicked"},decls:1,vars:1,consts:[["class","mission-bar mat-elevation-z1","fxLayout","column","fxLayoutAlign","center center","matRipple","",3,"ngClass","click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","matRipple","",1,"mission-bar","mat-elevation-z1",3,"ngClass","click"],[1,"mat-body-strong"]],template:function(e,t){1&e&&p["\u0275\u0275template"](0,y,3,5,"div",0),2&e&&p["\u0275\u0275property"]("ngIf",t.timesheet)},directives:[u.l,h.c,h.b,f.l,u.j,x.a],styles:[".m-0[_ngcontent-%COMP%]{margin:0}.mt-0[_ngcontent-%COMP%]{margin-top:0}.ml-0[_ngcontent-%COMP%]{margin-left:0}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mb-0[_ngcontent-%COMP%]{margin-bottom:0}.m-1[_ngcontent-%COMP%]{margin:4px}.mt-1[_ngcontent-%COMP%]{margin-top:4px}.ml-1[_ngcontent-%COMP%]{margin-left:4px}.mr-1[_ngcontent-%COMP%]{margin-right:4px}.mb-1[_ngcontent-%COMP%]{margin-bottom:4px}.m-2[_ngcontent-%COMP%]{margin:8px}.mt-2[_ngcontent-%COMP%]{margin-top:8px}.ml-2[_ngcontent-%COMP%]{margin-left:8px}.mr-2[_ngcontent-%COMP%]{margin-right:8px}.mb-2[_ngcontent-%COMP%]{margin-bottom:8px}.m-3[_ngcontent-%COMP%]{margin:12px}.mt-3[_ngcontent-%COMP%]{margin-top:12px}.ml-3[_ngcontent-%COMP%]{margin-left:12px}.mr-3[_ngcontent-%COMP%]{margin-right:12px}.mb-3[_ngcontent-%COMP%]{margin-bottom:12px}.m-4[_ngcontent-%COMP%]{margin:16px}.mt-4[_ngcontent-%COMP%]{margin-top:16px}.ml-4[_ngcontent-%COMP%]{margin-left:16px}.mr-4[_ngcontent-%COMP%]{margin-right:16px}.mb-4[_ngcontent-%COMP%]{margin-bottom:16px}.m-5[_ngcontent-%COMP%]{margin:20px}.mt-5[_ngcontent-%COMP%]{margin-top:20px}.ml-5[_ngcontent-%COMP%]{margin-left:20px}.mr-5[_ngcontent-%COMP%]{margin-right:20px}.mb-5[_ngcontent-%COMP%]{margin-bottom:20px}.m-6[_ngcontent-%COMP%]{margin:24px}.mt-6[_ngcontent-%COMP%]{margin-top:24px}.ml-6[_ngcontent-%COMP%]{margin-left:24px}.mr-6[_ngcontent-%COMP%]{margin-right:24px}.mb-6[_ngcontent-%COMP%]{margin-bottom:24px}.m-auto[_ngcontent-%COMP%]{margin:auto}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.mr-auto[_ngcontent-%COMP%]{margin-right:auto}.mb-auto[_ngcontent-%COMP%]{margin-bottom:auto}.p-0[_ngcontent-%COMP%]{padding:0}.pt-0[_ngcontent-%COMP%]{padding-top:0}.pl-0[_ngcontent-%COMP%]{padding-left:0}.pr-0[_ngcontent-%COMP%]{padding-right:0}.pb-0[_ngcontent-%COMP%]{padding-bottom:0}.p-1[_ngcontent-%COMP%]{padding:4px}.pt-1[_ngcontent-%COMP%]{padding-top:4px}.pl-1[_ngcontent-%COMP%]{padding-left:4px}.pr-1[_ngcontent-%COMP%]{padding-right:4px}.pb-1[_ngcontent-%COMP%]{padding-bottom:4px}.p-2[_ngcontent-%COMP%]{padding:8px}.pt-2[_ngcontent-%COMP%]{padding-top:8px}.pl-2[_ngcontent-%COMP%]{padding-left:8px}.pr-2[_ngcontent-%COMP%]{padding-right:8px}.pb-2[_ngcontent-%COMP%]{padding-bottom:8px}.p-3[_ngcontent-%COMP%]{padding:12px}.pt-3[_ngcontent-%COMP%]{padding-top:12px}.pl-3[_ngcontent-%COMP%]{padding-left:12px}.pr-3[_ngcontent-%COMP%]{padding-right:12px}.pb-3[_ngcontent-%COMP%]{padding-bottom:12px}.p-4[_ngcontent-%COMP%]{padding:16px}.pt-4[_ngcontent-%COMP%]{padding-top:16px}.pl-4[_ngcontent-%COMP%]{padding-left:16px}.pr-4[_ngcontent-%COMP%]{padding-right:16px}.pb-4[_ngcontent-%COMP%]{padding-bottom:16px}.p-5[_ngcontent-%COMP%]{padding:20px}.pt-5[_ngcontent-%COMP%]{padding-top:20px}.pl-5[_ngcontent-%COMP%]{padding-left:20px}.pr-5[_ngcontent-%COMP%]{padding-right:20px}.pb-5[_ngcontent-%COMP%]{padding-bottom:20px}.p-6[_ngcontent-%COMP%]{padding:24px}.pt-6[_ngcontent-%COMP%]{padding-top:24px}.pl-6[_ngcontent-%COMP%]{padding-left:24px}.pr-6[_ngcontent-%COMP%]{padding-right:24px}.pb-6[_ngcontent-%COMP%]{padding-bottom:24px}.p-auto[_ngcontent-%COMP%]{padding:auto}.pt-auto[_ngcontent-%COMP%]{padding-top:auto}.pl-auto[_ngcontent-%COMP%]{padding-left:auto}.pr-auto[_ngcontent-%COMP%]{padding-right:auto}.pb-auto[_ngcontent-%COMP%]{padding-bottom:auto}.mission-bar[_ngcontent-%COMP%]{border-radius:4px!important;height:100%;padding:2px!important;text-align:center}"],changeDetection:0}),e}(),k=n("XIAg"),O=function(){function e(e){this.dateTimeService=e}return e.prototype.transform=function(e,t){var n=this.dateTimeService.getWeekRangeByDateParams(e)[0];return(t||e.weekDay)&&n.setDate(n.getDate()+(t-1)||e.weekDay),n},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](m.g))},e.\u0275pipe=p["\u0275\u0275definePipe"]({name:"getDateByDateParams",type:e,pure:!0}),e}(),M=n("RHY+");function S(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"app-timesheet-mission-bar",8),p["\u0275\u0275listener"]("barClicked",(function(e){p["\u0275\u0275restoreView"](n);var i=t.$implicit,r=p["\u0275\u0275nextContext"](3);return i.status?r.openTimesheetCard(e):r.openTimesheetForm(void 0,e)})),p["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;p["\u0275\u0275styleProp"]("height",i.totalHours/14*300,"px"),p["\u0275\u0275property"]("timesheet",i)}}function w(e,t){1&e&&p["\u0275\u0275element"](0,"mat-divider",9)}function _(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"div",3),p["\u0275\u0275elementStart"](2,"app-timesheet-day-label",4),p["\u0275\u0275listener"]("labelClicked",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](2).openTimesheetForm(e)})),p["\u0275\u0275pipe"](3,"getDateByDateParams"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"div",5),p["\u0275\u0275template"](5,S,1,3,"app-timesheet-mission-bar",6),p["\u0275\u0275pipe"](6,"sortByDate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](7,w,1,0,"mat-divider",7),p["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit,r=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("date",p["\u0275\u0275pipeBind2"](3,3,r.dateParams,i)),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngForOf",p["\u0275\u0275pipeBind2"](6,6,r.days[i],"startTime")),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",7!==i)}}var T=function(){return[1,2,3,4,5]};function I(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"div",1),p["\u0275\u0275listener"]("swiperight",(function(){p["\u0275\u0275restoreView"](n);var e=t.$implicit;return p["\u0275\u0275nextContext"]().previousWeek(e.dateParams)}))("swipeleft",(function(){p["\u0275\u0275restoreView"](n);var e=t.$implicit;return p["\u0275\u0275nextContext"]().nextWeek(e.dateParams)})),p["\u0275\u0275template"](2,_,8,9,"ng-container",2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()}2&e&&(p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngForOf",p["\u0275\u0275pureFunction0"](1,T)))}var j=function(){function e(e,t,n,i,r,a,o){var c=this;this.mainNavService=e,this.router=t,this.route=n,this.dialog=i,this._bottomSheet=r,this.dateTimeService=a,this.userTimesheetService=o,this.date=new Date,this.currentWeekNr=this.dateTimeService.getWeekOfYear(this.date),this.currentYear=this.date.getFullYear(),this.openTimesheetForm=function(e,t){return c.router.navigate(["skjema"],{relativeTo:c.route,queryParams:{idPreset:t,datePreset:e.toString()}})},this.goToTimesheetList=function(){var e=c.getDateParams(c.route.snapshot.queryParams);c.router.navigate(["timer/liste",{returnRoute:c.router.url,dateRange:JSON.stringify(c.dateTimeService.getWeekRangeByDateParams(e))}])},this.goToWeekList=function(){return c.router.navigate(["timer/ukeliste"],{queryParams:{year:c.route.snapshot.queryParams.year}})},this.changeDateParams=function(e){return c.router.navigate(["timer/ukevisning"],{queryParams:{year:e.year,weekNr:e.weekNr}})},this.configureMainNav(this.getDateParams(this.route.snapshot.queryParams))}return e.prototype.ngOnInit=function(){this.initalizeObservable()},e.prototype.nextWeek=function(e){e.year==this.currentYear&&e.weekNr<this.currentWeekNr?e.weekNr++:e.year!=this.currentYear&&(e.weekNr>=this.dateTimeService.getWeeksInYear(e.year)?(e.year++,e.weekNr=1):e.weekNr++),this.changeDateParams(e)},e.prototype.previousWeek=function(e){e.weekNr<=1?(e.year--,e.weekNr=this.dateTimeService.getWeeksInYear(e.year)):e.weekNr--,this.changeDateParams(e)},e.prototype.openTimesheetCard=function(e){this.dialog.open(d,{data:e,panelClass:"extended-dialog"})},e.prototype.initalizeObservable=function(){var e=this;this.vm$=this.route.queryParams.pipe(Object(r.a)((function(t){return e.getDateParams(t)})),Object(a.a)((function(t){return e.configureMainNav(t),e.userTimesheetService.getByWeekGrouped$(t).pipe(Object(r.a)((function(e){return{days:e,dateParams:t}})))})))},e.prototype.configureMainNav=function(e){var t={title:"Uke "+e.weekNr,subTitle:e.year.toString(),backFn:this.goToWeekList,buttons:[{icon:"list",callback:this.goToTimesheetList}]};this.mainNavService.addTopNavConfig({default:t})},e.prototype.getDateParams=function(e){return{year:+e.year||this.date.getFullYear(),weekNr:+e.weekNr||this.dateTimeService.getWeekOfYear(this.date)}},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](m.o),p["\u0275\u0275directiveInject"](i.b),p["\u0275\u0275directiveInject"](i.a),p["\u0275\u0275directiveInject"](o.b),p["\u0275\u0275directiveInject"](g.b),p["\u0275\u0275directiveInject"](m.g),p["\u0275\u0275directiveInject"](m.B))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-week-view"]],decls:3,vars:3,consts:[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start stretch",1,"h-100",3,"swiperight","swipeleft"],[4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","start center",1,"w-100"],[1,"w-100","mb-1","fadeInDown",2,"z-index","1",3,"date","labelClicked"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","",1,"w-100",2,"padding","0 2px 0 2px","z-index","0"],["class","w-100 mb-1 fadeInDown",3,"timesheet","height","barClicked",4,"ngFor","ngForOf"],["vertical","true",4,"ngIf"],[1,"w-100","mb-1","fadeInDown",3,"timesheet","barClicked"],["vertical","true"]],template:function(e,t){1&e&&(p["\u0275\u0275template"](0,I,3,2,"ng-container",0),p["\u0275\u0275pipe"](1,"async"),p["\u0275\u0275element"](2,"router-outlet")),2&e&&p["\u0275\u0275property"]("ngIf",p["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[u.l,i.g,h.c,h.b,u.k,C,h.a,P,k.a],pipes:[u.b,O,M.a],encapsulation:2,changeDetection:0}),e}(),F=n("1YJq"),N=n("26FU"),D=n("VnD/"),R=n("tkcm"),E=n("D7mL"),B=function(){function e(e,t,n,i,r){void 0===e&&(e=F.h.Open),void 0===t&&(t=void 0),void 0===n&&(n=E.a.CurrentYear),void 0===i&&(i=[]),void 0===r&&(r=void 0),this.status=e,this.mission=t,this.dateRangePreset=n,this.dateRange=i,this.userName=r}return e.prototype.checkTimesheet=function(e){var t=e.status==this.status;if(this.userName&&null!==this.userName&&(t=t&&e.userName==this.userName),this.dateRange&&null!==this.dateRange){var n=new Date(e.startTime);t=t&&n>=this.dateRange[0]&&n<=this.dateRange[1]}return this.mission&&null!==this.mission&&(t=t&&e.missionId==this.mission.id),t},e}(),L=n("p+mS"),V=n("pdUi");function W(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",7),p["\u0275\u0275elementStart"](1,"app-timesheet-card",8),p["\u0275\u0275listener"]("deleteClicked",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](2).deleteTimesheet(e)}))("editClicked",(function(e){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"](2).openTimesheetForm(void 0,e)})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("timesheet",i)}}function $(e,t){if(1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",5),p["\u0275\u0275template"](2,W,2,1,"div",6),p["\u0275\u0275pipe"](3,"async"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()),2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("cdkVirtualForOf",p["\u0275\u0275pipeBind1"](3,1,n.timesheets$))}}function Y(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"span",9),p["\u0275\u0275elementStart"](1,"p"),p["\u0275\u0275text"](2,"Finner ingen timer med gitte filtre. "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"button",10),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().openFilterSheet()})),p["\u0275\u0275text"](4,"\xc5pne filter"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}}var A=function(){function e(e,t,n,i,r,a){var o=this;this.mainNavService=e,this.route=t,this.router=n,this._bottomSheet=i,this.userTimesheetService=r,this.dateTimeService=a,this.timesheetStatus=F.h,this.openTimesheetForm=function(e,t){return o.router.navigate(["skjema"],{relativeTo:o.route,queryParams:{idPreset:t,missionPreset:JSON.stringify(e)}})},this.deleteTimesheet=function(e){return o.userTimesheetService.delete$(e).subscribe()},this.getCurrentFilter=function(){return o.filterSubject.value},this.openFilterSheet=function(){o._bottomSheet.open(R.a,{data:{filter:o.getFilterCopy(),disabledFilters:["user"]}}).afterDismissed().pipe(Object(D.a)((function(e){return e instanceof B}))).subscribe((function(e){return o.filterSubject.next(e)}))},this.onBack=function(){var e=o.route.snapshot.params.returnRoute;e?o.router.navigateByUrl(e):o.router.navigate([""])},this.configureMainNav()}return e.prototype.ngOnInit=function(){var e=this;this.filterSubject=new N.a(this.getInitialFilter()),this.timesheets$=this.filterSubject.asObservable().pipe(Object(a.a)((function(t){return e.userTimesheetService.getByWithMission$((function(e){return t.checkTimesheet(e)}))})))},e.prototype.changeStatus=function(e){var t=this.getFilterCopy();t.status=e,this.filterSubject.next(t)},e.prototype.getFilterCopy=function(){return Object.assign(Object.create(Object.getPrototypeOf(this.filterSubject.value)),this.filterSubject.value)},e.prototype.getInitialFilter=function(){var e=new B;if(this.route.snapshot.params.mission&&(e.mission=JSON.parse(this.route.snapshot.params.mission)),this.route.snapshot.params.dateRange){e.dateRangePreset=F.a.Custom;var t=JSON.parse(this.route.snapshot.params.dateRange);t[0]=new Date(t[0]),t[1]=new Date(t[1]),e.dateRange=t}else this.route.snapshot.params.dateRangePreset?(e.dateRangePreset=this.route.snapshot.params.dateRangePreset,e.dateRange=this.dateTimeService.getRangeByDateRangePreset(this.route.snapshot.params.dateRangePreset)):(e.dateRangePreset=F.a.CurrentYear,e.dateRange=this.dateTimeService.getRangeByDateRangePreset(F.a.CurrentYear));return e},e.prototype.configureMainNav=function(){this.mainNavService.addTopNavConfig({default:{title:"Timeliste",backFn:this.onBack,buttons:[{icon:"filter_list",colorClass:"color-accent",callback:this.openFilterSheet}]}})},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](m.o),p["\u0275\u0275directiveInject"](i.a),p["\u0275\u0275directiveInject"](i.b),p["\u0275\u0275directiveInject"](g.b),p["\u0275\u0275directiveInject"](m.B),p["\u0275\u0275directiveInject"](m.g))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-list"]],decls:9,vars:4,consts:[["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","max-width"],["mat-fab","","aria-label","ny",1,"action_fab",3,"click"],[1,"scale-125"],[4,"ngIf","ngIfElse"],["noSheets",""],["itemSize","148","maxBufferPx","800","minBufferPx","800","fxFlex","",1,"fadeInRight"],["class","m-1",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"m-1"],[3,"timesheet","deleteClicked","editClicked"],[1,"ppt-5","text-center","w-100"],["mat-raised-button","","color","accent",1,"bounceIn",3,"click"]],template:function(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275elementStart"](1,"button",1),p["\u0275\u0275listener"]("click",(function(){return t.openTimesheetForm(t.getCurrentFilter().mission)})),p["\u0275\u0275elementStart"](2,"mat-icon",2),p["\u0275\u0275text"](3,"add"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](4,$,4,3,"ng-container",3),p["\u0275\u0275pipe"](5,"async"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](6,Y,5,0,"ng-template",null,4,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275element"](8,"router-outlet")),2&e){var n,i=p["\u0275\u0275reference"](7),r=null==(n=p["\u0275\u0275pipeBind1"](5,2,t.timesheets$))?null:n.length;p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",r)("ngIfElse",i)}},directives:[h.c,h.b,L.b,v.a,u.l,i.g,V.e,V.a,h.a,V.d,l.a],pipes:[u.b],encapsulation:2,changeDetection:0}),e}(),q=n("xMyE"),z=n("yMcq");function J(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",4),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=t.$implicit,i=p["\u0275\u0275nextContext"]().$implicit;return p["\u0275\u0275nextContext"]().goToWeekView(i.year,e.week)})),p["\u0275\u0275element"](1,"app-timesheet-summary-card-content",5),p["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("summary",i)}}function U(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",1),p["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",2),p["\u0275\u0275template"](2,J,2,1,"div",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("cdkVirtualForOf",n.summaries)("cdkVirtualForTrackBy",i.trackByWeekNr)("cdkVirtualForTemplateCacheSize",0)}}var X=[{path:"",redirectTo:"ukevisning",pathMatch:"full"},{path:"ukevisning",component:j,canActivate:[m.d],data:{allowedRoles:[F.g.Leder,F.g.Mellomleder,F.g.Ansatt],animation:"TimesheetWeekView"},children:[{path:"skjema",loadChildren:function(){return n.e(6).then(n.bind(null,"rIhx")).then((function(e){return e.TimesheetFormModule}))}}]},{path:"ukeliste",component:function(){function e(e,t,n,i,r,a){var o=this;this._bottomSheet=e,this.dateTimeService=t,this.userTimesheetService=n,this.mainNavService=i,this.route=r,this.router=a,this.today=new Date,this.weekNr=this.dateTimeService.getWeekOfYear(this.today),this.goToWeekView=function(e,t){o.router.navigate(["/timer/ukevisning"],{queryParams:{year:e,weekNr:t}})},this.openWeekFilter=function(e){o._bottomSheet.open(R.b,{data:{year:e}}).afterDismissed().pipe(Object(D.a)((function(e){return null!=e}))).subscribe((function(e){return o.updateYear(e.year)}))},this.updateYear=function(e){return o.router.navigate(["timer/ukeliste"],{queryParams:{year:e}})},this.configureMainNav=function(e){var t={title:"Ukeliste",subTitle:e?e.toString():o.today.getFullYear().toString()};t.buttons=[{icon:"filter_list",colorClass:"color-accent",callback:o.openWeekFilter,params:[e]}],o.mainNavService.addTopNavConfig({default:t})},this.configureMainNav(+this.route.snapshot.queryParamMap.year)}return e.prototype.ngOnInit=function(){var e=this;this.vm$=this.route.queryParams.pipe(Object(r.a)((function(t){return+t.year||e.today.getFullYear()})),Object(q.a)(this.configureMainNav),Object(a.a)((function(t){var n=t==e.today.getFullYear()?e.weekNr:e.dateTimeService.getWeeksInYear(t);return e.userTimesheetService.getByWeekRangeGrouped$(1,n,t).pipe(Object(r.a)((function(e){return{year:t,summaries:e.reverse()}})))})))},e.prototype.trackByWeekNr=function(e,t){return t.week},e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](g.b),p["\u0275\u0275directiveInject"](m.g),p["\u0275\u0275directiveInject"](m.B),p["\u0275\u0275directiveInject"](m.o),p["\u0275\u0275directiveInject"](i.a),p["\u0275\u0275directiveInject"](i.b))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-week-list"]],decls:2,vars:3,consts:[["class","h-100 fadeInLeft  max-width","fxLayout","column","fxLayoutAlign","start stretch",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","fadeInLeft","max-width"],["itemSize","78","maxBufferPx","800","minBufferPx","800","fxFlex",""],["class","app-card mat-elevation-z2 m-1","matRipple","",3,"click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["matRipple","",1,"app-card","mat-elevation-z2","m-1",3,"click"],[3,"summary"]],template:function(e,t){1&e&&(p["\u0275\u0275template"](0,U,3,3,"div",0),p["\u0275\u0275pipe"](1,"async")),2&e&&p["\u0275\u0275property"]("ngIf",p["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[u.l,h.c,h.b,V.e,V.a,h.a,V.d,f.l,z.a],pipes:[u.b],encapsulation:2,changeDetection:0}),e}(),canActivate:[m.d],data:{allowedRoles:[F.g.Leder,F.g.Mellomleder,F.g.Ansatt],animation:"TimesheetWeekList"}},{path:"liste",component:A,canActivate:[m.d],data:{allowedRoles:[F.g.Leder,F.g.Mellomleder,F.g.Ansatt],animation:"TimesheetList"},children:[{path:"skjema",loadChildren:function(){return n.e(6).then(n.bind(null,"rIhx")).then((function(e){return e.TimesheetFormModule}))}}]}],G=function(){function e(){}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(X)],i.f]}),e}(),H=n("OYkh"),Z=function(){function e(){}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[H.a,G]]}),e}()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/XYe":function(e,t,n){"use strict";function i(e,t){var n;return t.includes(null===(n=e.name)||void 0===n?void 0:n.split(".").pop())}n.d(t,"a",(function(){return i}))},"7ESN":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Open=1]="Open",e[e.Confirmed=2]="Confirmed",e}({})},"81hy":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(e,t,n){var i=this;this.maxChecks=t,this.checksCount=0,this.checkDefault=function(e){if(!e)return!1;if(i.maxChecks&&i.checksCount>=i.maxChecks)return!1;var t=!0;return(t=t&&i.addChecks(e))&&i.maxChecks&&i.checksCount++,t},this.checkInitial=function(e){return i.addInitialChecks(e)},this.criteria=e||{},this.check=n?this.checkDefault:this.isCriteriaEmpty?this.checkInitial:this.checkDefault}return Object.defineProperty(e.prototype,"isCriteriaEmpty",{get:function(){return!this.criteria},enumerable:!1,configurable:!0}),e.prototype.addChecks=function(e){return console.error("Method not implemented"),null},e.prototype.addInitialChecks=function(e){return!0},e}()},FCBk:function(e,t){},G1JD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),r=n("SWpy"),o=function(e){function t(t){var n=e.call(this,t)||this;return n.input=t,n}return Object(i.b)(t,e),t.prototype.adapt=function(){var t=this.input.formState.file;e.prototype.adapt.call(this),this.fileWrapper=new r.a(t,this.entity[this.modelConfig.identifier])},t}(n("1fZ0").a),a=n("QZ8H"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.input=t,n.actionId=a.a,n}return Object(i.b)(t,e),t.prototype.convertFormStateToEntity=function(){delete this.input.formState.file,this.entity=this.input.formState},t}(o)},NFsL:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("HDdC"),r=n("LRne"),o=n("VUy1"),a=n("aIpU"),s=n("fXoL"),c=n("2ChS"),l=function(){function e(e){this.matBottomSheet=e}return e.prototype.open=function(e){return this.matBottomSheet.open(o.a,{data:{formConfig:e.formConfig,navConfig:e.navConfig,submitCallback:e.submitCallback,formComponent:a.a,formState$:e.formState instanceof i.a?e.formState:Object(r.a)(e.formState)}})},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275inject"](c.b))},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"any"}),e}()},RuLz:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("mrSG"),r=n("lJxs"),o=n("O/YV"),a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(n){return n.pipe(Object(r.a)((function(n){var r=Object(i.c)(n,2),a=r[0],s=r[1];if(!s)return{criteria:null,records:null};var c=new(e.bind.apply(e,Object(i.d)([void 0,s],t)));return{criteria:s,records:Object(o.a)(a,(function(e){return c.check(e)}))}})))}}},SWpy:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(e,t){e&&t||console.error("File and Id are required"),this.id=t;var n=e.type,i=this.getExtension(e.name);this.modifiedFile=new File([e],t+"."+i,{type:n})}return e.prototype.getExtension=function(e){return e.split(".").pop()||e},e}()},cVEA:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("1ua0"),r=n("fXoL"),o=n("2ChS"),a=function(){function e(e){this.matBottomSheet=e}return e.prototype.open=function(e){return this.matBottomSheet.open(i.a,{data:e})},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](o.b))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"any"}),e}()},"d1+a":function(e,t,n){"use strict";n.r(t),n.d(t,"MissionListModule",(function(){return Te}));var i=n("mrSG"),r=n("9AJY"),o=n("XLlq"),a=n("lb8S"),s=n("PCNd"),c=n("K+RL"),l=n("9RCi"),u=n("tyNb"),p=n("lJxs"),d=n("fdWR"),m=n("1YJq"),f=n("MOy9"),h=n("DICB"),v=n("4jBN"),g=n("h7IN"),y=n("Zm+9"),b=n("NE9p"),S={name:"searchString",valueGetter:function(e){return e.searchString},type:"control",questions:[{component:h.a,question:{optionsGetter:function(e){return e.options.missions},valueFormatter:function(e){return e.address},valueProp:"address",placeholder:"S\xf8k med adresse",resetable:!0,activeFilter:{stringProps:["address"],maxChecks:50}}}]},C={name:"missionType",valueGetter:function(e){return e.missionType},type:"control",questions:[{component:g.a,question:{optionsGetter:function(e){return e.options.missionTypes},valueFormatter:function(e){return e.name},compareWith:Object(y.a)("id"),placeholder:"Velg oppdragstype"}}]},I={submitText:"Bruk",resettable:!0,resetState:{finished:!1},controls:[S,b.b,C,{name:"finished",valueGetter:function(e){return e.finished},type:"control",questions:[{component:v.a,question:{label:"Velg status",optionsGetter:[!1,!0],valueFormatter:function(e){return e?"Ferdig":"Aktiv"}}}]}]},x=n("6veg"),k=n("m/Bn"),j=n("itXk"),F=n("NlAt"),E=n("FnCK"),O=n("1a0Z"),w=n("/XYe"),M=n("rR48"),L=function(e){function t(t,n,i){var r,o=e.call(this,t,n,i)||this;return o.searchStringLower=null===(r=null==t?void 0:t.searchString)||void 0===r?void 0:r.toLowerCase(),o.isCriteriaEmpty&&(o.sixtyDaysAgo=(new Date).setDate((new Date).getDate()-60)),o}return Object(i.b)(t,e),Object.defineProperty(t.prototype,"isCriteriaEmpty",{get:function(){return!this.criteria||null==this.criteria.finished&&!this.criteria.searchString&&!this.criteria.employer&&!this.criteria.missionType},enumerable:!1,configurable:!0}),t.prototype.addChecks=function(e){var t,n,i=!0;return null!=this.criteria.finished&&(i=i&&(e.finished===this.criteria.finished||!e.finished&&!1===this.criteria.finished)),this.criteria.searchString&&(i=i&&this.filterSearchString(e)),(null===(t=this.criteria.employer)||void 0===t?void 0:t.id)&&(i=i&&e.employerId===this.criteria.employer.id),(null===(n=this.criteria.missionType)||void 0===n?void 0:n.id)&&(i=i&&e.missionTypeId===this.criteria.missionType.id),i},t.prototype.addInitialChecks=function(e){return e.updatedAt>=this.sixtyDaysAgo||e.lastVisited>=this.sixtyDaysAgo},t.prototype.filterSearchString=function(e){return e.address.toLowerCase().includes(this.searchStringLower)||e.id.includes(this.searchStringLower)},t}(n("81hy").a),R=n("G1JD"),P=n("RuLz"),N="SET_MISSION_CRITERIA",D={actionId:N,reducerFn:function(e,t){return{missionCriteria:t.missionCriteria}}},T="MISSION_LIST_UPDATE_LAST_VISITED",B={actionId:T,stateProperties:["missions"],noDeepCloneState:!0,reducerFn:function(e,t){var n,r=null===(n=e.missions)||void 0===n?void 0:n.findIndex((function(e){return e.id===t.id}));if(!r||e.missions)return null;var o=e.missions[r];return r&&o?(o=Object(i.a)(Object(i.a)({},o),{lastVisited:(new Date).getTime()}),e):null}},_=n("fXoL"),V=n("lMzk"),A=n("sYIv"),$=n("lvqV"),U=function(){function e(e,t,n){var i=this;this.notificationService=e,this.store=t,this.componentStore=n,this.filteredMissions$=Object(j.a)([this.store.selectProperty$("missions"),this.componentStore.selectProperty$("missionCriteria")]).pipe(Object(P.a)(L,null,!0),Object(p.a)((function(e){return Object(O.a)(e.records,"updatedAt")}))),this.criteria$=this.componentStore.selectProperty$("missionCriteria"),this.criteriaFormState$=this.store.select$(["missionTypes","employers","missions"],!1).pipe(Object(p.a)((function(e){return{options:e}}))),this.addCriteria=function(e){return i.componentStore.dispatch({actionId:N,missionCriteria:e})},this.updateLastVisited=function(e){return i.store.dispatch({actionId:T,id:e})}}return Object.defineProperty(e.prototype,"criteria",{get:function(){return this.componentStore.selectProperty("missionCriteria")},enumerable:!1,configurable:!0}),e.prototype.getMissionDetails$=function(e){this.updateLastVisited(e);var t=new F.a("missions",["missionNotes","missionDocuments","missionImages"]);return this.store.select$(t.includedProps).pipe(Object(p.a)((function(n){return Object(E.a)(n,t,e)})))},e.prototype.updateHeaderImage=function(e,t){if(!Object(w.a)(t,M.a))return this.notificationService.notify({title:"Filtypen er ikke tillatt.",type:2});var n=new R.a({formState:{id:e,file:t},stateProp:"missions",saveAction:2});n.apiUrlOverride="/Missions/"+e+"/UpdateHeaderImage",this.store.dispatch(n)},e.\u0275fac=function(t){return new(t||e)(_["\u0275\u0275inject"](V.NotificationService),_["\u0275\u0275inject"](A.a),_["\u0275\u0275inject"]($.a))},e.\u0275prov=_["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),z=Object(i.d)([U],k.a,[{provide:c.c,useValue:D,multi:!0},{provide:c.a,useValue:{missionCriteria:{finished:!1}}}]),q=n("sNHF"),H=n("AEq6"),G=n("WAJ7"),X=n("tYFc"),W=n("ofXK"),Y=n("eTJq"),J=n("XiUz"),Q=n("vxfF"),K=n("SRL/"),Z=n("NFeN"),ee=n("znSr");function te(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"p",4),_["\u0275\u0275text"](1,"Fant ingen oppdrag"),_["\u0275\u0275elementEnd"]())}var ne=function(e){return[e,"detaljer"]};function ie(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"app-list-card",5),_["\u0275\u0275elementStart"](1,"mat-icon",6),_["\u0275\u0275text"](2,"home_work"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](3,"span",7),_["\u0275\u0275text"](4),_["\u0275\u0275elementEnd"](),_["\u0275\u0275text"](5),_["\u0275\u0275elementStart"](6,"mat-icon",8),_["\u0275\u0275text"](7),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275property"]("routerLink",_["\u0275\u0275pureFunction1"](4,ne,n.id)),_["\u0275\u0275advance"](4),_["\u0275\u0275textInterpolate"]("("+n.id+") "),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate1"]("",n.address," "),_["\u0275\u0275advance"](2),_["\u0275\u0275textInterpolate"](n.finished?"check":"chevron_right")}}var re=function(){function e(){this.trackByFn=Object(Y.a)("missions")}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=_["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-list-view"]],inputs:{missions:"missions"},decls:4,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","pl-1","pr-1","max-width",2,"overflow","hidden"],["class","m-2",4,"ngIf"],["itemSize","56","maxBufferPx","800","minBufferPx","800",1,"h-100"],[3,"routerLink",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"m-2"],[3,"routerLink"],["left-side",""],["fxHide.xs",""],["right-side",""]],template:function(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"div",0),_["\u0275\u0275template"](1,te,2,0,"p",1),_["\u0275\u0275elementStart"](2,"cdk-virtual-scroll-viewport",2),_["\u0275\u0275template"](3,ie,8,6,"app-list-card",3),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e&&(_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",!t.missions||0==t.missions.length),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("cdkVirtualForOf",t.missions)("cdkVirtualForTrackBy",t.trackByFn))},directives:[J.c,J.b,W.m,Q.e,Q.a,Q.d,K.a,u.c,Z.a,ee.b],encapsulation:2,changeDetection:0}),e}(),oe=n("ci80"),ae=n("WX+2");function se(e,t){if(1&e&&(_["\u0275\u0275elementContainerStart"](0,3),_["\u0275\u0275element"](1,"app-main-top-nav-bar",4),_["\u0275\u0275element"](2,"app-chips-bar",5),_["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("config",n.navConfig),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("chips",n.criteriaChips)}}var ce=function(){function e(e,t,n,r,o){var a=this;this.formService=e,this.chipsFactory=t,this.modelFormService=n,this.facade=r,this.route=o,this.navVm$=this.facade.criteria$.pipe(Object(p.a)((function(e){return{criteriaChips:a.getCriteriaChips(e),navConfig:a.getTopNavConfig(e)}}))),this.missions$=this.facade.filteredMissions$,this.searchMissions=function(e){return a.facade.addCriteria(Object(i.a)(Object(i.a)({},a.facade.criteria),{searchString:e}))},this.openMissionForm=function(){return a.modelFormService.open({formConfig:{dynamicForm:x.a,stateProp:"missions"}})},this.openMissionFilter=function(){return a.formService.open({formConfig:Object(i.a)(Object(i.a)({},I),{initialValue:a.facade.criteria}),formState:a.facade.criteriaFormState$,navConfig:{title:"Velg filtre"},submitCallback:function(e){return a.facade.addCriteria(e)}})},this.fabs=[{icon:"add",aria:"Legg til",color:"accent",callback:this.openMissionForm,allowedRoles:[m.Roles.Leder,m.Roles.Mellomleder]}]}return Object.defineProperty(e.prototype,"initialMissionId",{get:function(){return this.route.snapshot.paramMap.get("initialMissionId")},enumerable:!1,configurable:!0}),e.prototype.getTopNavConfig=function(e){return{title:"Oppdrag",buttons:[{icon:"filter_list",callback:this.openMissionFilter,color:Object(f.a)(e,{finished:!1})?"accent":null}],searchBar:{callback:this.searchMissions,initialValue:null==e?void 0:e.searchString,placeholder:"S\xf8k med adresse eller id"}}},e.prototype.getCriteriaChips=function(e){var t=this;return this.chipsFactory.createCriteriaChips(e,(function(n){return t.resetCriteriaProp(n,e)}),{finished:{valueFormatter:function(e){return e?"Ferdig":null}},employer:{valueFormatter:function(e){return Object(d.a)("employers",e)}},missionType:{valueFormatter:function(e){return Object(d.a)("missionTypes",e)}}})},e.prototype.resetCriteriaProp=function(e,t){t[e]=null,this.facade.addCriteria(t)},e.\u0275fac=function(t){return new(t||e)(_["\u0275\u0275directiveInject"](q.FormService),_["\u0275\u0275directiveInject"](H.a),_["\u0275\u0275directiveInject"](G.ModelFormService),_["\u0275\u0275directiveInject"](U),_["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=_["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-list"]],features:[_["\u0275\u0275ProvidersFeature"](z)],decls:5,vars:7,consts:[[3,"fabs"],["navbar","",4,"ngIf"],[3,"missions","search"],["navbar",""],[3,"config"],[3,"chips"]],template:function(e,t){1&e&&(_["\u0275\u0275elementStart"](0,"app-main-skeleton",0),_["\u0275\u0275template"](1,se,3,2,"ng-container",1),_["\u0275\u0275pipe"](2,"async"),_["\u0275\u0275elementStart"](3,"app-mission-list-view",2),_["\u0275\u0275listener"]("search",(function(e){return t.searchMissions(e)})),_["\u0275\u0275pipe"](4,"async"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e&&(_["\u0275\u0275property"]("fabs",t.fabs),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",_["\u0275\u0275pipeBind1"](2,3,t.navVm$)),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("missions",_["\u0275\u0275pipeBind1"](4,5,t.missions$)))},directives:[X.a,W.m,re,oe.a,ae.a],pipes:[W.b],encapsulation:2,changeDetection:0}),e}(),le=n("xzsT"),ue=n("k5Aa"),pe=n("cVEA"),de=n("z9HP"),me=n("/t3+");function fe(e,t){if(1&e){var n=_["\u0275\u0275getCurrentView"]();_["\u0275\u0275elementStart"](0,"div",5),_["\u0275\u0275elementStart"](1,"img",6,7),_["\u0275\u0275listener"]("error",(function(){return _["\u0275\u0275restoreView"](n),_["\u0275\u0275reference"](2).src="/assets/notfound.png?"})),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()}if(2&e){var i=_["\u0275\u0275nextContext"](2);_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("src",i.config.imgSrc,_["\u0275\u0275sanitizeUrl"])}}function he(e,t){if(1&e&&(_["\u0275\u0275elementContainerStart"](0),_["\u0275\u0275elementStart"](1,"div",11),_["\u0275\u0275text"](2),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](3,"br"),_["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,i=_["\u0275\u0275nextContext"](3);_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngClass",i.config.imgSrc?"img-title-overlay":""),_["\u0275\u0275advance"](1),_["\u0275\u0275textInterpolate"](n)}}function ve(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"mat-toolbar",8),_["\u0275\u0275elementStart"](1,"span",9),_["\u0275\u0275template"](2,he,4,2,"ng-container",10),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275property"]("ngClass",n.config.imgSrc?"detail-navbar-overlay detail-navbar-overlay-bottom":""),_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("ngForOf",n.config.titleLines)}}function ge(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div",1),_["\u0275\u0275template"](1,fe,3,1,"div",2),_["\u0275\u0275element"](2,"app-main-top-nav-bar",3),_["\u0275\u0275template"](3,ve,3,2,"mat-toolbar",4),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"]();_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",n.config.imgSrc),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("config",n.config)("stylingClass",n.config.imgSrc?"detail-navbar-overlay detail-navbar-overlay-top":""),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ngIf",(null==n.config?null:n.config.titleLines)&&n.config.titleLines.length>0)}}var ye=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=_["\u0275\u0275defineComponent"]({type:e,selectors:[["app-detail-top-nav-bar"]],inputs:{config:"config"},decls:1,vars:1,consts:[["class","container primary",4,"ngIf"],[1,"container","primary"],["class","img-container text-center mr-auto ml-auto ",4,"ngIf"],[3,"config","stylingClass"],["class","detail-nav",3,"ngClass",4,"ngIf"],[1,"img-container","text-center","mr-auto","ml-auto"],["appImageErrorReloader","","alt","Forsidebilde",3,"src","error"],["img",""],[1,"detail-nav",3,"ngClass"],[1,"ml-6","mb-2"],[4,"ngFor","ngForOf"],[1,"title-line","pl-2","pr-2",3,"ngClass"]],template:function(e,t){1&e&&_["\u0275\u0275template"](0,ge,4,4,"div",0),2&e&&_["\u0275\u0275property"]("ngIf",t.config)},directives:[W.m,oe.a,de.a,me.a,W.k,ee.a,W.l],styles:[".container[_ngcontent-%COMP%]{position:relative}.img-container[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;width:100%;min-height:150px;max-width:600px;max-height:37vh}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.title-line[_ngcontent-%COMP%]{display:inline-block;margin-top:2px}.img-title-overlay[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.75)}mat-toolbar-row.detail-nav[_ngcontent-%COMP%], mat-toolbar-single-row.detail-nav[_ngcontent-%COMP%], mat-toolbar.detail-nav[_ngcontent-%COMP%]{height:auto!important;padding:2px!important;min-height:40px!important;background:inherit;color:inherit} .detail-navbar-overlay{position:absolute;left:0;right:0;background-color:transparent!important;color:#fff!important} .detail-navbar-overlay-top{top:0;background-color:rgba(0,0,0,.5)!important}.detail-navbar-overlay-bottom[_ngcontent-%COMP%]{bottom:0;pointer-events:none}.no-img-container-height[_ngcontent-%COMP%]{height:auto}"],changeDetection:0}),e}(),be=n("FKr1"),Se=n("TU8p"),Ce=n("EFs6");function Ie(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"a",12),_["\u0275\u0275elementStart"](1,"mat-icon",13),_["\u0275\u0275text"](2,"phone"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](3,"br"),_["\u0275\u0275elementStart"](4,"span"),_["\u0275\u0275text"](5),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275propertyInterpolate1"]("href","tel:",null==n.mission?null:n.mission.phoneNumber,"",_["\u0275\u0275sanitizeUrl"]),_["\u0275\u0275advance"](5),_["\u0275\u0275textInterpolate1"]("",(null==n.mission?null:n.mission.phoneNumber)||"N/A"," ")}}function xe(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"span",14),_["\u0275\u0275elementStart"](1,"mat-icon",13),_["\u0275\u0275text"](2,"phone"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](3,"br"),_["\u0275\u0275elementStart"](4,"span"),_["\u0275\u0275text"](5),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275advance"](5),_["\u0275\u0275textInterpolate1"]("",(null==n.mission?null:n.mission.phoneNumber)||"N/A"," ")}}var ke=function(e){return["/oppdrag",e,"detaljer","dokumenter"]};function je(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"app-list-card",7),_["\u0275\u0275elementStart"](1,"mat-icon",8),_["\u0275\u0275text"](2,"folder"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](3,"span",9),_["\u0275\u0275text"](4,"Dokumenter"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](5,"mat-icon",10),_["\u0275\u0275text"](6,"chevron_right"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275property"]("routerLink",_["\u0275\u0275pureFunction1"](2,ke,null==n.mission?null:n.mission.id)),_["\u0275\u0275advance"](3),_["\u0275\u0275property"]("matBadge",n.mission.missionDocuments?n.mission.missionDocuments.length:0)}}var Fe=function(e){return["/oppdrag",e,"detaljer","notater"]};function Ee(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"app-list-card",7),_["\u0275\u0275elementStart"](1,"mat-icon",8),_["\u0275\u0275text"](2,"rate_review"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](3,"span",9),_["\u0275\u0275text"](4,"Notater"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](5,"mat-icon",10),_["\u0275\u0275text"](6,"chevron_right"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275nextContext"](2);_["\u0275\u0275property"]("routerLink",_["\u0275\u0275pureFunction1"](2,Fe,null==n.mission?null:n.mission.id)),_["\u0275\u0275advance"](3),_["\u0275\u0275property"]("matBadge",n.mission.missionNotes?n.mission.missionNotes.length:0)}}var Oe=function(e){return["/oppdrag",e,"detaljer","bilder"]};function we(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"div",1),_["\u0275\u0275elementStart"](1,"div",2),_["\u0275\u0275template"](2,Ie,6,2,"a",3),_["\u0275\u0275template"](3,xe,6,1,"ng-template",null,4,_["\u0275\u0275templateRefExtractor"]),_["\u0275\u0275elementStart"](5,"a",5),_["\u0275\u0275elementStart"](6,"mat-icon",6),_["\u0275\u0275text"](7,"directions_car"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275element"](8,"br"),_["\u0275\u0275elementStart"](9,"span"),_["\u0275\u0275text"](10,"Veibeskrivelse"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](11,"app-list-card",7),_["\u0275\u0275elementStart"](12,"mat-icon",8),_["\u0275\u0275text"](13,"photo_library"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](14,"span",9),_["\u0275\u0275text"](15,"Bilder"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementStart"](16,"mat-icon",10),_["\u0275\u0275text"](17,"chevron_right"),_["\u0275\u0275elementEnd"](),_["\u0275\u0275elementEnd"](),_["\u0275\u0275template"](18,je,7,4,"app-list-card",11),_["\u0275\u0275template"](19,Ee,7,4,"app-list-card",11),_["\u0275\u0275elementEnd"]()),2&e){var n=_["\u0275\u0275reference"](4),i=_["\u0275\u0275nextContext"]();_["\u0275\u0275advance"](2),_["\u0275\u0275property"]("ngIf",null==i.mission?null:i.mission.phoneNumber)("ngIfElse",n),_["\u0275\u0275advance"](3),_["\u0275\u0275propertyInterpolate1"]("href","https://www.google.com/maps/dir/?api=1&destination=",null==i.mission?null:i.mission.address,"&travelmode=driving",_["\u0275\u0275sanitizeUrl"]),_["\u0275\u0275advance"](6),_["\u0275\u0275property"]("routerLink",_["\u0275\u0275pureFunction1"](7,Oe,null==i.mission?null:i.mission.id)),_["\u0275\u0275advance"](3),_["\u0275\u0275property"]("matBadge",i.mission.missionImages?i.mission.missionImages.length:0),_["\u0275\u0275advance"](4),_["\u0275\u0275property"]("ifRole",i.RolePresets.Internal),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("ifRole",i.RolePresets.Internal)}}var Me=function(){function e(){this.RolePresets=m.RolePresets}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=_["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-details-view"]],inputs:{mission:"mission"},decls:1,vars:1,consts:[["class","p-1 max-width",4,"ngIf"],[1,"p-1","max-width"],["fxLayout","row","fxLayoutGap","8px",1,"mat-subheading-2","mb-2"],["class","mat-elevation-z2 foreground-card text-center p-6","fxFlex","50","matRipple","",3,"href",4,"ngIf","ngIfElse"],["noPhone",""],["target","_blank","fxFlex","50","matRipple","",1,"mat-elevation-z2","foreground-card","text-center","p-6",3,"href"],[1,"scale-150"],["ellipsisDisabled","true",3,"routerLink"],["left-side",""],["matBadgeOverlap","false","matBadgeColor","accent",3,"matBadge"],["right-side",""],["ellipsisDisabled","true",3,"routerLink",4,"ifRole"],["fxFlex","50","matRipple","",1,"mat-elevation-z2","foreground-card","text-center","p-6",3,"href"],[1,"scale-150","mb-1"],["fxFlex","50",1,"mat-elevation-z2","foreground-card","text-center","p-6"]],template:function(e,t){1&e&&_["\u0275\u0275template"](0,we,20,9,"div",0),2&e&&_["\u0275\u0275property"]("ngIf",t.mission)},directives:[W.m,J.c,J.d,J.a,be.l,Z.a,K.a,u.c,Se.a,Ce.a],encapsulation:2,changeDetection:0}),e}(),Le=["imageInput"];function Re(e,t){if(1&e&&(_["\u0275\u0275elementStart"](0,"app-main-skeleton",3),_["\u0275\u0275element"](1,"app-detail-top-nav-bar",4),_["\u0275\u0275element"](2,"app-mission-details-view",5),_["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("config",n.navConfig),_["\u0275\u0275advance"](1),_["\u0275\u0275property"]("mission",n.mission)}}var Pe=[{path:"",component:ce,data:{depth:1},children:[{path:":id/detaljer",component:function(){function e(e,t,n,i,r,o,a){var s=this;this.facade=e,this.route=t,this.router=n,this.appFileUrl=i,this.menuService=r,this.notificationService=o,this.modelFormService=a,this.vm$=this.facade.getMissionDetails$(this.missionId).pipe(Object(p.a)((function(e){return{navConfig:s.getNavConfig(e),mission:e}}))),this.updateHeaderImage=function(e){return e&&e[0]?s.facade.updateHeaderImage(s.missionId,e[0]):null},this.openHeaderImageInput=function(){var e,t;if(!window.navigator.onLine)return s.notificationService.notify(le.a.OnlineRequired);null===(t=null===(e=s.imageInput)||void 0===e?void 0:e.nativeElement)||void 0===t||t.click()},this.openMissionForm=function(e){return s.modelFormService.open({onDeleteUri:"/oppdrag",formConfig:{dynamicForm:x.b,stateProp:"missions",entityId:e}})},this.goToTimesheets=function(e){return s.router.navigate(["timer",{returnUrl:s.router.url,criteria:JSON.stringify({mission:e,status:ue.b.Open})}],{relativeTo:s.route})},this.openBottomSheetMenu=function(e){s.menuService.open([{text:"Rediger",icon:"edit",callback:s.openMissionForm,params:[null==e?void 0:e.id],allowedRoles:[m.Roles.Leder]},{text:((null==e?void 0:e.fileName)?"Oppdater":"Legg til")+" forsidebilde",icon:"add_photo_alternate",callback:s.openHeaderImageInput,allowedRoles:[m.Roles.Leder]}])},this.onBack=function(){return s.router.navigate(["../../"],{relativeTo:s.route})}}return Object.defineProperty(e.prototype,"missionId",{get:function(){return this.route.snapshot.paramMap.get("id")},enumerable:!1,configurable:!0}),e.prototype.getNavConfig=function(e){var t;return{titleLines:null===(t=null==e?void 0:e.address)||void 0===t?void 0:t.split(",").filter((function(e){return"norge"!==e.toLowerCase().replace(/\s/g,"")})),subTitle:(null==e?void 0:e.finished)?"Oppdrag ferdig!":"ID: "+(null==e?void 0:e.id),subIcon:(null==e?void 0:e.finished)?"check":"",imgSrc:this.appFileUrl.transform(e,"missionheader"),backFn:this.onBack,buttons:[{icon:"timer",callback:this.goToTimesheets,params:[e],allowedRoles:m.RolePresets.Internal},{icon:"more_vert",callback:this.openBottomSheetMenu,params:[e],allowedRoles:m.RolePresets.Authority}]}},e.\u0275fac=function(t){return new(t||e)(_["\u0275\u0275directiveInject"](U),_["\u0275\u0275directiveInject"](u.a),_["\u0275\u0275directiveInject"](u.b),_["\u0275\u0275directiveInject"](a.a),_["\u0275\u0275directiveInject"](pe.a),_["\u0275\u0275directiveInject"](V.NotificationService),_["\u0275\u0275directiveInject"](G.ModelFormService))},e.\u0275cmp=_["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-details"]],viewQuery:function(e,t){var n;1&e&&_["\u0275\u0275viewQuery"](Le,!0),2&e&&_["\u0275\u0275queryRefresh"](n=_["\u0275\u0275loadQuery"]())&&(t.imageInput=n.first)},decls:4,vars:3,consts:[["overlayMode","true",4,"ngIf"],["type","file",2,"display","none",3,"change"],["imageInput",""],["overlayMode","true"],["navbar","",3,"config"],[3,"mission"]],template:function(e,t){1&e&&(_["\u0275\u0275template"](0,Re,3,2,"app-main-skeleton",0),_["\u0275\u0275pipe"](1,"async"),_["\u0275\u0275elementStart"](2,"input",1,2),_["\u0275\u0275listener"]("change",(function(e){return t.updateHeaderImage(e.target.files)})),_["\u0275\u0275elementEnd"]()),2&e&&_["\u0275\u0275property"]("ngIf",_["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[W.m,X.a,ye,Me],pipes:[W.b],encapsulation:2,changeDetection:0}),e}(),data:{child:!0},children:[{path:"timer",data:{child:!0},loadChildren:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"Q+mn")).then((function(e){return e.UserTimesheetListModule}))}},{path:"bilder",data:{child:!0},loadChildren:function(){return Promise.all([n.e(0),n.e(22)]).then(n.bind(null,"skTp")).then((function(e){return e.MissionImageListModule}))}},{path:"dokumenter",data:{allowedRoles:m.RolePresets.Internal.valueOf(),child:!0},loadChildren:function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"PvB8")).then((function(e){return e.MissionDocumentListModule}))}},{path:"notater",data:{allowedRoles:m.RolePresets.Internal.valueOf(),child:!0},loadChildren:function(){return n.e(23).then(n.bind(null,"QoWm")).then((function(e){return e.MissionNoteListModule}))}}]}]}],Ne=function(){function e(){}return e.\u0275mod=_["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=_["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[u.f.forChild(Pe)],u.f]}),e}(),De=n("1L5U"),Te=function(){function e(e){}return e.\u0275mod=_["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=_["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)(_["\u0275\u0275inject"](De.a))},providers:Object(i.d)([a.a],r.c,r.d,r.a,[{provide:c.c,useValue:B,multi:!0}]),imports:[[s.a,Ne,l.a,o.a]]}),e}()},d7GW:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.None=0]="None",e[e.Day=1]="Day",e[e.Week=2]="Week",e[e.Month=3]="Month",e[e.Year=4]="Year",e}({})},k5Aa:function(e,t,n){"use strict";var i=n("d7GW");n.d(t,"a",(function(){return i.a}));var r=n("7ESN");n.d(t,"b",(function(){return r.a}))},lb8S:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("u3SY"),r=n("fXoL"),o=n("jhN1"),a=function(){function e(e){this.domSanitizer=e}return e.prototype.transform=function(e,t,n){if(e)return e.temp_localFileUrl?this.domSanitizer.bypassSecurityTrustResourceUrl(e.temp_localFileUrl):e.fileName?Object(i.a)(e.fileName,t,n):void 0},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.b))},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"appFileUrl",type:e,pure:!0}),e}()},lvqV:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("mrSG"),r=n("K+RL"),o=n("yQfo"),a=n("ojMU"),s=n("fXoL"),c=n("sYIv"),l=n("BMAU"),u=n("uQHu"),p=function(e){function t(t,n,i,r,a){return e.call(this,new o.a(a),t,n,i,r)||this}return Object(i.b)(t,e),t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](c.a,12),s["\u0275\u0275inject"](l.a),s["\u0275\u0275inject"](u.a,2),s["\u0275\u0275inject"](r.c,10),s["\u0275\u0275inject"](r.a,10))},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(a.a)},"m/Bn":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("uQHu"),r=n("lvqV"),o=[i.a,r.a]},rR48:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=["jpg","jpeg","png"]},sNHF:function(e,t,n){"use strict";var i=n("FCBk");n.o(i,"FormService")&&n.d(t,"FormService",(function(){return i.FormService}));var r=n("NFsL");n.d(t,"FormService",(function(){return r.a}))},u3SY:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("AytR");function r(e,t,n){var r=i.a.fileServerUrl+"/"+t+"/"+e;return n&&(r=r+"/?x="+Math.floor(100*Math.random())),r}},xzsT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={OnlineRequired:{title:"Denne funksjonen krever internett",type:1}}},z9HP:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),r=function(){function e(e){var t=this;this.el=e,this.maxRetries=5,this.retries=0,this.resetSrc=function(){t.el.nativeElement.src=t.el.nativeElement.src,t.retries++}}return e.prototype.onError=function(){if(this.retries>=this.maxRetries)return!1;setTimeout(this.resetSrc,1e3)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef))},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e,selectors:[["","appImageErrorReloader",""]],hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("error",(function(){return t.onError()}))},inputs:{maxRetries:"maxRetries"}}),e}()}}]);
//# sourceMappingURL=13.5a0c0af6c8081e32d0d2.js.map
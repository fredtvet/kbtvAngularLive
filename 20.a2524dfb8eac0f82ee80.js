(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{skTp:function(e,t,n){"use strict";n.r(t),n.d(t,"MissionImageListModule",(function(){return J}));var i=n("DUip"),o=n("mrSG"),a=n("VnD/"),r=n("xMyE"),c=n("ny24"),l=n("1YJq"),s=n("1eh6"),p=n("1ua0"),g=n("h/AT"),m=n("TYT/"),d=n("dJ3e"),u=n("9qP0"),f=n("H5r2"),h=function(){function e(e,t,n,i){var o=this;this._missionImageService=e,this._notificationService=t,this._bottomSheetRef=n,this.data=i,this.close=function(e){return o._bottomSheetRef.dismiss(e)},this.mailImages=function(e){return o._missionImageService.mailImages$(e,o.data.ids).subscribe((function(e){o.close(!0),o._notificationService.setNotification("Vellykket! "+o.data.ids.length+" "+(o.data.ids.length>1?"bilder":"bilde")+" sendt")}))}}return e.prototype.ngOnInit=function(){this.navConfig={title:"Send bilder",leftBtn:{icon:"close",callback:this.close}}},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](d.q),m["\u0275\u0275directiveInject"](d.v),m["\u0275\u0275directiveInject"](g.d),m["\u0275\u0275directiveInject"](g.a))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mail-image-sheet"]],decls:2,vars:2,consts:[[3,"config"],[3,"toEmailPreset","formSubmitted"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"app-simple-top-nav",0),m["\u0275\u0275elementStart"](1,"app-mail-to-form",1),m["\u0275\u0275listener"]("formSubmitted",(function(e){return t.mailImages(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275property"]("config",t.navConfig),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("toEmailPreset",t.data.toEmailPreset))},directives:[u.a,f.a],encapsulation:2,changeDetection:0}),e}(),b=n("ea4N"),C=n("2WDa"),v=n("cocx"),x=n("FfOm"),O=n("uLXW"),I=n("p+mS"),_=n("GsDI"),M=n("Valr");function P(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"img",7),m["\u0275\u0275listener"]("tap",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]();return e.toolbarHidden=!e.toolbarHidden}))("swiperight",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().previousImage()}))("swipeleft",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().nextImage()})),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("src",i.currentImage.fileURL,m["\u0275\u0275sanitizeUrl"])}}var w=function(){function e(e){var t=this;this.bottomSheet=e,this.toolbarHidden=!1,this.imageDeleted=new m.EventEmitter,this.currentImageChanged=new m.EventEmitter,this.close=new m.EventEmitter,this.finished=function(){return t.close.emit()},this.openBottomSheet=function(){return t.bottomSheet.open(v.a,{data:t.actions})}}return e.prototype.ngOnInit=function(){var e=this;this.currentImage&&(this.index=this.images.findIndex((function(t){return t.id==e.currentImage.id})))},e.prototype.changeCurrentImage=function(e){this.currentImage=e,this.currentImageChanged.emit(e)},e.prototype.nextImage=function(){if(this.index>=this.images.length-1)return null;this.index++,this.changeCurrentImage(this.images[this.index])},e.prototype.previousImage=function(){if(this.index<=0)return null;this.index--,this.changeCurrentImage(this.images[this.index])},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](g.b))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-image-viewer"]],inputs:{images:"images",currentImage:"currentImage",actions:"actions"},outputs:{imageDeleted:"imageDeleted",currentImageChanged:"currentImageChanged",close:"close"},decls:12,vars:5,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"toolbar-slim","image-toolbar","color-accent"],["imageToolBar",""],["mat-icon-button","","aria-label","Lukk",3,"click"],[1,"scale-150"],["mat-icon-button","",3,"click"],["layout-fill","",3,"src","tap","swiperight","swipeleft",4,"ngIf"],[1,"page_counter"],["layout-fill","",3,"src","tap","swiperight","swipeleft"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"mat-toolbar",0,1),m["\u0275\u0275elementStart"](2,"button",2),m["\u0275\u0275listener"]("click",(function(){return t.finished()})),m["\u0275\u0275elementStart"](3,"mat-icon",3),m["\u0275\u0275text"](4,"chevron_left"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"button",4),m["\u0275\u0275listener"]("click",(function(){return t.openBottomSheet()})),m["\u0275\u0275elementStart"](6,"mat-icon"),m["\u0275\u0275text"](7,"more_vert"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](8,P,1,1,"img",5),m["\u0275\u0275elementStart"](9,"div",6),m["\u0275\u0275elementStart"](10,"h5"),m["\u0275\u0275text"](11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275property"]("@showHideToolbar",t.toolbarHidden?"hide":"show"),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",t.currentImage),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("@showHideCounter",t.toolbarHidden?"hide":"show"),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate2"]("",t.index+1," / ",t.images.length,""))},directives:[x.a,O.c,O.b,I.b,_.a,M.l],styles:[".m-0[_ngcontent-%COMP%]{margin:0}.mt-0[_ngcontent-%COMP%]{margin-top:0}.ml-0[_ngcontent-%COMP%]{margin-left:0}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mb-0[_ngcontent-%COMP%]{margin-bottom:0}.m-1[_ngcontent-%COMP%]{margin:4px}.mt-1[_ngcontent-%COMP%]{margin-top:4px}.ml-1[_ngcontent-%COMP%]{margin-left:4px}.mr-1[_ngcontent-%COMP%]{margin-right:4px}.mb-1[_ngcontent-%COMP%]{margin-bottom:4px}.m-2[_ngcontent-%COMP%]{margin:8px}.mt-2[_ngcontent-%COMP%]{margin-top:8px}.ml-2[_ngcontent-%COMP%]{margin-left:8px}.mr-2[_ngcontent-%COMP%]{margin-right:8px}.mb-2[_ngcontent-%COMP%]{margin-bottom:8px}.m-3[_ngcontent-%COMP%]{margin:12px}.mt-3[_ngcontent-%COMP%]{margin-top:12px}.ml-3[_ngcontent-%COMP%]{margin-left:12px}.mr-3[_ngcontent-%COMP%]{margin-right:12px}.mb-3[_ngcontent-%COMP%]{margin-bottom:12px}.m-4[_ngcontent-%COMP%]{margin:16px}.mt-4[_ngcontent-%COMP%]{margin-top:16px}.ml-4[_ngcontent-%COMP%]{margin-left:16px}.mr-4[_ngcontent-%COMP%]{margin-right:16px}.mb-4[_ngcontent-%COMP%]{margin-bottom:16px}.m-5[_ngcontent-%COMP%]{margin:20px}.mt-5[_ngcontent-%COMP%]{margin-top:20px}.ml-5[_ngcontent-%COMP%]{margin-left:20px}.mr-5[_ngcontent-%COMP%]{margin-right:20px}.mb-5[_ngcontent-%COMP%]{margin-bottom:20px}.m-6[_ngcontent-%COMP%]{margin:24px}.mt-6[_ngcontent-%COMP%]{margin-top:24px}.ml-6[_ngcontent-%COMP%]{margin-left:24px}.mr-6[_ngcontent-%COMP%]{margin-right:24px}.mb-6[_ngcontent-%COMP%]{margin-bottom:24px}.m-auto[_ngcontent-%COMP%]{margin:auto}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.mr-auto[_ngcontent-%COMP%]{margin-right:auto}.mb-auto[_ngcontent-%COMP%]{margin-bottom:auto}.p-0[_ngcontent-%COMP%]{padding:0}.pt-0[_ngcontent-%COMP%]{padding-top:0}.pl-0[_ngcontent-%COMP%]{padding-left:0}.pr-0[_ngcontent-%COMP%]{padding-right:0}.pb-0[_ngcontent-%COMP%]{padding-bottom:0}.p-1[_ngcontent-%COMP%]{padding:4px}.pt-1[_ngcontent-%COMP%]{padding-top:4px}.pl-1[_ngcontent-%COMP%]{padding-left:4px}.pr-1[_ngcontent-%COMP%]{padding-right:4px}.pb-1[_ngcontent-%COMP%]{padding-bottom:4px}.p-2[_ngcontent-%COMP%]{padding:8px}.pt-2[_ngcontent-%COMP%]{padding-top:8px}.pl-2[_ngcontent-%COMP%]{padding-left:8px}.pr-2[_ngcontent-%COMP%]{padding-right:8px}.pb-2[_ngcontent-%COMP%]{padding-bottom:8px}.p-3[_ngcontent-%COMP%]{padding:12px}.pt-3[_ngcontent-%COMP%]{padding-top:12px}.pl-3[_ngcontent-%COMP%]{padding-left:12px}.pr-3[_ngcontent-%COMP%]{padding-right:12px}.pb-3[_ngcontent-%COMP%]{padding-bottom:12px}.p-4[_ngcontent-%COMP%]{padding:16px}.pt-4[_ngcontent-%COMP%]{padding-top:16px}.pl-4[_ngcontent-%COMP%]{padding-left:16px}.pr-4[_ngcontent-%COMP%]{padding-right:16px}.pb-4[_ngcontent-%COMP%]{padding-bottom:16px}.p-5[_ngcontent-%COMP%]{padding:20px}.pt-5[_ngcontent-%COMP%]{padding-top:20px}.pl-5[_ngcontent-%COMP%]{padding-left:20px}.pr-5[_ngcontent-%COMP%]{padding-right:20px}.pb-5[_ngcontent-%COMP%]{padding-bottom:20px}.p-6[_ngcontent-%COMP%]{padding:24px}.pt-6[_ngcontent-%COMP%]{padding-top:24px}.pl-6[_ngcontent-%COMP%]{padding-left:24px}.pr-6[_ngcontent-%COMP%]{padding-right:24px}.pb-6[_ngcontent-%COMP%]{padding-bottom:24px}.p-auto[_ngcontent-%COMP%]{padding:auto}.pt-auto[_ngcontent-%COMP%]{padding-top:auto}.pl-auto[_ngcontent-%COMP%]{padding-left:auto}.pr-auto[_ngcontent-%COMP%]{padding-right:auto}.pb-auto[_ngcontent-%COMP%]{padding-bottom:auto}img[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;transform:translatex(calc(50vw - 50%)) translatey(calc(50vh - 50%))}.top_left_fab[_ngcontent-%COMP%]{position:absolute;left:8px}.top_right_fab[_ngcontent-%COMP%]{position:absolute;right:8px}.image-toolbar[_ngcontent-%COMP%]{position:absolute;left:0;z-index:2;overflow:hidden;background:transparent!important}.page_counter[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:0;text-align:center;color:#fff;opacity:.5}"],data:{animation:[Object(C.p)("showHideToolbar",[Object(C.m)("show",Object(C.n)({top:"0px"})),Object(C.m)("hide",Object(C.n)({top:"-56px"})),Object(C.o)("show => hide",[Object(C.e)(".1s ease-out")]),Object(C.o)("hide => show",[Object(C.e)(".1s ease-in")])]),Object(C.p)("showHideCounter",[Object(C.m)("show",Object(C.n)({bottom:"0px"})),Object(C.m)("hide",Object(C.n)({bottom:"-56px"})),Object(C.o)("show => hide",[Object(C.e)(".1s ease-out")]),Object(C.o)("hide => show",[Object(C.e)(".1s ease-in")])])]},changeDetection:0}),e}(),y=function(){function e(e,t,n,i,o){var r=this;this.dialog=e,this.downloaderService=t,this.missionImageService=n,this.dialogRef=i,this.data=o,this.deleteImage=function(e){return r.missionImageService.delete$(e).subscribe((function(e){return r.dialogRef.close()}))},this.close=function(){return r.dialogRef.close()},this.deleteCurrentImage=function(){return r.missionImageService.delete$(r.data.currentImage.id).subscribe((function(e){return r.dialogRef.close()}))},this.downloadImage=function(){return r.downloaderService.downloadUrl(r.data.currentImage.fileURL)},this.downloadImages=function(){return r.downloaderService.downloadUrls(r.data.images.map((function(e){return e.fileURL})))},this.openConfirmDeleteDialog=function(){r.dialog.open(p.a,{data:"Bekreft at du \xf8nsker \xe5 slette bildet."}).afterClosed().pipe(Object(a.a)((function(e){return e}))).subscribe((function(e){return r.deleteCurrentImage()}))}}return e.prototype.ngOnInit=function(){this.actions=[{text:"Last ned bilde",icon:"cloud_download",callback:this.downloadImage},{text:"Last ned alle",icon:"cloud_download",callback:this.downloadImages},{text:"Slett bilde",icon:"delete",callback:this.openConfirmDeleteDialog,allowedRoles:[l.g.Leder]}]},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](b.b),m["\u0275\u0275directiveInject"](d.j),m["\u0275\u0275directiveInject"](d.q),m["\u0275\u0275directiveInject"](b.e),m["\u0275\u0275directiveInject"](b.a))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-card-dialog-wrapper"]],decls:1,vars:3,consts:[[3,"images","currentImage","actions","imageDeleted","currentImageChanged","close"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"app-image-viewer",0),m["\u0275\u0275listener"]("imageDeleted",(function(e){return t.deleteImage(e)}))("currentImageChanged",(function(e){return t.data.currentImage=e}))("close",(function(){return t.close()})),m["\u0275\u0275elementEnd"]()),2&e&&m["\u0275\u0275property"]("images",t.data.images)("currentImage",t.data.currentImage)("actions",t.actions)},directives:[w],encapsulation:2,changeDetection:0}),e}(),S=n("EFs6"),k=n("GQZI"),j=n("THg6"),E=n("hhBj"),R=n("wehj"),B=function(){function e(){}return e.prototype.transform=function(e){return e.replace(/images/gi,"thumbnails")},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=m["\u0275\u0275definePipe"]({name:"thumbnail",type:e,pure:!0}),e}();function D(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"app-selectable-card",4),m["\u0275\u0275listener"]("selected",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).toggleSelect(e)}))("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).imageClick(e.entity)})),m["\u0275\u0275element"](1,"img",5),m["\u0275\u0275pipe"](2,"thumbnail"),m["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;m["\u0275\u0275property"]("isSelected",i.selected),m["\u0275\u0275advance"](1),m["\u0275\u0275propertyInterpolate"]("src",m["\u0275\u0275pipeBind1"](2,2,i.entity.fileURL),m["\u0275\u0275sanitizeUrl"])}}function V(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",2),m["\u0275\u0275template"](1,D,3,4,"app-selectable-card",3),m["\u0275\u0275pipe"](2,"arrayslice"),m["\u0275\u0275pipe"](3,"async"),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",m["\u0275\u0275pipeBind3"](2,2,m["\u0275\u0275pipeBind1"](3,6,i.selectableEntities$),n,i.totalRows))("ngForTrackBy",i.trackById)}}var N=function(e){function t(t){var n=e.call(this,t)||this;return n.disableImageViewer=!1,n.totalRows=2,n.imageClicked=new m.EventEmitter,n.imageClick=function(e){n.disableImageViewer||n.selectableListPresenter.isEntitySelected(e.id)||n.imageClicked.emit(e)},n}return Object(o.c)(t,e),t.prototype.toggleSelect=function(t){var n=this;this.disableImageViewer=!0,e.prototype.toggleSelect.call(this,t),setTimeout((function(){return n.disableImageViewer=!1}),500)},t.prototype.trackById=function(e,t){return t.entity.id},t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275directiveInject"](p.c))},t.\u0275cmp=m["\u0275\u0275defineComponent"]({type:t,selectors:[["app-image-list"]],inputs:{totalRows:"totalRows"},outputs:{imageClicked:"imageClicked"},features:[m["\u0275\u0275ProvidersFeature"]([p.c]),m["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[[1,"entity-row"],["class","entity-column",4,"ngFor","ngForOf"],[1,"entity-column"],["selectedText","Bilde valgt","selectedIcon","check_circle",3,"isSelected","selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["selectedText","Bilde valgt","selectedIcon","check_circle",3,"isSelected","selected","click"],["appImageErrorReloader","",1,"entity-card","fadeIn",3,"src"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275template"](1,V,4,8,"div",1),m["\u0275\u0275pipe"](2,"arrayFromNumber"),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",m["\u0275\u0275pipeBind1"](2,1,t.totalRows)))},directives:[M.k,k.a,j.a],pipes:[E.a,R.a,M.b,B],encapsulation:2,changeDetection:0}),t}(p.b),$=["imageList"];function L(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"app-image-list",5,6),m["\u0275\u0275listener"]("selectionChanged",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().currentSelections=e}))("imageClicked",(function(e){m["\u0275\u0275restoreView"](n);var i=t.$implicit;return m["\u0275\u0275nextContext"]().openImageViewer(e,i)})),m["\u0275\u0275pipe"](2,"async"),m["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("totalRows",m["\u0275\u0275pipeBind1"](2,2,o.isXs$)?2:4)("entities",i)}}function F(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275elementStart"](1,"button",8),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2);return e.openMailImageSheet(e.currentSelections)})),m["\u0275\u0275elementStart"](2,"mat-icon"),m["\u0275\u0275text"](3,"send"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"button",9),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](2);return e.openConfirmDeleteDialog(e.currentSelections)})),m["\u0275\u0275elementStart"](5,"mat-icon"),m["\u0275\u0275text"](6,"delete_forever"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementContainerEnd"]()}}function T(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,F,7,0,"ng-container",7),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ifRole",n.RolePresets.Authority)}}function H(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",10),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](),m["\u0275\u0275reference"](5).click()})),m["\u0275\u0275elementStart"](1,"mat-icon"),m["\u0275\u0275text"](2,"camera_enhance"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}var U=[{path:"",component:function(e){function t(t,n,i,o,r,c,s,g,m){var d=e.call(this)||this;return d.deviceInfoService=t,d.bottomSheet=n,d.dialog=i,d.notificationService=o,d.mainNavService=r,d.missionImageService=c,d.missionService=s,d.route=g,d.router=m,d.RolePresets=l.f,d.currentSelections=[],d.isXs$=d.deviceInfoService.isXs$,d.uploadImages=function(e){d.missionImageService.addImages$(d.missionId,e).subscribe((function(e){return d.notificationService.setNotification("Vellykket! "+e.length+" "+(e.length>1?"bilder":"bilde")+" lastet opp.")}))},d.deleteImages=function(e){d.missionImageService.deleteRange$(e).subscribe((function(t){d.imageList.clearSelections(),d.notificationService.setNotification("Vellykket! "+e.length+" "+(e.length>1?"bilder":"bilde")+" slettet.")}))},d.openConfirmDeleteDialog=function(e){d.dialog.open(p.a,{data:"Bekreft at du \xf8nsker \xe5 slette utvalgte bilder."}).afterClosed().pipe(Object(a.a)((function(e){return e}))).subscribe((function(t){return d.deleteImages(e)}))},d.openMailImageSheet=function(e){d.bottomSheet.open(h,{data:{toEmailPreset:d.mission.employer?d.mission.employer.email:null,ids:e}}).afterDismissed().pipe(Object(a.a)((function(e){return e}))).subscribe((function(e){return d.imageList.clearSelections()}))},d.updateMainNav=function(e){var t=d.mainNavService.getTopDefaultNavConfig();t.bottomSheetButtons=d.getBottomSheetButtons(e.map((function(e){return e.id}))),d.mainNavService.addTopNavConfig({default:t})},d.onBack=function(e){return d.router.navigate(["/oppdrag",e,"detaljer"])},d.getBottomSheetButtons=function(e){return[{icon:"send",text:"Send alle bilder",callback:d.openMailImageSheet,params:[e],allowedRoles:l.f.Authority}]},d.configureMainNav(d.missionId),d}return Object(o.c)(t,e),Object.defineProperty(t.prototype,"missionId",{get:function(){return+this.route.snapshot.paramMap.get("id")},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.images$=this.missionImageService.getByMissionId$(this.missionId).pipe(Object(r.a)(this.updateMainNav)),this.missionService.getDetails$(this.missionId).pipe(Object(c.a)(this.unsubscribe)).subscribe((function(t){return e.mission=t}))},t.prototype.openImageViewer=function(e,t){this.dialog.open(y,{width:"100%",height:"100%",panelClass:"image_viewer_dialog",data:{currentImage:e,images:t}})},t.prototype.configureMainNav=function(e){this.mainNavService.addTopNavConfig({default:{title:"Bilder",backFn:this.onBack,backFnParams:[e]}})},t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275directiveInject"](d.h),m["\u0275\u0275directiveInject"](g.b),m["\u0275\u0275directiveInject"](b.b),m["\u0275\u0275directiveInject"](d.v),m["\u0275\u0275directiveInject"](d.o),m["\u0275\u0275directiveInject"](d.q),m["\u0275\u0275directiveInject"](d.s),m["\u0275\u0275directiveInject"](i.a),m["\u0275\u0275directiveInject"](i.b))},t.\u0275cmp=m["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-image-list"]],viewQuery:function(e,t){var n;1&e&&m["\u0275\u0275viewQuery"]($,!0),2&e&&m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.imageList=n.first)},features:[m["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:5,consts:[[3,"totalRows","entities","selectionChanged","imageClicked",4,"ngIf"],[4,"ngIf"],["mat-fab","","aria-label","ny","class","action_fab",3,"click",4,"ifRole"],["type","file","multiple","",2,"display","none",3,"change"],["imageInput",""],[3,"totalRows","entities","selectionChanged","imageClicked"],["imageList",""],[4,"ifRole"],["mat-fab","","aria-label","ny",1,"action_fab_2",3,"click"],["mat-fab","","aria-label","ny",1,"action_fab_3","bg-warn",3,"click"],["mat-fab","","aria-label","ny",1,"action_fab",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275template"](0,L,3,4,"app-image-list",0),m["\u0275\u0275pipe"](1,"async"),m["\u0275\u0275template"](2,T,2,1,"ng-container",1),m["\u0275\u0275template"](3,H,3,0,"button",2),m["\u0275\u0275elementStart"](4,"input",3,4),m["\u0275\u0275listener"]("change",(function(e){return t.uploadImages(e.target.files)})),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](1,3,t.images$)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.currentSelections.length>0),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ifRole",t.RolePresets.Internal))},directives:[M.l,S.a,N,I.b,_.a],pipes:[M.b],encapsulation:2,changeDetection:0}),t}(s.a)}],q=function(){function e(){}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(U)],i.f]}),e}(),A=n("PCNd"),J=function(){function e(){}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[A.a,q]]}),e}()}}]);
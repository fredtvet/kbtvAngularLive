(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+Y3i":function(e,t,r){"use strict";r.r(t),r.d(t,"DataManagementModule",(function(){return ne}));var n=r("mrSG"),a=r("3Pt+"),o=r("DEyP"),i=r("9AJY"),c=r("XLlq"),l=r("PCNd"),p=r("9RCi"),d=r("tyNb"),s=r("1YJq"),u=r("itXk"),f=r("lJxs"),m=r("thlL"),y=r("+wwp"),v=r("K+RL"),g=r("m/Bn"),h=r("/uUt"),b=r("eIep"),P=r("NlAt"),w=r("c6Pr"),j="UPDATE_SELECTED_PROPERTY",C={actionId:j,reducerFn:function(e,t){return{selectedProperty:t.selectedProperty}}},S=r("fXoL"),E=r("sYIv"),k=r("lvqV"),D=function(){function e(e,t){var r=this;this.store=e,this.componentStore=t,this.properties=["missions","employers","missionTypes","documentTypes","inboundEmailPasswords"],this.selectedProperty$=this.componentStore.selectProperty$("selectedProperty"),this.dataConfig$=this.selectedProperty$.pipe(Object(h.a)(),Object(b.a)((function(e){return r.getDataConfig$(e)}))),this.updateSelectedProperty=function(e){return r.componentStore.dispatch({actionId:j,selectedProperty:e})},this.update=function(e){return r.store.dispatch(new m.a({stateProp:r.selectedProperty,saveAction:2,formState:e}))},this.delete=function(e){return r.store.dispatch(Object(n.a)(Object(n.a)({},e),{stateProp:r.selectedProperty,actionId:w.a}))}}return Object.defineProperty(e.prototype,"selectedProperty",{get:function(){return this.componentStore.selectProperty("selectedProperty",!1)},enumerable:!1,configurable:!0}),e.prototype.getDataConfig$=function(e){var t=new P.a(e,null,"all");return this.store.select$(t.includedProps).pipe(Object(f.a)((function(t){return{data:t[e],foreigns:t,selectedProp:e}})))},e.\u0275fac=function(t){return new(t||e)(S["\u0275\u0275inject"](E.a),S["\u0275\u0275inject"](k.a))},e.\u0275prov=S["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),O=r("NE9p"),M={submitText:"Legg til",controls:[Object(n.a)(Object(n.a)({},O.i),{required:!0})]},I={submitText:"Legg til",controls:[Object(n.a)(Object(n.a)({},O.i),{required:!0}),O.j,O.d,O.a]},x={submitText:"Legg til",controls:[{name:"password",required:!0,type:"control",questions:[{component:r("hIiN").a,question:{placeholder:"Epostpassord"}}],validators:[a.q.maxLength(250)]}]},T={employers:I,documentTypes:M,missionTypes:{submitText:"Legg til",controls:[Object(n.a)(Object(n.a)({},O.i),{required:!0})]},inboundEmailPasswords:x,missions:r("6veg").a},N=r("M6VK"),L=r("WAJ7"),V=r("ofXK"),F=r("tYFc"),q=r("ci80"),$=r("kmnG"),G=r("XiUz"),R=r("d3UM"),A=r("FKr1"),K=function(){function e(){}return e.prototype.transform=function(e){return y.a[e.toLowerCase()]||e},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=S["\u0275\u0275definePipe"]({name:"translate",type:e,pure:!0}),e}();function B(e,t){if(1&e&&(S["\u0275\u0275elementStart"](0,"mat-option",3),S["\u0275\u0275text"](1),S["\u0275\u0275pipe"](2,"translate"),S["\u0275\u0275elementEnd"]()),2&e){var r=t.$implicit;S["\u0275\u0275propertyInterpolate"]("value",r),S["\u0275\u0275advance"](1),S["\u0275\u0275textInterpolate"](S["\u0275\u0275pipeBind1"](2,2,r))}}var J=function(){function e(){var e=this;this.propertySelected=new S.EventEmitter,this.changeProperty=function(t){return e.propertySelected.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=S["\u0275\u0275defineComponent"]({type:e,selectors:[["app-data-property-picker"]],inputs:{properties:"properties",selectedProperty:"selectedProperty"},outputs:{propertySelected:"propertySelected"},decls:5,vars:2,consts:[["color","accent","fxFlex","",1,"data-picker"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(S["\u0275\u0275elementStart"](0,"mat-form-field",0),S["\u0275\u0275elementStart"](1,"mat-label"),S["\u0275\u0275text"](2,"Velg data"),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementStart"](3,"mat-select",1),S["\u0275\u0275listener"]("ngModelChange",(function(e){return t.changeProperty(e)})),S["\u0275\u0275template"](4,B,3,4,"mat-option",2),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()),2&e&&(S["\u0275\u0275advance"](3),S["\u0275\u0275property"]("ngModel",t.selectedProperty),S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("ngForOf",t.properties))},directives:[$.c,G.a,$.g,R.a,a.k,a.n,V.l,A.i],pipes:[K],styles:[".data-picker{margin:0 24px} .data-picker .mat-form-field-wrapper .mat-form-field-label,  .data-picker .mat-form-field-wrapper .mat-select-value{color:rgba(0,0,0,.87)!important} .data-picker .mat-form-field-wrapper .mat-form-field-underline{background-color:rgba(0,0,0,.87)!important} .data-picker .mat-form-field-wrapper .mat-select-arrow{color:rgba(0,0,0,.87)!important}"],changeDetection:0}),e}(),U=r("cT5K"),Y=r("8Mnh"),Q=r("67B9"),X={updatedAt:!0,createdAt:!0,lastVisited:!0,employer:!0,missionType:!0,fileName:!0},z={id:!0,password:!0},_={finished:!0},H=r("cWTo"),W=function(e){function t(){var t=e.call(this)||this;return t.itemEdited=new S.EventEmitter,t.columnDefs=[],t.rowData=[],t.fkModelIdMap={},t.fkModelDisplayPropMap={},t.editCell=function(e){e.newValue!==e.oldValue&&t.itemEdited.emit(e)},t}return Object(n.b)(t,e),t.prototype.initNgGrid=function(t){var r,a;if(!t)return e.prototype.initNgGrid.call(this,t);var o=U.a.get(t.selectedProp);if(null==o?void 0:o.foreigns)try{for(var i=Object(n.e)(o.foreigns),c=i.next();!c.done;c=i.next()){var l=c.value,p=U.a.get(l),d=t.foreigns[l];d&&(this.fkModelIdMap[p.foreignKey]=Object(Y.a)(d,p.identifier),this.fkModelDisplayPropMap[p.foreignKey]=Object(Y.a)(d,p.displayProp))}}catch(s){r={error:s}}finally{try{c&&!c.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}e.prototype.initNgGrid.call(this,t)},t.prototype.addColDefs=function(e){var t=[{colId:"checkbox",checkboxSelection:!0,width:42,pinned:"left",lockPosition:!0}];for(var r in e){var n=this.addColDef(r);n&&t.push(n)}return t},t.prototype.addColDef=function(e){var t=this;if(X[e])return null;var r={field:e,headerName:y.a[null==e?void 0:e.toLowerCase()]||e,sortable:!0,resizable:!0,editable:!0,lockPosition:!0};_[e]&&(r.cellEditor="agSelectCellEditor",r.cellEditorParams={values:["Ja","Nei"]},r.valueGetter=function(t){return 1==t.data[e]?"Ja":"Nei"},r.valueSetter=function(t){var r=t.newValue.toLowerCase();if("ja"==r)t.data[e]=!0;else{if("nei"!=r)return!1;t.data[e]=!1}return!0}),z[e]&&(r.editable=!1);var n=U.a.getBy(e,"foreignKey");if(n){var a=e;r.cellEditor="agSelectCellEditor",r.cellEditorParams={values:Object.keys(this.fkModelDisplayPropMap[a]||{})},r.valueGetter=function(e){var r=e.data[a];if(r){var o=t.fkModelIdMap[a][r];return o?o[n.displayProp||n.identifier]:null}return""},r.valueSetter=function(e){var r=t.fkModelDisplayPropMap[a][e.newValue];return!!r&&(e.data[a]=r[n.identifier],!0)}}return r},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=S["\u0275\u0275defineComponent"]({type:t,selectors:[["app-data-table"]],outputs:{itemEdited:"itemEdited"},features:[S["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[["fxFlex","","rowSelection","multiple","suppressRowClickSelection","true","suppressColumnVirtualisation","true","overlayNoRowsTemplate","Tomt",1,"ag-theme-balham",3,"rowData","columnDefs","modelUpdated","cellValueChanged"],["dataGrid",""]],template:function(e,t){1&e&&(S["\u0275\u0275elementStart"](0,"ag-grid-angular",0,1),S["\u0275\u0275listener"]("modelUpdated",(function(){return t.autoSizeGrid()}))("cellValueChanged",(function(e){return t.editCell(e)})),S["\u0275\u0275elementEnd"]()),2&e&&S["\u0275\u0275property"]("rowData",t.rowData)("columnDefs",t.columnDefs)},directives:[H.a,G.a],encapsulation:2,changeDetection:0}),t}(Q.a),Z=["dataTable"];function ee(e,t){if(1&e){var r=S["\u0275\u0275getCurrentView"]();S["\u0275\u0275elementStart"](0,"app-main-skeleton",1),S["\u0275\u0275elementContainerStart"](1,2),S["\u0275\u0275element"](2,"app-main-top-nav-bar",3),S["\u0275\u0275elementStart"](3,"app-data-property-picker",4),S["\u0275\u0275listener"]("propertySelected",(function(e){return S["\u0275\u0275restoreView"](r),S["\u0275\u0275nextContext"]().updateSelectedProperty(e)})),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementContainerEnd"](),S["\u0275\u0275elementStart"](4,"app-data-table",5,6),S["\u0275\u0275listener"]("itemEdited",(function(e){return S["\u0275\u0275restoreView"](r),S["\u0275\u0275nextContext"]().updateItem(e)})),S["\u0275\u0275elementEnd"](),S["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit,a=S["\u0275\u0275nextContext"]();S["\u0275\u0275advance"](2),S["\u0275\u0275property"]("config",n.navConfig),S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("properties",a.properties)("selectedProperty",n.selectedProp),S["\u0275\u0275advance"](1),S["\u0275\u0275property"]("config",n)}}var te=[{path:"",component:function(){function e(e,t,r){var a=this;this.facade=e,this.confirmService=t,this.formService=r,this.vm$=Object(u.a)([this.facade.dataConfig$,this.facade.selectedProperty$.pipe(Object(f.a)((function(e){return a.getNavConfig(e)})))]).pipe(Object(f.a)((function(e){var t=Object(n.c)(e,2),r=t[0],a=t[1];return Object(n.a)(Object(n.a)({},r),{navConfig:a})}))),this.properties=this.facade.properties,this.updateSelectedProperty=function(e){return a.facade.updateSelectedProperty(e)},this.openDeleteDialog=function(){var e,t=a.dataTable.dataGrid.api.getSelectedNodes();if(0!=(null==t?void 0:t.length)){var r=null===(e=y.a[a.facade.selectedProperty.toLowerCase()])||void 0===e?void 0:e.toLowerCase();a.confirmService.open({title:"Slett "+(t.length>1?"ressurser":"ressurs")+"?",message:"Bekreft at du \xf8nsker \xe5 slette "+t.length+" "+r,confirmText:"Slett",confirmCallback:function(){return a.deleteItems(t.map((function(e){return e.data.id})))}})}},this.openCreateForm=function(){a.formService.open({formConfig:{stateProp:a.facade.selectedProperty,adapter:m.a,dynamicForm:T[a.facade.selectedProperty]}})}}return e.prototype.updateItem=function(e){e&&null!==e&&this.facade.update(e.data)},e.prototype.deleteItems=function(e){if(0==(null==e?void 0:e.length))return!1;this.facade.delete({ids:e})},e.prototype.getNavConfig=function(e){return{title:"Data",buttons:e?[{icon:"add",callback:this.openCreateForm},{icon:"delete_forever",callback:this.openDeleteDialog}]:null}},e.\u0275fac=function(t){return new(t||e)(S["\u0275\u0275directiveInject"](D),S["\u0275\u0275directiveInject"](N.a),S["\u0275\u0275directiveInject"](L.ModelFormService))},e.\u0275cmp=S["\u0275\u0275defineComponent"]({type:e,selectors:[["app-data-manager"]],viewQuery:function(e,t){var r;1&e&&S["\u0275\u0275viewQuery"](Z,!0),2&e&&S["\u0275\u0275queryRefresh"](r=S["\u0275\u0275loadQuery"]())&&(t.dataTable=r.first)},features:[S["\u0275\u0275ProvidersFeature"](Object(n.d)([D],g.a,[{provide:v.c,useValue:C,multi:!0}]))],decls:3,vars:3,consts:[["disableElevation","true",4,"ngIf"],["disableElevation","true"],["navbar",""],[3,"config"],[3,"properties","selectedProperty","propertySelected"],[1,"h-100",3,"config","itemEdited"],["dataTable",""]],template:function(e,t){1&e&&(S["\u0275\u0275template"](0,ee,6,4,"app-main-skeleton",0),S["\u0275\u0275pipe"](1,"async"),S["\u0275\u0275element"](2,"router-outlet")),2&e&&S["\u0275\u0275property"]("ngIf",S["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[V.m,d.g,F.a,q.a,J,W],pipes:[V.b],encapsulation:2,changeDetection:0}),e}(),data:{allowedRoles:s.RolePresets.Authority}}],re=function(){function e(){}return e.\u0275mod=S["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=S["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[d.f.forChild(te)],d.f]}),e}(),ne=function(){function e(){}return e.\u0275mod=S["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=S["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:Object(n.d)(i.d,i.a),imports:[[l.a,a.g,p.a,c.a,re,o.a]]}),e}()},lvqV:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("mrSG"),a=r("K+RL"),o=r("yQfo"),i=r("ojMU"),c=r("fXoL"),l=r("sYIv"),p=r("BMAU"),d=r("uQHu"),s=function(e){function t(t,r,n,a,i){return e.call(this,new o.a(i),t,r,n,a)||this}return Object(n.b)(t,e),t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275inject"](l.a,12),c["\u0275\u0275inject"](p.a),c["\u0275\u0275inject"](d.a,2),c["\u0275\u0275inject"](a.c,10),c["\u0275\u0275inject"](a.a,10))},t.\u0275prov=c["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(i.a)},"m/Bn":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("uQHu"),a=r("lvqV"),o=[n.a,a.a]}}]);
//# sourceMappingURL=19.8b9fb19552016a717a19.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{QOq0:function(e,t,n){"use strict";n.r(t),n.d(t,"TimesheetAdminModule",(function(){return ne}));var i=n("DUip"),r=n("dJ3e"),a=n("k5Aa"),c=n("mrSG"),o=n("NeHM"),s=n("VnD/"),l=n("ny24"),u=n("67Y/"),p=n("dzgT"),m=n("6tST"),d=n("1eh6"),f=n("TYT/"),v=n("h/AT"),h=n("Valr"),g=n("uLXW"),w=n("pdUi"),y=n("2WDa"),b=n("MqYC"),k=n("qaSM"),x=n("GsDI"),S=["*"],I=function(){function e(e){var t=this;this.deviceInfoService=e,this.isSwipeActionHidden=!0,this.isXs$=this.deviceInfoService.isXs$,this.handleSwipeBtnClick=function(e,n,i){void 0===i&&(i=[]),e.preventDefault(),t.swipeEnabled&&(i&&0!=i.length||(i=t.swipeButton.params),t.isSwipeActionHidden=!0,t.handleFn(n,i))},this.handleNavClick=function(e,n){void 0===n&&(n=[]),e&&(n&&0!=n.length||(n=t.navButton.params),t.handleFn(e,n))}}return e.prototype.hideSwipeAction=function(e,t){this.swipeEnabled&&(this.isSwipeActionHidden=t)},e.prototype.handleFn=function(e,t){t?e.apply(void 0,Object(c.d)(t)):e()},e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](r.h))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-swipe-card"]],inputs:{swipeButton:"swipeButton",navButton:"navButton",swipeEnabled:"swipeEnabled"},ngContentSelectors:S,decls:7,vars:6,consts:[["fxLayout","row","fxLayoutAlign","start stretch",1,"app-card","mat-elevation-z2","m-1"],["fxLayout","column","fxLayoutAlign","center center","matRipple","",2,"position","relative","width","86px!important",3,"ngClass","press"],[1,"scale-125"],["fxFlex","","matRipple","",1,"bg-foreground",2,"position","relative","z-index","1!important",3,"matRippleDisabled","click","swiperight","swipeleft"]],template:function(e,t){1&e&&(f["\u0275\u0275projectionDef"](),f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"div",1),f["\u0275\u0275listener"]("press",(function(e){return t.handleSwipeBtnClick(e,t.swipeButton.callback)})),f["\u0275\u0275elementStart"](2,"mat-icon",2),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",3),f["\u0275\u0275listener"]("click",(function(){return t.handleNavClick(null==t.navButton?null:t.navButton.callback)}))("swiperight",(function(e){return t.hideSwipeAction(e,!1)}))("swipeleft",(function(e){return t.hideSwipeAction(e,!0)})),f["\u0275\u0275pipe"](5,"async"),f["\u0275\u0275projection"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngClass",t.swipeButton.colorClass),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](t.swipeButton.icon),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("matRippleDisabled",!t.navButton)("@showHideConfirm",f["\u0275\u0275pipeBind1"](5,4,t.isXs$)&&t.isSwipeActionHidden?"hide":"show"))},directives:[g.c,g.b,b.n,h.j,k.a,x.a,g.a],pipes:[h.b],encapsulation:2,data:{animation:[Object(y.p)("showHideConfirm",[Object(y.m)("show",Object(y.n)({marginLeft:"0px"})),Object(y.m)("hide",Object(y.n)({marginLeft:"-81px"})),Object(y.o)("show => hide",[Object(y.e)(".1s ease-out")]),Object(y.o)("hide => show",[Object(y.e)(".1s ease-in")]),Object(y.o)("void => *",Object(y.e)(0))])]},changeDetection:0}),e}(),C=n("yMcq"),O=n("kxXi"),T=n("uad8"),j=["weekList"],B=["timesheetList"],F=function(e){return{$implicit:e}};function E(e,t){if(1&e&&f["\u0275\u0275elementContainer"](0,5),2&e){var n=t.$implicit;f["\u0275\u0275nextContext"]();var i=f["\u0275\u0275reference"](3);f["\u0275\u0275property"]("ngTemplateOutlet",n.view||i)("ngTemplateOutletContext",f["\u0275\u0275pureFunction1"](2,F,n.context))}}var N=function(e,t){return{callback:e,params:t}},L=function(e){return[e]},$=function(e,t,n,i){return{callback:e,params:t,icon:n,colorClass:i}};function A(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"app-swipe-card",10),f["\u0275\u0275element"](1,"app-timesheet-summary-card-content",11),f["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("navButton",f["\u0275\u0275pureFunction2"](4,N,i.selectWeek,n.week))("swipeEnabled",n.openHours>0)("swipeButton",f["\u0275\u0275pureFunction4"](9,$,i.confirmTimesheets,f["\u0275\u0275pureFunction1"](7,L,n.timesheets),n.openHours>0?"lock_open":"lock",n.openHours>0?"bg-warn":"bg-success")),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("summary",n)}}function V(e,t){if(1&e&&f["\u0275\u0275elementContainer"](0,12),2&e){f["\u0275\u0275nextContext"](2);var n=f["\u0275\u0275reference"](7);f["\u0275\u0275property"]("ngTemplateOutlet",n)}}function R(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",6),f["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",7),f["\u0275\u0275template"](2,A,2,14,"app-swipe-card",8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](3,V,1,1,"ng-container",9)),2&e){var n=t.$implicit,i=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("cdkVirtualForOf",n)("cdkVirtualForTrackBy",i.trackByWeek)("cdkVirtualForTemplateCacheSize",0),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",0==n.length)}}function W(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",16),f["\u0275\u0275elementStart"](1,"app-timesheet-card",17),f["\u0275\u0275listener"]("statusChanged",(function(e){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"](2).changeTimesheetStatus(e.id,e.status)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("timesheet",i)}}function D(e,t){if(1&e&&f["\u0275\u0275elementContainer"](0,12),2&e){f["\u0275\u0275nextContext"](2);var n=f["\u0275\u0275reference"](7);f["\u0275\u0275property"]("ngTemplateOutlet",n)}}function U(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",13),f["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",14),f["\u0275\u0275template"](2,W,2,1,"div",15),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](3,D,1,1,"ng-container",9)),2&e){var n=t.$implicit,i=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("cdkVirtualForOf",n)("cdkVirtualForTrackBy",i.trackById),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",0==n.length)}}function Y(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",18),f["\u0275\u0275text"](1,"Fant ingen timer!"),f["\u0275\u0275elementEnd"]())}function q(e,t){1&e&&f["\u0275\u0275element"](0,"mat-spinner",20)}function H(e,t){if(1&e&&(f["\u0275\u0275template"](0,q,1,0,"mat-spinner",19),f["\u0275\u0275pipe"](1,"async")),2&e){var n=f["\u0275\u0275nextContext"](),i=f["\u0275\u0275reference"](7);f["\u0275\u0275property"]("ngIf",f["\u0275\u0275pipeBind1"](1,2,n.loading$))("ngIfElse",i)}}var P=function(e){function t(t,n,i,r,c,l,u){var p=e.call(this)||this;return p.loadingService=t,p.timesheetService=n,p.mainNavService=i,p.route=r,p.router=c,p.dateTimeService=l,p._bottomSheet=u,p.loading$=p.loadingService.queryLoading$,p.updateUri=function(e,t){p.router.navigate(e||t?["timeadministrering",t||p.selectedUserName,e||p.selectedYear]:["timeadministrering"])},p.selectWeek=function(e){return p.router.navigate([],{relativeTo:p.route,queryParams:{week:e},queryParamsHandling:"merge"})},p.changeTimesheetStatus=function(e,t){p.timesheetService.changeStatus$(e,t).subscribe()},p.confirmTimesheets=function(e){if(e){var t=e.reduce((function(e,t){return 0==t.status&&e.push(t.id),e}),[]);0!=t.length&&p.timesheetService.changeStatuses$(t,a.g.Confirmed).subscribe()}},p.loadWeekSummaries=function(e,t){var n=new Date;n.setFullYear(e),p.timesheetService.addFilter({dateRange:p.dateTimeService.getYearRange(n),userName:t})},p.openWeekFilter=function(){p._bottomSheet.open(o.a,{data:{year:p.selectedYear,userName:p.selectedUserName}}).afterDismissed().pipe(Object(s.a)((function(e){return null!=e}))).subscribe((function(e){return p.updateUri(e.year,e.userName)}))},p.trackByWeek=function(e,t){return t.week},p.trackById=function(e,t){return t.id},p.timesheetService.addGroupBy(a.b.Week),p.configureWeekListNav(),p.initalizeObservable(),p}return Object(c.b)(t,e),Object.defineProperty(t.prototype,"selectedYear",{get:function(){return+this.route.snapshot.params.year},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedUserName",{get:function(){return this.route.snapshot.params.userName},enumerable:!0,configurable:!0}),t.prototype.initalizeObservable=function(){var e=this;this.route.params.pipe(Object(l.a)(this.unsubscribe)).subscribe((function(t){return e.loadWeekSummaries(t.year,t.userName)})),this.activeView$=Object(p.a)(this.timesheetService.timesheetSummaries$,this.route.queryParams).pipe(Object(s.a)((function(e){var t=Object(c.c)(e,2)[0];return t&&t.length>0})),Object(u.a)((function(t){var n=Object(c.c)(t,2),i=n[0],r=n[1],a={view:null,context:null};return r.week?(a.context=i.find((function(e){return e.week==r.week})).timesheets,a.view=e.timesheetList,e.configureTimesheetListNav(r.week)):(a.context=i.sort((function(e,t){return t.week-e.week})),a.view=e.weekList,e.configureWeekListNav()),a})))},t.prototype.configureWeekListNav=function(){this.mainNavService.addTopNavConfig({default:{title:"Uker",subTitle:this.selectedYear+" - "+this.selectedUserName,backFn:this.updateUri,buttons:[{icon:"filter_list",colorClass:"color-accent",callback:this.openWeekFilter}]}})},t.prototype.configureTimesheetListNav=function(e){this.mainNavService.addTopNavConfig({default:{title:"Uke "+e,subTitle:this.selectedYear+" - "+this.selectedUserName,backFn:this.selectWeek,backFnParams:[null],buttons:[{icon:"filter_list",colorClass:"color-accent",callback:this.openWeekFilter}]}})},t.\u0275fac=function(e){return new(e||t)(f["\u0275\u0275directiveInject"](r.n),f["\u0275\u0275directiveInject"](r.y),f["\u0275\u0275directiveInject"](r.o),f["\u0275\u0275directiveInject"](i.a),f["\u0275\u0275directiveInject"](i.b),f["\u0275\u0275directiveInject"](r.g),f["\u0275\u0275directiveInject"](v.b))},t.\u0275cmp=f["\u0275\u0275defineComponent"]({type:t,selectors:[["app-timesheet-admin-list"]],viewQuery:function(e,t){var n;1&e&&(f["\u0275\u0275viewQuery"](j,!0),f["\u0275\u0275viewQuery"](B,!0)),2&e&&(f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.weekList=n.first),f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.timesheetList=n.first))},features:[f["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:4,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["weekList",""],["timesheetList",""],["noContent",""],["loading",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","fadeInRight","max-width"],["itemSize","82","maxBufferPx","800","minBufferPx","800","fxFlex",""],[3,"navButton","swipeEnabled","swipeButton",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"navButton","swipeEnabled","swipeButton"],[3,"summary"],[3,"ngTemplateOutlet"],["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","fadeInRight"],["itemSize","108","maxBufferPx","800","minBufferPx","800","fxFlex",""],["class","m-1",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"m-1"],["adminView","true",3,"timesheet","statusChanged"],[1,"w-100","text-center","mt-2","mat-h3"],["class","center-spinner","color","accent",4,"ngIf","ngIfElse"],["color","accent",1,"center-spinner"]],template:function(e,t){if(1&e&&(f["\u0275\u0275template"](0,E,1,4,"ng-container",0),f["\u0275\u0275pipe"](1,"async"),f["\u0275\u0275template"](2,R,4,4,"ng-template",null,1,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275template"](4,U,4,3,"ng-template",null,2,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275template"](6,Y,2,0,"ng-template",null,3,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275template"](8,H,2,4,"ng-template",null,4,f["\u0275\u0275templateRefExtractor"])),2&e){var n=f["\u0275\u0275reference"](9);f["\u0275\u0275property"]("ngIf",f["\u0275\u0275pipeBind1"](1,2,t.activeView$))("ngIfElse",n)}},directives:[h.l,h.q,g.c,g.b,w.e,w.a,g.a,w.d,I,C.a,O.a,T.b],pipes:[h.b],encapsulation:2,data:{animation:[m.a]},changeDetection:0}),t}(d.a),z=n("XehU"),M=function(e,t){return["/timeadministrering",e,t]};function _(e,t){if(1&e&&f["\u0275\u0275element"](0,"app-list-card",6),2&e){var n=t.$implicit,i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("text",n.firstName+" "+n.lastName)("routerLink",f["\u0275\u0275pureFunction2"](2,M,n.userName,i.thisYear))}}function Q(e,t){if(1&e&&f["\u0275\u0275elementContainer"](0,7),2&e){f["\u0275\u0275nextContext"](2);var n=f["\u0275\u0275reference"](3);f["\u0275\u0275property"]("ngTemplateOutlet",n)}}function X(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",3),f["\u0275\u0275template"](1,_,1,5,"app-list-card",4),f["\u0275\u0275template"](2,Q,1,1,"ng-container",5),f["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",n),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",0==n.length)}}function G(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",8),f["\u0275\u0275text"](1,"Fant ingen ansatte!"),f["\u0275\u0275elementEnd"]())}function J(e,t){1&e&&f["\u0275\u0275element"](0,"mat-spinner",10)}function K(e,t){if(1&e&&(f["\u0275\u0275template"](0,J,1,0,"mat-spinner",9),f["\u0275\u0275pipe"](1,"async")),2&e){var n=f["\u0275\u0275nextContext"](),i=f["\u0275\u0275reference"](3);f["\u0275\u0275property"]("ngIf",f["\u0275\u0275pipeBind1"](1,2,n.loading$))("ngIfElse",i)}}var Z=[{path:"",component:function(){function e(e,t,n){this.loadingService=e,this.mainNavService=t,this.userService=n,this.users$=this.userService.getAll$(),this.thisYear=(new Date).getFullYear(),this.loading$=this.loadingService.queryLoading$,this.configureMainNav()}return e.prototype.ngOnInit=function(){},e.prototype.configureMainNav=function(){this.mainNavService.addTopNavConfig({default:{title:"Administrer timer"}})},e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](r.n),f["\u0275\u0275directiveInject"](r.o),f["\u0275\u0275directiveInject"](r.A))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-admin-user-list"]],decls:6,vars:4,consts:[["class","p-2 max-width",4,"ngIf","ngIfElse"],["noUsers",""],["loading",""],[1,"p-2","max-width"],["startIcon","person","endIcon","chevron_right",3,"text","routerLink",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet",4,"ngIf"],["startIcon","person","endIcon","chevron_right",3,"text","routerLink"],[3,"ngTemplateOutlet"],[1,"w-100","text-center","mt-2","mat-h3"],["class","center-spinner","color","accent",4,"ngIf","ngIfElse"],["color","accent",1,"center-spinner"]],template:function(e,t){if(1&e&&(f["\u0275\u0275template"](0,X,3,2,"div",0),f["\u0275\u0275pipe"](1,"async"),f["\u0275\u0275template"](2,G,2,0,"ng-template",null,1,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275template"](4,K,2,4,"ng-template",null,2,f["\u0275\u0275templateRefExtractor"])),2&e){var n=f["\u0275\u0275reference"](5);f["\u0275\u0275property"]("ngIf",f["\u0275\u0275pipeBind1"](1,2,t.users$))("ngIfElse",n)}},directives:[h.l,h.k,z.a,i.c,h.q,T.b],pipes:[h.b],encapsulation:2,changeDetection:0}),e}(),canActivate:[r.d],data:{allowedRoles:[a.f.Leder],animation:"TimesheetAdminUserList"}},{path:":userName/:year",component:P,canActivate:[r.d],data:{allowedRoles:[a.f.Leder],animation:"TimesheetAdminList"}}],ee=function(){function e(){}return e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(Z)],i.f]}),e}(),te=n("OYkh"),ne=function(){function e(){}return e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[te.a,ee]]}),e}()}}]);
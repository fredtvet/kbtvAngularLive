(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{p2ue:function(t,e,n){"use strict";n.r(e),n.d(e,"MissionNoteFormModule",(function(){return N}));var i=n("DUip"),o=n("h/AT"),r=n("TYT/"),s=n("9tSM"),a=n("dJ3e"),c=n("QJY3"),m=n("k5Aa"),d=n("Valr"),u=n("uLXW"),l=n("eHTH"),p=n("cSbt"),f=n("hc/R"),h=n("DjAo"),v=n("p+mS"),b=n("Up+3");function g(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1," Tittel er p\xe5 maks 40 tegn. "),r["\u0275\u0275elementEnd"]())}function y(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1," Innhold er ett obligatorisk felt p\xe5 maks 400 tegn. "),r["\u0275\u0275elementEnd"]())}function I(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"form",1),r["\u0275\u0275elementStart"](1,"mat-form-field"),r["\u0275\u0275element"](2,"input",2,3),r["\u0275\u0275template"](4,g,2,0,"mat-error",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"mat-form-field"),r["\u0275\u0275elementStart"](6,"textarea",5,6),r["\u0275\u0275text"](9,"        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"mat-hint"),r["\u0275\u0275text"](11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](12,y,2,0,"mat-error",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"br"),r["\u0275\u0275elementStart"](14,"mat-checkbox",7),r["\u0275\u0275text"](15,"Viktig?"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"br"),r["\u0275\u0275elementStart"](17,"button",8),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onSubmit()})),r["\u0275\u0275text"](18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){var i=r["\u0275\u0275reference"](3),o=r["\u0275\u0275reference"](8),s=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("formGroup",s.noteForm),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",i.invalid),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate1"]("",o.value.length," / 400 tegn"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",o.invalid),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("disabled",s.noteForm.invalid||s.noteForm.pristine),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",s.isCreateForm?"Legg til":"Oppdater"," ")}}var S=function(){function t(t){this._formBuilder=t,this.Roles=m.f,this.note=null,this.missionId=null,this.formSubmitted=new r.EventEmitter,this.isCreateForm=!1}return t.prototype.ngOnInit=function(){this.note&&null!=this.note||(this.isCreateForm=!0),this.initalizeForm(this.note)},t.prototype.initalizeForm=function(t){this.noteForm=this._formBuilder.group({id:t?t.id:null,title:[t?t.title:null,[c.s.maxLength(40)]],content:[t?t.content:null,[c.s.required,c.s.maxLength(400)]],pinned:t?t.pinned:null,missionId:this.missionId})},t.prototype.onSubmit=function(){var t=this.noteForm;t.valid&&this.noteForm.dirty&&this.formSubmitted.emit(t.value)},Object.defineProperty(t.prototype,"title",{get:function(){return this.noteForm.get("title")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.noteForm.get("content")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pinned",{get:function(){return this.noteForm.get("pinned")},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](c.c))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-note-form-view"]],inputs:{note:"note",missionId:"missionId"},outputs:{formSubmitted:"formSubmitted"},decls:1,vars:1,consts:[["fxLayout","column",3,"formGroup",4,"ngIf"],["fxLayout","column",3,"formGroup"],["matInput","","placeholder","Tittel","formControlName","title"],["title",""],[4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","4","placeholder","Innhold","formControlName","content","required",""],["autosize","cdkTextareaAutosize","content",""],["formControlName","pinned"],["appHttpCommandButton","","mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"]],template:function(t,e){1&t&&r["\u0275\u0275template"](0,I,19,6,"form",0),2&t&&r["\u0275\u0275property"]("ngIf",e.noteForm)},directives:[d.l,c.t,c.m,u.c,c.e,l.c,p.a,c.b,c.l,c.d,f.b,c.r,l.f,h.a,v.b,b.a,l.b],encapsulation:2,changeDetection:0}),t}(),w=function(){function t(t,e){this.missionNoteService=t,this.notificationService=e,this.finished=new r.EventEmitter,this.isCreateForm=!1}return t.prototype.ngOnInit=function(){this.idPreset?this.note$=this.missionNoteService.get$(this.idPreset):this.isCreateForm=!0},t.prototype.onSubmit=function(t){t?this.isCreateForm?this.createNote(t):this.editNote(t):this.finished.emit()},t.prototype.createNote=function(t){var e=this;t&&this.missionNoteService.add$(t).subscribe((function(t){e.notificationService.setNotification("Vellykket! Notat opprettet."),e.finished.emit(t)}))},t.prototype.editNote=function(t){var e=this;t&&this.missionNoteService.update$(t).subscribe((function(t){e.notificationService.setNotification("Vellykket oppdatering!"),e.finished.emit(t)}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](a.r),r["\u0275\u0275directiveInject"](a.v))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-note-form"]],inputs:{idPreset:"idPreset",missionId:"missionId"},outputs:{finished:"finished"},decls:2,vars:4,consts:[[3,"note","missionId","formSubmitted"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"app-mission-note-form-view",0),r["\u0275\u0275listener"]("formSubmitted",(function(t){return e.onSubmit(t)})),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275property"]("note",r["\u0275\u0275pipeBind1"](1,2,e.note$))("missionId",e.missionId)},directives:[S],pipes:[d.b],encapsulation:2,changeDetection:0}),t}(),C=function(){function t(t,e){var n=this;this._bottomSheetRef=t,this.data=e,this.close=function(){return n._bottomSheetRef.dismiss()}}return t.prototype.ngOnInit=function(){this.navConfig={title:this.data&&this.data.idPreset?"Rediger notat":"Registrer notat",leftBtn:{icon:"close",callback:this.close}}},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](o.d),r["\u0275\u0275directiveInject"](o.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-note-form-sheet-wrapper"]],decls:2,vars:3,consts:[[3,"config"],[3,"idPreset","missionId","finished"]],template:function(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"app-simple-top-nav",0),r["\u0275\u0275elementStart"](1,"app-mission-note-form",1),r["\u0275\u0275listener"]("finished",(function(){return e.close()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&(r["\u0275\u0275property"]("config",e.navConfig),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("idPreset",null==e.data?null:e.data.idPreset)("missionId",null==e.data?null:e.data.missionId))},directives:[s.a,w],encapsulation:2,changeDetection:0}),t}(),x=[{path:"",component:function(){function t(t,e,n){var i=this;this.bottomSheet=t,this.route=e,this.location=n,this.openDialog=function(t){i.bottomSheet.open(C,{data:t}).afterDismissed().subscribe((function(t){return i.location.back()}))},this.openDialog({idPreset:+this.route.snapshot.queryParams.idPreset,missionId:+this.route.snapshot.queryParams.missionId})}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](o.b),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](d.h))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t}()}],k=function(){function t(){}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[i.f.forChild(x)],i.f]}),t}(),F=n("PCNd"),N=function(){function t(){}return t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[k,F.a]]}),t}()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{QoWm:function(e,t,n){"use strict";n.r(t),n.d(t,"MissionNoteListModule",(function(){return T}));var o=n("PCNd"),i=n("tyNb"),r=n("mrSG"),a=n("lJxs"),c=n("1YJq"),s=n("1a0Z"),l=n("eTJq"),d=n("3Pt+"),p=n("hIiN"),u=n("0ScG"),m=n("NE9p"),f=n("Rild"),v={submitText:"Legg til",controls:[{name:"title",type:"control",valueGetter:function(e){return null==e?void 0:e.title},questions:[{component:p.a,question:{placeholder:"Tittel"}}],validators:[d.q.maxLength(f.a.MissionNoteTitleMaxLength)]},{name:"content",required:!0,type:"control",valueGetter:function(e){return null==e?void 0:e.content},questions:[{component:u.a,question:{placeholder:"Beskrivelse",minRows:4}}],validators:[d.q.maxLength(f.a.MissionNoteContentMaxLength)]},m.f]},y={submitText:"Oppdater",controls:Object(r.d)(v.controls,[m.e])},h=n("fXoL"),g=n("O/YV"),b=n("sYIv"),x=function(){function e(e){var t=this;this.store=e,this.getByMissionId$=function(e){return t.store.selectProperty$("missionNotes").pipe(Object(a.a)((function(t){return Object(g.a)(t,(function(t){return t.missionId===e}))})))}}return e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275inject"](b.a))},e.\u0275prov=h["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),C=n("WAJ7"),k=n("tYFc"),I=n("ci80"),w=n("ofXK"),N=n("Wp6s"),E=n("XiUz"),j=n("EFs6"),F=n("bTqV"),S=n("NFeN");function L(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"mat-card-header"),h["\u0275\u0275elementStart"](1,"mat-card-title"),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate"](n.note.title)}}function M(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"button",6),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"](2).editNote()})),h["\u0275\u0275elementStart"](1,"mat-icon"),h["\u0275\u0275text"](2,"edit"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function B(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"mat-card",1),h["\u0275\u0275template"](1,L,3,1,"mat-card-header",2),h["\u0275\u0275elementStart"](2,"mat-card-content"),h["\u0275\u0275elementStart"](3,"p"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"div",3),h["\u0275\u0275elementStart"](6,"span",4),h["\u0275\u0275text"](7),h["\u0275\u0275pipe"](8,"date"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](9,M,3,0,"button",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",n.note.title),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate"](n.note.content),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate2"](" ",h["\u0275\u0275pipeBind2"](8,5,n.note.updatedAt,"dd.MMM yyyy")," ",n.note.createdBy?"av "+n.note.createdBy:""," "),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ifRole",n.RolePresets.Authority)}}var O=function(){function e(){var e=this;this.RolePresets=c.RolePresets,this.deleteClicked=new h.EventEmitter,this.editClicked=new h.EventEmitter,this.deleteNote=function(){return e.deleteClicked.emit(e.note.id)},this.editNote=function(){return e.editClicked.emit(e.note.id)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["app-note-card"]],inputs:{note:"note"},outputs:{deleteClicked:"deleteClicked",editClicked:"editClicked"},decls:1,vars:1,consts:[["fxLayout","column","fxLayoutAlign","space-between start","fxLayoutGap","5px","class","m-1",4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-between start","fxLayoutGap","5px",1,"m-1"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],[1,"mat-caption"],["mat-icon-button","","color","accent","aria-label","Rediger notat",3,"click",4,"ifRole"],["mat-icon-button","","color","accent","aria-label","Rediger notat",3,"click"]],template:function(e,t){1&e&&h["\u0275\u0275template"](0,B,10,8,"mat-card",0),2&e&&h["\u0275\u0275property"]("ngIf",t.note)},directives:[w.m,N.a,E.c,E.b,E.d,N.c,j.a,N.d,N.f,F.b,S.a],pipes:[w.e],encapsulation:2,changeDetection:0}),e}();function R(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"app-note-card",4),h["\u0275\u0275listener"]("editClicked",(function(e){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().openEditNoteForm(e)})),h["\u0275\u0275elementEnd"]()}2&e&&h["\u0275\u0275property"]("note",t.$implicit)}var q=[{path:"",component:function(){function e(e,t,n,o){var i=this;this.facade=e,this.route=t,this.router=n,this.modelFormService=o,this.notes$=this.facade.getByMissionId$(this.missionId).pipe(Object(a.a)((function(e){return Object(s.a)(e,"updatedAt")}))),this.openEditNoteForm=function(e){return i.modelFormService.open({formConfig:{dynamicForm:y,stateProp:"missionNotes",entityId:e}})},this.trackByNote=Object(l.a)("missionNotes"),this.openCreateNoteForm=function(){return i.modelFormService.open({formConfig:{dynamicForm:Object(r.a)(Object(r.a)({},v),{initialValue:{missionId:i.missionId}}),stateProp:"missionNotes"}})},this.onBack=function(){return i.router.navigate(["../"],{relativeTo:i.route.parent})},this.navConfig={title:"Notater",backFn:this.onBack},this.fabs=[{icon:"add",aria:"Legg til",color:"accent",callback:this.openCreateNoteForm,allowedRoles:c.RolePresets.Internal}]}return Object.defineProperty(e.prototype,"missionId",{get:function(){return this.route.parent.parent.snapshot.params.id},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(h["\u0275\u0275directiveInject"](x),h["\u0275\u0275directiveInject"](i.a),h["\u0275\u0275directiveInject"](i.b),h["\u0275\u0275directiveInject"](C.ModelFormService))},e.\u0275cmp=h["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-note-list"]],decls:6,vars:6,consts:[["overlayMode","true",3,"fabs"],["navbar","",3,"config"],[1,"max-width"],[3,"note","editClicked",4,"ngFor","ngForOf","ngForTrackBy"],[3,"note","editClicked"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"app-main-skeleton",0),h["\u0275\u0275element"](1,"app-main-top-nav-bar",1),h["\u0275\u0275elementStart"](2,"div",2),h["\u0275\u0275template"](3,R,1,1,"app-note-card",3),h["\u0275\u0275pipe"](4,"async"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](5,"router-outlet")),2&e&&(h["\u0275\u0275property"]("fabs",t.fabs),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("config",t.navConfig),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("ngForOf",h["\u0275\u0275pipeBind1"](4,4,t.notes$))("ngForTrackBy",t.trackByNote))},directives:[k.a,I.a,w.l,i.g,O],pipes:[w.b],encapsulation:2,changeDetection:0}),e}()}],P=function(){function e(){}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(q)],i.f]}),e}(),T=function(){function e(){}return e.\u0275mod=h["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.a,P]]}),e}()}}]);
//# sourceMappingURL=23.f0c850bf79fbfaf21d33.js.map
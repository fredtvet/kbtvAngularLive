(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1eh6":function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var i=e("K9Ia"),o=e("TYT/"),r=function(){function t(){this.unsubscribe=new i.a}return t.prototype.ngOnDestroy=function(){this.unsubscribe.next(),this.unsubscribe.complete()},t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t}),t}()},"9qP0":function(t,n,e){"use strict";e.d(n,"a",(function(){return l}));var i=e("TYT/"),o=e("Valr"),r=e("FfOm"),a=e("qaSM"),c=e("dAsQ");function s(t,n){1&t&&i["\u0275\u0275element"](0,"app-icon-button",4),2&t&&i["\u0275\u0275property"]("config",n.$implicit)}function p(t,n){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-toolbar",3),i["\u0275\u0275element"](1,"app-icon-button",4),i["\u0275\u0275elementStart"](2,"span",5),i["\u0275\u0275elementStart"](3,"span",6),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,s,1,1,"app-icon-button",7),i["\u0275\u0275elementEnd"]()),2&t){var e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",e.config.colorClass?e.config.colorClass:"bg-accent"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("config",e.config.leftBtn),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.config.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.config.buttons)}}var d=["*"],l=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["app-simple-top-nav"]],inputs:{config:"config"},ngContentSelectors:d,decls:4,vars:1,consts:[[1,"column"],["class","toolbar-slim mat-elevation-z2 flex-nav",3,"ngClass",4,"ngIf"],[1,"main-content","p-3"],[1,"toolbar-slim","mat-elevation-z2","flex-nav",3,"ngClass"],[3,"config"],[1,"mr-auto"],[1,"ml-1"],[3,"config",4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,p,6,4,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275projection"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.config))},directives:[o.l,r.a,o.j,a.a,c.a,o.k],styles:[".m-0[_ngcontent-%COMP%]{margin:0}.mt-0[_ngcontent-%COMP%]{margin-top:0}.ml-0[_ngcontent-%COMP%]{margin-left:0}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mb-0[_ngcontent-%COMP%]{margin-bottom:0}.m-1[_ngcontent-%COMP%]{margin:4px}.mt-1[_ngcontent-%COMP%]{margin-top:4px}.ml-1[_ngcontent-%COMP%]{margin-left:4px}.mr-1[_ngcontent-%COMP%]{margin-right:4px}.mb-1[_ngcontent-%COMP%]{margin-bottom:4px}.m-2[_ngcontent-%COMP%]{margin:8px}.mt-2[_ngcontent-%COMP%]{margin-top:8px}.ml-2[_ngcontent-%COMP%]{margin-left:8px}.mr-2[_ngcontent-%COMP%]{margin-right:8px}.mb-2[_ngcontent-%COMP%]{margin-bottom:8px}.m-3[_ngcontent-%COMP%]{margin:12px}.mt-3[_ngcontent-%COMP%]{margin-top:12px}.ml-3[_ngcontent-%COMP%]{margin-left:12px}.mr-3[_ngcontent-%COMP%]{margin-right:12px}.mb-3[_ngcontent-%COMP%]{margin-bottom:12px}.m-4[_ngcontent-%COMP%]{margin:16px}.mt-4[_ngcontent-%COMP%]{margin-top:16px}.ml-4[_ngcontent-%COMP%]{margin-left:16px}.mr-4[_ngcontent-%COMP%]{margin-right:16px}.mb-4[_ngcontent-%COMP%]{margin-bottom:16px}.m-5[_ngcontent-%COMP%]{margin:20px}.mt-5[_ngcontent-%COMP%]{margin-top:20px}.ml-5[_ngcontent-%COMP%]{margin-left:20px}.mr-5[_ngcontent-%COMP%]{margin-right:20px}.mb-5[_ngcontent-%COMP%]{margin-bottom:20px}.m-6[_ngcontent-%COMP%]{margin:24px}.mt-6[_ngcontent-%COMP%]{margin-top:24px}.ml-6[_ngcontent-%COMP%]{margin-left:24px}.mr-6[_ngcontent-%COMP%]{margin-right:24px}.mb-6[_ngcontent-%COMP%]{margin-bottom:24px}.m-auto[_ngcontent-%COMP%]{margin:auto}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.mr-auto[_ngcontent-%COMP%]{margin-right:auto}.mb-auto[_ngcontent-%COMP%]{margin-bottom:auto}.p-0[_ngcontent-%COMP%]{padding:0}.pt-0[_ngcontent-%COMP%]{padding-top:0}.pl-0[_ngcontent-%COMP%]{padding-left:0}.pr-0[_ngcontent-%COMP%]{padding-right:0}.pb-0[_ngcontent-%COMP%]{padding-bottom:0}.p-1[_ngcontent-%COMP%]{padding:4px}.pt-1[_ngcontent-%COMP%]{padding-top:4px}.pl-1[_ngcontent-%COMP%]{padding-left:4px}.pr-1[_ngcontent-%COMP%]{padding-right:4px}.pb-1[_ngcontent-%COMP%]{padding-bottom:4px}.p-2[_ngcontent-%COMP%]{padding:8px}.pt-2[_ngcontent-%COMP%]{padding-top:8px}.pl-2[_ngcontent-%COMP%]{padding-left:8px}.pr-2[_ngcontent-%COMP%]{padding-right:8px}.pb-2[_ngcontent-%COMP%]{padding-bottom:8px}.p-3[_ngcontent-%COMP%]{padding:12px}.pt-3[_ngcontent-%COMP%]{padding-top:12px}.pl-3[_ngcontent-%COMP%]{padding-left:12px}.pr-3[_ngcontent-%COMP%]{padding-right:12px}.pb-3[_ngcontent-%COMP%]{padding-bottom:12px}.p-4[_ngcontent-%COMP%]{padding:16px}.pt-4[_ngcontent-%COMP%]{padding-top:16px}.pl-4[_ngcontent-%COMP%]{padding-left:16px}.pr-4[_ngcontent-%COMP%]{padding-right:16px}.pb-4[_ngcontent-%COMP%]{padding-bottom:16px}.p-5[_ngcontent-%COMP%]{padding:20px}.pt-5[_ngcontent-%COMP%]{padding-top:20px}.pl-5[_ngcontent-%COMP%]{padding-left:20px}.pr-5[_ngcontent-%COMP%]{padding-right:20px}.pb-5[_ngcontent-%COMP%]{padding-bottom:20px}.p-6[_ngcontent-%COMP%]{padding:24px}.pt-6[_ngcontent-%COMP%]{padding-top:24px}.pl-6[_ngcontent-%COMP%]{padding-left:24px}.pr-6[_ngcontent-%COMP%]{padding-right:24px}.pb-6[_ngcontent-%COMP%]{padding-bottom:24px}.p-auto[_ngcontent-%COMP%]{padding:auto}.pt-auto[_ngcontent-%COMP%]{padding-top:auto}.pl-auto[_ngcontent-%COMP%]{padding-left:auto}.pr-auto[_ngcontent-%COMP%]{padding-right:auto}.pb-auto[_ngcontent-%COMP%]{padding-bottom:auto}.column[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.main-content[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}"],changeDetection:0}),t}()},tnMk:function(t,n,e){"use strict";e.r(n),e.d(n,"MissionModule",(function(){return Q}));var i=e("DUip"),o=e("mrSG"),r=e("26FU"),a=e("15JJ"),c=e("67Y/"),s=e("1YJq"),p=e("TYT/"),d=e("dJ3e"),l=e("ea4N"),u=e("Valr"),g=e("h/AT"),m=e("uLXW"),f=e("K9Ia"),h=e("1eh6"),v=e("Gi3i"),b=e("ad02"),M=e("xMyE"),C=e("ny24"),x=function(t){function n(){var n=t.call(this)||this;return n.debounceTime=400,n.inputChanged=new p.EventEmitter,n.inputUpdated=new f.a,n.inputUpdated.asObservable().pipe(Object(v.a)(n.debounceTime),Object(b.a)(),Object(M.a)((function(t){return n.inputChanged.emit(t)})),Object(C.a)(n.unsubscribe)).subscribe(),n}return Object(o.b)(n,t),n.prototype.onKeyUp=function(t){this.onInputChange(t.target.value)},n.prototype.onInputChange=function(t){this.inputUpdated.next(t)},n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p["\u0275\u0275defineDirective"]({type:n,selectors:[["","appInputListener",""]],hostBindings:function(t,n){1&t&&p["\u0275\u0275listener"]("keyup",(function(t){return n.onKeyUp(t)}))},inputs:{debounceTime:"debounceTime"},outputs:{inputChanged:"inputChanged"},features:[p["\u0275\u0275InheritDefinitionFeature"]]}),n}(h.a),O=e("pdUi"),_=e("EFs6"),P=e("SRL/"),I=e("p+mS"),y=e("GsDI");function S(t,n){1&t&&(p["\u0275\u0275elementStart"](0,"p",6),p["\u0275\u0275text"](1,"Fant ingen oppdrag"),p["\u0275\u0275elementEnd"]())}var k=function(t){return["/oppdrag",t,"detaljer"]};function w(t,n){if(1&t&&p["\u0275\u0275element"](0,"app-list-card",7),2&t){var e=n.$implicit;p["\u0275\u0275property"]("endIcon",e.finished?"check":"chevron_right")("text","("+e.id+") "+e.address)("routerLink",p["\u0275\u0275pureFunction1"](3,k,e.id))}}function j(t,n){if(1&t){var e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"button",8),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().openMissionForm()})),p["\u0275\u0275elementStart"](1,"mat-icon"),p["\u0275\u0275text"](2,"add"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}}var F=function(t,n){return[t,n]},L=function(){function t(t,n,e){var i=this;this._bottomSheet=t,this.router=n,this.route=e,this.Roles=s.g,this.missions=[],this.title="Oppdrag",this.search=new p.EventEmitter,this.onSearch=function(t){return i.search.emit(t)},this.openMissionForm=function(){return i.router.navigate(["ny"],{relativeTo:i.route})},this.trackByFn=function(t,n){return n.id}}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(n){return new(n||t)(p["\u0275\u0275directiveInject"](g.b),p["\u0275\u0275directiveInject"](i.c),p["\u0275\u0275directiveInject"](i.a))},t.\u0275cmp=p["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-list-view"]],inputs:{missions:"missions",title:"title"},outputs:{search:"search"},decls:6,vars:7,consts:[["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","pl-2","pr-2","max-width",2,"overflow","hidden"],["appInputListener","","placeholder","S\xf8k med adresse eller id",1,"mt-2","mb-2","p-2","pl-3","mat-elevation-z2","fadeInDown",2,"background","white","border","none","border-radius","10px",3,"inputChanged"],["class","m-2",4,"ngIf"],["itemSize","60","maxBufferPx","800","minBufferPx","800","fxFlex",""],["startIcon","home_work",3,"endIcon","text","routerLink",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["mat-fab","","aria-label","ny","class","action_fab",3,"click",4,"ifRole"],[1,"m-2"],["startIcon","home_work",3,"endIcon","text","routerLink"],["mat-fab","","aria-label","ny",1,"action_fab",3,"click"]],template:function(t,n){1&t&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275elementStart"](1,"input",1),p["\u0275\u0275listener"]("inputChanged",(function(t){return n.onSearch(t)})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](2,S,2,0,"p",2),p["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",3),p["\u0275\u0275template"](4,w,1,5,"app-list-card",4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](5,j,3,0,"button",5)),2&t&&(p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",null==n.missions||0==n.missions.length),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("cdkVirtualForOf",n.missions)("cdkVirtualForTrackBy",n.trackByFn),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ifRole",p["\u0275\u0275pureFunction2"](4,F,n.Roles.Leder,n.Roles.Mellomleder)))},directives:[m.c,m.b,x,u.l,O.e,O.a,m.a,O.d,_.a,P.a,i.d,I.b,y.a],encapsulation:2,changeDetection:0}),t}(),N=e("RHY+");function D(t,n){if(1&t){var e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"app-mission-list-view",1),p["\u0275\u0275listener"]("search",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().searchMissionList(t)})),p["\u0275\u0275pipe"](1,"sortByDate"),p["\u0275\u0275elementEnd"]()}if(2&t){var i=n.$implicit;p["\u0275\u0275property"]("missions",p["\u0275\u0275pipeBind3"](1,1,i.missions,null!=i.pageInfo&&i.pageInfo.historic?"lastVisited":"updatedAt","desc"))}}var T=function(){function t(t,n,e){var i=this;this.mainNavService=t,this.missionService=n,this.dialog=e,this.Roles=s.g,this.pageInfoSubject=new r.a({searchString:"",showFinishedMissions:!1,historic:!1}),this.searchMissionList=function(t){var n=Object(o.a)({},i.pageInfoSubject.value);n.searchString=t,i.pageInfoSubject.next(n)},this.toggleFinishedMissions=function(){var t=Object(o.a)({},i.pageInfoSubject.value);t.showFinishedMissions=!t.showFinishedMissions,i.pageInfoSubject.next(t);var n="check_box_outline_blank";t.showFinishedMissions&&(n="check_box");var e=i.mainNavService.getTopDefaultNavConfig();e.bottomSheetButtons[0].icon=n,i.mainNavService.addTopNavConfig({default:e})},this.toggleHistoricOrder=function(){var t=Object(o.a)({},i.pageInfoSubject.value);t.historic=!t.historic,i.pageInfoSubject.next(t);var n="color-background";t.historic&&(n="color-accent");var e=i.mainNavService.getTopDefaultNavConfig();e.buttons[0].colorClass=n,i.mainNavService.addTopNavConfig({default:e})},this.configureMainNav()}return t.prototype.ngOnInit=function(){var t=this;this.vm$=this.pageInfoSubject.pipe(Object(a.a)((function(n){return t.missionService.getBy$((function(e){return t.filterMission(e,n)})).pipe(Object(c.a)((function(t){return{missions:t,pageInfo:n}})))})))},t.prototype.filterMission=function(t,n){var e=t.finished==n.showFinishedMissions;e=e&&(!n.searchString||null==n.searchString||t.address.toLowerCase().includes(n.searchString.toLowerCase()));var i=+n.searchString;return isNaN(i)||(e=e||t.id===i),e},t.prototype.configureMainNav=function(){var t={title:"Oppdrag"};t.buttons=[{icon:"history",colorClass:"color-background",aria:"Historisk visning",callback:this.toggleHistoricOrder}],t.bottomSheetButtons=[{text:"Vis ferdige oppdrag",icon:"check_box_outline_blank",callback:this.toggleFinishedMissions}],this.mainNavService.addTopNavConfig({default:t})},t.\u0275fac=function(n){return new(n||t)(p["\u0275\u0275directiveInject"](d.o),p["\u0275\u0275directiveInject"](d.s),p["\u0275\u0275directiveInject"](l.b))},t.\u0275cmp=p["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-list"]],decls:3,vars:3,consts:[[3,"missions","search",4,"ngIf"],[3,"missions","search"]],template:function(t,n){1&t&&(p["\u0275\u0275template"](0,D,2,5,"app-mission-list-view",0),p["\u0275\u0275pipe"](1,"async"),p["\u0275\u0275element"](2,"router-outlet")),2&t&&p["\u0275\u0275property"]("ngIf",p["\u0275\u0275pipeBind1"](1,1,n.vm$))},directives:[u.l,i.h,L],pipes:[u.b,N.a],encapsulation:2,changeDetection:0}),t}(),E=e("1ua0"),B=e("VnD/"),R=e("dzgT"),V=e("MqYC"),$=function(){return["/oppdrag"]},A=function(){return["/timer"]},U=function(t){return["/oppdrag",t,"bilder"]},z=function(t){return["/oppdrag",t,"dokumenter"]},J=function(t){return["/oppdrag",t,"notater"]};function Y(t,n){if(1&t&&(p["\u0275\u0275elementStart"](0,"div",1),p["\u0275\u0275elementStart"](1,"div",2),p["\u0275\u0275elementStart"](2,"a",3),p["\u0275\u0275elementStart"](3,"mat-icon",4),p["\u0275\u0275text"](4,"phone"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](5,"br"),p["\u0275\u0275elementStart"](6,"span"),p["\u0275\u0275text"](7),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"a",5),p["\u0275\u0275elementStart"](9,"mat-icon",6),p["\u0275\u0275text"](10,"directions_car"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](11,"br"),p["\u0275\u0275elementStart"](12,"span"),p["\u0275\u0275text"](13,"Veibeskrivelse"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](14,"app-list-card",7),p["\u0275\u0275element"](15,"app-list-card",8),p["\u0275\u0275element"](16,"app-list-card",9),p["\u0275\u0275elementEnd"]()),2&t){var e=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](2),p["\u0275\u0275propertyInterpolate1"]("href","tel:",e.vm.mission.phoneNumber,"",p["\u0275\u0275sanitizeUrl"]),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction0"](8,$)),p["\u0275\u0275advance"](5),p["\u0275\u0275textInterpolate1"]("",e.vm.mission.phoneNumber||"N/A"," "),p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate1"]("href","https://www.google.com/maps/dir/?api=1&destination=",e.vm.mission.address,"&travelmode=driving",p["\u0275\u0275sanitizeUrl"]),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction0"](9,A)),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction1"](10,U,e.vm.mission.id)),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction1"](12,z,e.vm.mission.id)),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("routerLink",p["\u0275\u0275pureFunction1"](14,J,e.vm.mission.id))}}var q=function(){function t(){this.Roles=s.g}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=p["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-details-view"]],inputs:{vm:"vm"},decls:1,vars:1,consts:[["class","p-2 max-width",4,"ngIf"],[1,"p-2","max-width"],["fxLayout","row","fxLayoutGap","8px",1,"mat-subheading-2","mb-2"],["fxFlex","50","matRipple","",1,"mat-elevation-z2","bg-foreground","text-center","p-6",3,"href","routerLink"],[1,"scale-150","mb-1"],["target","_blank","fxFlex","50","matRipple","",1,"mat-elevation-z2","bg-foreground","text-center","p-6",3,"href","routerLink"],[1,"scale-150"],["text","Bilder","startIcon","photo_library",3,"routerLink"],["text","Dokumenter","startIcon","folder",3,"routerLink"],["text","Notater","startIcon","rate_review",3,"routerLink"]],template:function(t,n){1&t&&p["\u0275\u0275template"](0,Y,17,16,"div",0),2&t&&p["\u0275\u0275property"]("ngIf",n.vm)},directives:[u.l,m.c,m.d,i.f,m.a,V.l,y.a,P.a,i.d],encapsulation:2,changeDetection:0}),t}();function G(t,n){1&t&&p["\u0275\u0275element"](0,"app-mission-details-view",1),2&t&&p["\u0275\u0275property"]("vm",n.$implicit)}var H=[{path:"",component:T,canActivate:[d.d],data:{animation:"MissionList"},children:[{path:"ny",canActivate:[d.d],data:{allowedRoles:[s.g.Leder]},loadChildren:function(){return e.e(4).then(e.bind(null,"4XuV")).then((function(t){return t.MissionFormModule}))}}]},{path:":id/detaljer",component:function(){function t(t,n,e,i,o,r,a,c,p){var d=this;this.mainNavService=t,this.missionService=n,this.missionImageService=e,this.missionDocumentService=i,this.missionNoteService=o,this.notificationService=r,this.route=a,this.router=c,this.dialog=p,this.RolePresets=s.f,this.Roles=s.g,this.uploadImages=function(t){d.missionImageService.addImages$(t.missionId,t.files).subscribe((function(t){return d.notificationService.setNotification("Vellykket! "+t.length+" "+(t.length>1?"bilder":"bilde")+" lastet opp.")}))},this.deleteMission=function(t){d.onBack(),d.missionService.delete$(t).pipe(Object(B.a)((function(t){return t}))).subscribe((function(t){return d.notificationService.setNotification("Vellykket! Oppdrag slettet.")}))},this.openMissionForm=function(t){return d.router.navigate(["rediger"],{relativeTo:d.route,queryParams:{idPreset:t}})},this.openDeleteMissionDialog=function(t){d.dialog.open(E.a,{data:"Bekreft at du \xf8nsker \xe5 slette oppdraget."}).afterClosed().pipe(Object(B.a)((function(t){return t}))).subscribe((function(n){return d.deleteMission(t)}))},this.goToTimesheets=function(t){return d.router.navigate(["timer/liste",{returnRoute:d.router.url,missionId:JSON.stringify(t)}])},this.onBack=function(){return d.router.navigate(["/oppdrag"])}}return t.prototype.ngOnInit=function(){var t=this,n=+this.route.snapshot.paramMap.get("id"),e=this.missionService.getDetails$(n),i=this.missionImageService.getByMissionId$(n).pipe(Object(c.a)((function(t){return t.length}))),r=this.missionDocumentService.getByMissionId$(n).pipe(Object(c.a)((function(t){return t.length}))),a=this.missionNoteService.getByMissionId$(n).pipe(Object(c.a)((function(t){return t.length})));this.vm$=Object(R.a)(e,i,r,a).pipe(Object(c.a)((function(t){var n=Object(o.c)(t,4);return{mission:n[0],imageCount:n[1],documentCount:n[2],noteCount:n[3]}})),Object(M.a)((function(n){return t.configureMainNav(n.mission)})))},t.prototype.configureMainNav=function(t){var n={title:t.address.split(",").filter((function(t){return"norge"!==t.toLowerCase().replace(/\s/g,"")})),subTitle:t.finished?"Oppdrag ferdig!":"",subIcon:t.finished?"check":"",imgSrc:t.imageURL,backFn:this.onBack};n.bottomSheetButtons=[{text:"Registrer timer",icon:"timer",callback:this.goToTimesheets,params:[t],allowedRoles:s.f.Internal},{text:"Rediger",icon:"edit",callback:this.openMissionForm,params:[t.id],allowedRoles:[s.g.Leder]},{text:"Slett",icon:"delete_forever",callback:this.openDeleteMissionDialog,params:[t.id],allowedRoles:[s.g.Leder]}],this.mainNavService.addTopNavConfig({detail:n})},t.\u0275fac=function(n){return new(n||t)(p["\u0275\u0275directiveInject"](d.o),p["\u0275\u0275directiveInject"](d.s),p["\u0275\u0275directiveInject"](d.q),p["\u0275\u0275directiveInject"](d.p),p["\u0275\u0275directiveInject"](d.r),p["\u0275\u0275directiveInject"](d.v),p["\u0275\u0275directiveInject"](i.a),p["\u0275\u0275directiveInject"](i.c),p["\u0275\u0275directiveInject"](l.b))},t.\u0275cmp=p["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-details"]],decls:3,vars:3,consts:[[3,"vm",4,"ngIf"],[3,"vm"]],template:function(t,n){1&t&&(p["\u0275\u0275template"](0,G,1,1,"app-mission-details-view",0),p["\u0275\u0275pipe"](1,"async"),p["\u0275\u0275element"](2,"router-outlet")),2&t&&p["\u0275\u0275property"]("ngIf",p["\u0275\u0275pipeBind1"](1,1,n.vm$))},directives:[u.l,i.h,q],pipes:[u.b],encapsulation:2,changeDetection:0}),t}(),canActivate:[d.d],data:{animation:"MissionDetails"},children:[{path:"rediger",canActivate:[d.d],data:{allowedRoles:[s.g.Leder]},loadChildren:function(){return e.e(4).then(e.bind(null,"4XuV")).then((function(t){return t.MissionFormModule}))}}]},{path:":id/bilder",loadChildren:function(){return Promise.all([e.e(0),e.e(18)]).then(e.bind(null,"skTp")).then((function(t){return t.MissionImageListModule}))},canActivate:[d.d],data:{animation:"MissionImages"}},{path:":id/dokumenter",loadChildren:function(){return Promise.all([e.e(0),e.e(17)]).then(e.bind(null,"PvB8")).then((function(t){return t.MissionDocumentListModule}))},canActivate:[d.d],data:{animation:"MissionDocuments"}},{path:":id/notater",loadChildren:function(){return e.e(20).then(e.bind(null,"QoWm")).then((function(t){return t.MissionNoteListModule}))},canActivate:[d.d],data:{animation:"MissionNotes"}}],K=function(){function t(){}return t.\u0275mod=p["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(n){return new(n||t)},imports:[[i.g.forChild(H)],i.g]}),t}(),X=e("PCNd"),Q=function(){function t(){}return t.\u0275mod=p["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(n){return new(n||t)},providers:[u.e],imports:[[X.a,K]]}),t}()}}]);
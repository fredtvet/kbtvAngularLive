(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{PEQ5:function(e,t,n){"use strict";n.r(t),n.d(t,"MissionDocumentFormModule",(function(){return C}));var o=n("DUip"),i=n("h/AT"),r=n("TYT/"),c=n("9qP0"),m=n("dJ3e"),u=n("QJY3"),s=n("Valr"),p=n("uLXW"),a=n("eHTH"),d=n("cSbt"),f=n("iYur"),l=n("p+mS"),h=n("Up+3"),y=n("GsDI"),v=n("MqYC");function g(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",8),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n.name),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function b(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"form",1),r["\u0275\u0275elementStart"](1,"mat-form-field",2),r["\u0275\u0275element"](2,"input",3),r["\u0275\u0275elementStart"](3,"mat-autocomplete",null,4),r["\u0275\u0275template"](5,g,2,2,"mat-option",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"input",6),r["\u0275\u0275listener"]("change",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().changeFile(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"br"),r["\u0275\u0275elementStart"](8,"button",7),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onSubmit()})),r["\u0275\u0275elementStart"](9,"mat-icon"),r["\u0275\u0275text"](10,"cloud_upload"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11," Last opp "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var o=r["\u0275\u0275reference"](4),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("formGroup",i.documentForm),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("matAutocomplete",o),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",i.types),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",i.documentForm.invalid||i.documentForm.pristine)}}var S=function(){function e(e){this._formBuilder=e,this.types=[],this.formSubmitted=new r.EventEmitter}return e.prototype.ngOnInit=function(){this.documentForm=this._formBuilder.group({documentType:this._formBuilder.group({id:[],name:[null,[u.s.required,u.s.maxLength(45)]]})})},e.prototype.onSubmit=function(){var e=this,t=this.types.find((function(t){return t.name===e.documentTypeName.value}));t&&this.documentTypeId.setValue(t.id),this.documentForm.dirty&&null!=this.files&&this.files.length>0&&this.formSubmitted.emit({files:this.files,documentType:this.documentType.value})},e.prototype.changeFile=function(e){this.files=e.target.files},Object.defineProperty(e.prototype,"documentType",{get:function(){return this.documentForm.get("documentType")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentTypeId",{get:function(){return this.documentForm.get(["documentType","id"])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentTypeName",{get:function(){return this.documentForm.get(["documentType","name"])},enumerable:!0,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](u.c))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-document-form-view"]],inputs:{types:"types"},outputs:{formSubmitted:"formSubmitted"},decls:1,vars:1,consts:[["fxLayout","column","fxLayoutAlign","space-around-center",3,"formGroup",4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-around-center",3,"formGroup"],["formGroupName","documentType"],["matInput","","placeholder","Type dokument","aria-label","Type dokument","formControlName","name",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","file",3,"change"],["appHttpCommandButton","","mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&r["\u0275\u0275template"](0,b,12,4,"form",0),2&e&&r["\u0275\u0275property"]("ngIf",t.documentForm)},directives:[s.l,u.t,u.m,p.c,p.b,u.e,a.c,u.f,d.a,u.b,f.c,u.l,u.d,f.a,s.k,l.b,h.a,y.a,v.i],encapsulation:2,changeDetection:0}),e}(),I=function(){function e(e,t){this.missionDocumentService=e,this.DocumentTypeService=t,this.finished=new r.EventEmitter}return e.prototype.ngOnInit=function(){this.documentTypes$=this.DocumentTypeService.getAll$()},e.prototype.onSubmit=function(e){var t=this;e&&this.missionId?this.missionDocumentService.addDocument$(this.missionId,e.documentType,e.files).subscribe((function(e){return t.finished.emit(e)})):this.finished.emit()},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.p),r["\u0275\u0275directiveInject"](m.i))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-document-form"]],inputs:{missionId:"missionId"},outputs:{finished:"finished"},decls:2,vars:3,consts:[[3,"types","formSubmitted"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"app-mission-document-form-view",0),r["\u0275\u0275listener"]("formSubmitted",(function(e){return t.onSubmit(e)})),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("types",r["\u0275\u0275pipeBind1"](1,1,t.documentTypes$))},directives:[S],pipes:[s.b],encapsulation:2,changeDetection:0}),e}(),T=function(){function e(e,t){var n=this;this._bottomSheetRef=e,this.data=t,this.close=function(){return n._bottomSheetRef.dismiss()}}return e.prototype.ngOnInit=function(){this.navConfig={title:"Legg til dokument",leftBtn:{icon:"close",callback:this.close}}},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.d),r["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-document-form-sheet-wrapper"]],decls:2,vars:2,consts:[[3,"config"],[3,"missionId","finished"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"app-simple-top-nav",0),r["\u0275\u0275elementStart"](1,"app-mission-document-form",1),r["\u0275\u0275listener"]("finished",(function(){return t.close()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("config",t.navConfig),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("missionId",null==t.data?null:t.data.missionId))},directives:[c.a,I],encapsulation:2,changeDetection:0}),e}(),w=[{path:"",component:function(){function e(e,t,n){var o=this;this.bottomSheet=e,this.route=t,this.location=n,this.openDialog=function(e){o.bottomSheet.open(T,e).afterDismissed().subscribe((function(e){return o.location.back()}))},this.openDialog({missionId:+this.route.snapshot.queryParams.missionId})}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.b),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](s.h))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e}()}],j=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.f.forChild(w)],o.f]}),e}(),x=n("PCNd"),C=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[j,x.a]]}),e}()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{BQU6:function(e,t,i){"use strict";i.r(t),i.d(t,"TimesheetModule",(function(){return K}));var n=i("DUip"),r=i("67Y/"),a=i("15JJ"),s=i("ea4N"),o=i("F/XL"),c=i("9Z1F"),l=i("TYT/"),u=i("dJ3e"),m=i("+1Be"),p=i("Valr"),d=function(){function e(e,t,i){this.userTimesheetService=e,this.dialogRef=t,this.timesheetId=i,this.timesheet$=this.userTimesheetService.getWithMission$(this.timesheetId).pipe(Object(c.a)((function(e){return Object(o.a)(null)})))}return e.prototype.deleteTimesheet=function(){var e=this;this.userTimesheetService.delete$(this.timesheetId).subscribe((function(t){return e.dialogRef.close()}))},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](u.D),l["\u0275\u0275directiveInject"](s.e),l["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-card-dialog-wrapper"]],decls:2,vars:3,consts:[[3,"timesheet","deleteClicked"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"app-timesheet-card",0),l["\u0275\u0275listener"]("deleteClicked",(function(){return t.deleteTimesheet()})),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275elementEnd"]()),2&e&&l["\u0275\u0275property"]("timesheet",l["\u0275\u0275pipeBind1"](1,1,t.timesheet$))},directives:[m.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e}(),h=i("uLXW"),f=i("MqYC"),v=i("GsDI"),g=function(){function e(e){this.dialog=e,this.labelClicked=new l.EventEmitter}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](s.b))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-day-label"]],inputs:{date:"date"},outputs:{labelClicked:"labelClicked"},decls:13,vars:12,consts:[["fxLayout","column","fxLayoutAlign","start center","matRipple","",1,"mat-elevation-z2","bg-foreground","pt-2",3,"click"],["fxLayout","column","fxLayoutAlign","center center"],[1,"mat-h3","m-0","line-height-100"],[1,"mat-title","m-0","line-height-100"],[1,"mat-small","line-height-100"],[1,"icon","m-1"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"span",0),l["\u0275\u0275listener"]("click",(function(){return t.labelClicked.emit(t.date)})),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"span",2),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"span",3),l["\u0275\u0275text"](6),l["\u0275\u0275pipe"](7,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"span",4),l["\u0275\u0275text"](9),l["\u0275\u0275pipe"](10,"date"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"mat-icon",5),l["\u0275\u0275text"](12,"add"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](4,3,t.date,"E")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](7,6,t.date,"dd")," "),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind2"](10,9,t.date,"MMM")," "))},directives:[h.c,h.b,f.k,v.a],pipes:[p.e],encapsulation:2,changeDetection:0}),e}(),y=i("qaSM"),k=function(e,t){return{"bg-accent-light":e,"bg-warn-light":t}};function b(e,t){if(1&e){var i=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",1),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](i),l["\u0275\u0275nextContext"]().clickBar()})),l["\u0275\u0275elementStart"](1,"span",2),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction2"](2,k,2==n.timesheet.status,0==n.timesheet.status)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",n.timesheet.totalHours,"t ")}}var x=function(){function e(){this.barClicked=new l.EventEmitter}return e.prototype.clickBar=function(){this.barClicked.emit(this.timesheet.id)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-mission-bar"]],inputs:{timesheet:"timesheet"},outputs:{barClicked:"barClicked"},decls:1,vars:1,consts:[["class","mission-bar mat-elevation-z1","fxLayout","column","fxLayoutAlign","center center","matRipple","",3,"ngClass","click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","matRipple","",1,"mission-bar","mat-elevation-z1",3,"ngClass","click"],[1,"mat-body-strong"]],template:function(e,t){1&e&&l["\u0275\u0275template"](0,b,3,5,"div",0),2&e&&l["\u0275\u0275property"]("ngIf",t.timesheet)},directives:[p.l,h.c,h.b,f.k,p.j,y.a],styles:[".mission-bar[_ngcontent-%COMP%]{border-radius:4px!important;height:100%;padding:2px!important;text-align:center}"],changeDetection:0}),e}(),S=i("XIAg"),w=i("hhBj"),C=function(){function e(e){this.dateTimeService=e}return e.prototype.transform=function(e,t){var i=this.dateTimeService.getWeekRangeByDateParams(e)[0];return(t||e.weekDay)&&i.setDate(i.getDate()+(t-1)||e.weekDay),i},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](u.h))},e.\u0275pipe=l["\u0275\u0275definePipe"]({name:"getDateByDateParams",type:e,pure:!0}),e}(),T=i("RHY+");function I(e,t){if(1&e){var i=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"app-timesheet-mission-bar",8),l["\u0275\u0275listener"]("barClicked",(function(e){l["\u0275\u0275restoreView"](i);var n=t.$implicit,r=l["\u0275\u0275nextContext"](3);return n.status?r.openTimesheetCard(e):r.openTimesheetForm(void 0,e)})),l["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit;l["\u0275\u0275styleProp"]("height",n.totalHours/14*300,"px"),l["\u0275\u0275property"]("timesheet",n)}}function j(e,t){1&e&&l["\u0275\u0275element"](0,"mat-divider",9)}function F(e,t){if(1&e){var i=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"div",3),l["\u0275\u0275elementStart"](2,"app-timesheet-day-label",4),l["\u0275\u0275listener"]("labelClicked",(function(e){return l["\u0275\u0275restoreView"](i),l["\u0275\u0275nextContext"](2).openTimesheetForm(e)})),l["\u0275\u0275pipe"](3,"getDateByDateParams"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",5),l["\u0275\u0275template"](5,I,1,3,"app-timesheet-mission-bar",6),l["\u0275\u0275pipe"](6,"sortByDate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](7,j,1,0,"mat-divider",7),l["\u0275\u0275elementContainerEnd"]()}if(2&e){var n=t.$implicit,r=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("date",l["\u0275\u0275pipeBind2"](3,3,r.dateParams,n)),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBind2"](6,6,r.days[n],"startTime")),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",7!==n)}}function N(e,t){if(1&e){var i=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275listener"]("swiperight",(function(){l["\u0275\u0275restoreView"](i);var e=t.$implicit;return l["\u0275\u0275nextContext"]().previousWeek(e.dateParams)}))("swipeleft",(function(){l["\u0275\u0275restoreView"](i);var e=t.$implicit;return l["\u0275\u0275nextContext"]().nextWeek(e.dateParams)})),l["\u0275\u0275template"](2,F,8,9,"ng-container",2),l["\u0275\u0275pipe"](3,"arrayFromNumber"),l["\u0275\u0275pipe"](4,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]()}if(2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBind1"](3,1,l["\u0275\u0275pipeBind1"](4,3,n.isXs$)?5:7))}}var P=function(){function e(e,t,i,n,r,a,s){var o=this;this.mainNavService=e,this.router=t,this.route=i,this.dialog=n,this.deviceInfoService=r,this.dateTimeService=a,this.userTimesheetService=s,this.date=new Date,this.currentWeekNr=this.dateTimeService.getWeekOfYear(this.date),this.currentYear=this.date.getFullYear(),this.isXs$=this.deviceInfoService.isXs$,this.openTimesheetForm=function(e,t){return o.router.navigate(["skjema"],{relativeTo:o.route,queryParams:{idPreset:t,datePreset:e.toString()}})},this.goToTimesheetList=function(){var e=o.getDateParams(o.route.snapshot.queryParams);o.router.navigate(["timer/liste",{returnRoute:o.router.url,dateRange:JSON.stringify(o.dateTimeService.getWeekRangeByDateParams(e))}])},this.goToWeekList=function(){return o.router.navigate(["timer/ukeliste"],{queryParams:{year:o.route.snapshot.queryParams.year}})},this.changeDateParams=function(e){return o.router.navigate(["timer/ukevisning"],{queryParams:{year:e.year,weekNr:e.weekNr}})},this.configureMainNav(this.getDateParams(this.route.snapshot.queryParams))}return e.prototype.ngOnInit=function(){this.initalizeObservable()},e.prototype.nextWeek=function(e){e.year==this.currentYear&&e.weekNr<this.currentWeekNr?e.weekNr++:e.year!=this.currentYear&&(e.weekNr>=this.dateTimeService.getWeeksInYear(e.year)?(e.year++,e.weekNr=1):e.weekNr++),this.changeDateParams(e)},e.prototype.previousWeek=function(e){e.weekNr<=1?(e.year--,e.weekNr=this.dateTimeService.getWeeksInYear(e.year)):e.weekNr--,this.changeDateParams(e)},e.prototype.openTimesheetCard=function(e){this.dialog.open(d,{data:e,panelClass:"extended-dialog"})},e.prototype.initalizeObservable=function(){var e=this;this.vm$=this.route.queryParams.pipe(Object(r.a)((function(t){return e.getDateParams(t)})),Object(a.a)((function(t){return e.configureMainNav(t),e.userTimesheetService.getByWeekGrouped$(t).pipe(Object(r.a)((function(e){return{days:e,dateParams:t}})))})))},e.prototype.configureMainNav=function(e){var t={title:"Uke "+e.weekNr,subTitle:e.year.toString(),backFn:this.goToWeekList,buttons:[{icon:"list",callback:this.goToTimesheetList}]};this.mainNavService.addTopNavConfig({default:t})},e.prototype.getDateParams=function(e){return{year:+e.year||this.date.getFullYear(),weekNr:+e.weekNr||this.dateTimeService.getWeekOfYear(this.date)}},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](u.p),l["\u0275\u0275directiveInject"](n.b),l["\u0275\u0275directiveInject"](n.a),l["\u0275\u0275directiveInject"](s.b),l["\u0275\u0275directiveInject"](u.i),l["\u0275\u0275directiveInject"](u.h),l["\u0275\u0275directiveInject"](u.D))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-week-view"]],decls:3,vars:3,consts:[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start stretch",1,"h-100",3,"swiperight","swipeleft"],[4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","start center",1,"w-100"],[1,"w-100","mb-1","fadeInDown",2,"z-index","1",3,"date","labelClicked"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","",1,"w-100",2,"padding","0 2px 0 2px","z-index","0"],["class","w-100 mb-1 fadeInDown",3,"timesheet","height","barClicked",4,"ngFor","ngForOf"],["vertical","true",4,"ngIf"],[1,"w-100","mb-1","fadeInDown",3,"timesheet","barClicked"],["vertical","true"]],template:function(e,t){1&e&&(l["\u0275\u0275template"](0,N,5,5,"ng-container",0),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275element"](2,"router-outlet")),2&e&&l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[p.l,n.g,h.c,h.b,p.k,g,h.a,x,S.a],pipes:[p.b,w.a,C,T.a],encapsulation:2,changeDetection:0}),e}(),D=i("1YJq"),O=i("26FU"),R=i("VnD/"),E=i("D7mL"),B=function(){function e(e,t,i,n,r){void 0===e&&(e=D.j.Open),void 0===t&&(t=void 0),void 0===i&&(i=E.a.CurrentYear),void 0===n&&(n=[]),void 0===r&&(r=void 0),this.status=e,this.mission=t,this.dateRangePreset=i,this.dateRange=n,this.userName=r}return e.prototype.checkTimesheet=function(e){var t=e.status==this.status;if(this.userName&&null!==this.userName&&(t=t&&e.userName==this.userName),this.dateRange&&null!==this.dateRange){var i=new Date(e.startTime);t=t&&i>=this.dateRange[0]&&i<=this.dateRange[1]}return this.mission&&null!==this.mission&&(t=t&&e.missionId==this.mission.id),t},e}(),L=i("aVFR"),V=(i("cSEC"),i("V031")),W=i("QdsK"),$=(i("bV4J"),i("h/AT")),M=i("p+mS"),Y=i("pdUi");function A(e,t){if(1&e){var i=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",7),l["\u0275\u0275elementStart"](1,"app-timesheet-card",8),l["\u0275\u0275listener"]("deleteClicked",(function(e){return l["\u0275\u0275restoreView"](i),l["\u0275\u0275nextContext"](2).deleteTimesheet(e)}))("editClicked",(function(e){return l["\u0275\u0275restoreView"](i),l["\u0275\u0275nextContext"](2).openTimesheetForm(void 0,e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("timesheet",n)}}function q(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",5),l["\u0275\u0275template"](2,A,2,1,"div",6),l["\u0275\u0275pipe"](3,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementContainerEnd"]()),2&e){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("cdkVirtualForOf",l["\u0275\u0275pipeBind1"](3,1,i.timesheets$))}}function z(e,t){if(1&e){var i=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"span",9),l["\u0275\u0275elementStart"](1,"p"),l["\u0275\u0275text"](2,"Finner ingen timer med gitte filtre. "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"button",10),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](i),l["\u0275\u0275nextContext"]().openFilterSheet()})),l["\u0275\u0275text"](4,"\xc5pne filter"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}var J=function(){function e(e,t,i,n,r,a){var s=this;this.mainNavService=e,this.route=t,this.router=i,this._bottomSheet=n,this.userTimesheetService=r,this.dateTimeService=a,this.timesheetStatus=D.j,this.openTimesheetForm=function(e,t){return s.router.navigate(["skjema"],{relativeTo:s.route,queryParams:{idPreset:t,missionPreset:JSON.stringify(e)}})},this.deleteTimesheet=function(e){return s.userTimesheetService.delete$(e).subscribe()},this.getCurrentFilter=function(){return s.filterSubject.value},this.openFilterSheet=function(){s._bottomSheet.open(V.a,{data:{filter:s.getFilterCopy(),disabledFilters:["user"]}}).afterDismissed().pipe(Object(R.a)((function(e){return e instanceof B}))).subscribe((function(e){return s.filterSubject.next(e)}))},this.onBack=function(){var e=s.route.snapshot.params.returnRoute;e?s.router.navigateByUrl(e):s.router.navigate([""])},this.configureMainNav()}return e.prototype.ngOnInit=function(){var e=this;this.filterSubject=new O.a(this.getInitialFilter()),this.timesheets$=this.filterSubject.asObservable().pipe(Object(a.a)((function(t){return e.userTimesheetService.getByWithMission$((function(e){return t.checkTimesheet(e)}))})))},e.prototype.changeStatus=function(e){var t=this.getFilterCopy();t.status=e,this.filterSubject.next(t)},e.prototype.getFilterCopy=function(){return Object.assign(Object.create(Object.getPrototypeOf(this.filterSubject.value)),this.filterSubject.value)},e.prototype.getInitialFilter=function(){var e=new B;if(this.route.snapshot.params.mission&&(e.mission=JSON.parse(this.route.snapshot.params.mission)),this.route.snapshot.params.dateRange){e.dateRangePreset=D.b.Custom;var t=JSON.parse(this.route.snapshot.params.dateRange);t[0]=new Date(t[0]),t[1]=new Date(t[1]),e.dateRange=t}else this.route.snapshot.params.dateRangePreset?(e.dateRangePreset=this.route.snapshot.params.dateRangePreset,e.dateRange=this.dateTimeService.getRangeByDateRangePreset(this.route.snapshot.params.dateRangePreset)):(e.dateRangePreset=D.b.CurrentYear,e.dateRange=this.dateTimeService.getRangeByDateRangePreset(D.b.CurrentYear));return e},e.prototype.configureMainNav=function(){this.mainNavService.addTopNavConfig({default:{title:"Timeliste",backFn:this.onBack,buttons:[{icon:"filter_list",colorClass:"color-accent",callback:this.openFilterSheet}]}})},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](u.p),l["\u0275\u0275directiveInject"](n.a),l["\u0275\u0275directiveInject"](n.b),l["\u0275\u0275directiveInject"]($.b),l["\u0275\u0275directiveInject"](u.D),l["\u0275\u0275directiveInject"](u.h))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-list"]],decls:9,vars:4,consts:[["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","max-width"],["mat-fab","","aria-label","ny",1,"action_fab",3,"click"],[1,"scale-125"],[4,"ngIf","ngIfElse"],["noSheets",""],["itemSize","148","maxBufferPx","800","minBufferPx","800","fxFlex","",1,"fadeInRight"],["class","m-1",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"m-1"],[3,"timesheet","deleteClicked","editClicked"],[1,"ppt-5","text-center","w-100"],["mat-raised-button","","color","accent",1,"bounceIn",3,"click"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"button",1),l["\u0275\u0275listener"]("click",(function(){return t.openTimesheetForm(t.getCurrentFilter().mission)})),l["\u0275\u0275elementStart"](2,"mat-icon",2),l["\u0275\u0275text"](3,"add"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](4,q,4,3,"ng-container",3),l["\u0275\u0275pipe"](5,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](6,z,5,0,"ng-template",null,4,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275element"](8,"router-outlet")),2&e){var i,n=l["\u0275\u0275reference"](7),r=null==(i=l["\u0275\u0275pipeBind1"](5,2,t.timesheets$))?null:i.length;l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",r)("ngIfElse",n)}},directives:[h.c,h.b,M.b,v.a,p.l,n.g,Y.e,Y.a,h.a,Y.d,m.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e}(),_=i("xMyE");function U(e,t){if(1&e){var i=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",4),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](i);var e=t.$implicit,n=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"]().goToWeekView(n.year,e.week)})),l["\u0275\u0275element"](1,"app-timesheet-summary-card-content",5),l["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("summary",n)}}function X(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",1),l["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",2),l["\u0275\u0275template"](2,U,2,1,"div",3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var i=t.$implicit,n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("cdkVirtualForOf",i.summaries)("cdkVirtualForTrackBy",n.trackByWeekNr)("cdkVirtualForTemplateCacheSize",0)}}var G=[{path:"",redirectTo:"ukevisning",pathMatch:"full"},{path:"ukevisning",component:P,canActivate:[u.d],data:{allowedRoles:[D.i.Leder,D.i.Mellomleder,D.i.Ansatt],page:D.a.TimesheetWeekView},children:[{path:"skjema",loadChildren:function(){return Promise.all([i.e(0),i.e(6)]).then(i.bind(null,"O3an")).then((function(e){return e.TimesheetFormModule}))},data:{preload:!0,page:D.a.TimesheetForm}}]},{path:"ukeliste",component:function(){function e(e,t,i,n,r,a){var s=this;this._bottomSheet=e,this.dateTimeService=t,this.userTimesheetService=i,this.mainNavService=n,this.route=r,this.router=a,this.today=new Date,this.weekNr=this.dateTimeService.getWeekOfYear(this.today),this.goToWeekView=function(e,t){s.router.navigate(["/timer/ukevisning"],{queryParams:{year:e,weekNr:t}})},this.openWeekFilter=function(e){s._bottomSheet.open(L.a,{data:{year:e}}).afterDismissed().pipe(Object(R.a)((function(e){return null!=e}))).subscribe((function(e){return s.updateYear(e.year)}))},this.updateYear=function(e){return s.router.navigate(["timer/ukeliste"],{queryParams:{year:e}})},this.configureMainNav=function(e){var t={title:"Ukeliste",subTitle:e?e.toString():s.today.getFullYear().toString()};t.buttons=[{icon:"filter_list",colorClass:"color-accent",callback:s.openWeekFilter,params:[e]}],s.mainNavService.addTopNavConfig({default:t})},this.configureMainNav(+this.route.snapshot.queryParamMap.year)}return e.prototype.ngOnInit=function(){var e=this;this.vm$=this.route.queryParams.pipe(Object(r.a)((function(t){return+t.year||e.today.getFullYear()})),Object(_.a)(this.configureMainNav),Object(a.a)((function(t){var i=t==e.today.getFullYear()?e.weekNr:e.dateTimeService.getWeeksInYear(t);return e.userTimesheetService.getByWeekRangeGrouped$(1,i,t).pipe(Object(r.a)((function(e){return{year:t,summaries:e.reverse()}})))})))},e.prototype.trackByWeekNr=function(e,t){return t.week},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"]($.b),l["\u0275\u0275directiveInject"](u.h),l["\u0275\u0275directiveInject"](u.D),l["\u0275\u0275directiveInject"](u.p),l["\u0275\u0275directiveInject"](n.a),l["\u0275\u0275directiveInject"](n.b))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-week-list"]],decls:2,vars:3,consts:[["class","h-100 fadeInLeft  max-width","fxLayout","column","fxLayoutAlign","start stretch",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","fadeInLeft","max-width"],["itemSize","78","maxBufferPx","800","minBufferPx","800","fxFlex",""],["class","app-card mat-elevation-z2 m-1","matRipple","",3,"click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],["matRipple","",1,"app-card","mat-elevation-z2","m-1",3,"click"],[3,"summary"]],template:function(e,t){1&e&&(l["\u0275\u0275template"](0,X,3,3,"div",0),l["\u0275\u0275pipe"](1,"async")),2&e&&l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[p.l,h.c,h.b,Y.e,Y.a,h.a,Y.d,f.k,W.a],pipes:[p.b],encapsulation:2,changeDetection:0}),e}(),canActivate:[u.d],data:{allowedRoles:[D.i.Leder,D.i.Mellomleder,D.i.Ansatt],page:D.a.TimesheetWeekList}},{path:"liste",component:J,canActivate:[u.d],data:{allowedRoles:[D.i.Leder,D.i.Mellomleder,D.i.Ansatt],page:D.a.TimesheetList},children:[{path:"skjema",loadChildren:function(){return Promise.all([i.e(0),i.e(6)]).then(i.bind(null,"O3an")).then((function(e){return e.TimesheetFormModule}))}}]}],H=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.f.forChild(G)],n.f]}),e}(),Q=i("Ocsb"),K=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[Q.a,H]]}),e}()}}]);
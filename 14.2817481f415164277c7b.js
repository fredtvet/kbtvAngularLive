(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"06Nl":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("t7j9"),i=n("NlAt"),a=n("oEjJ"),o="SET_FETCHED_TIMESHEETS",s={actionId:o,stateProperties:["timesheets","missions"],reducerFn:function(e,t){var n=new i.a("timesheets",null,["missions"]),o=Object(r.a)({timesheets:t.timesheets,missions:e.missions},n);return e.timesheets=Object(a.a)(e.timesheets,o,"id"),e}}},"64fj":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="SAVE_USER_TIMESHEET"},"953d":function(e,t,n){"use strict";function r(e){void 0===e&&(e=new Date);var t=e.getDay();return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(0==t?-6:1)-t)}n.d(t,"a",(function(){return r}))},DHoI:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("mrSG"),i=n("cT5K"),a=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(r.b)(t,e),t.prototype.addChecks=function(e){var t,n=!0;if(!this.criteria.dateRange)return!1;if(this.criteria.status&&(n=n&&e.status===this.criteria.status),(null===(t=this.criteria.user)||void 0===t?void 0:t.userName)&&(n=n&&e.userName===this.criteria.user.userName),this.criteria.dateRange&&this.criteria.dateRange.start&&this.criteria.dateRange.end){var r=this.getStartOfDayTime(e.startTime);n=n&&r>=this.getStartOfDayTime(this.criteria.dateRange.start)&&r<=this.getStartOfDayTime(this.criteria.dateRange.end)}return this.criteria.mission&&(n=n&&e.missionId===this.criteria.mission.id),n},t.prototype.containedIn=function(e){if(!this.criteria)return!0;if(!e)return!1;if(!this.isDateRangeContainedIn(e.dateRange))return!1;for(var t in e)if("dateRange"!==t&&"dateRangePreset"!==t){var n=e[t];if(n){var r=this.criteria[t];if(r&&"object"==typeof r){if(!this.isObjectContainedIn(n,t))return!1}else if(r!==n)return!1}}return!0},t.prototype.isObjectContainedIn=function(e,t){var n=i.a.getBy(t,"foreignProp"),r=this.criteria[t];return!(n&&r[n.identifier]!==e[n.identifier]||!n&&r!==e)},t.prototype.isDateRangeContainedIn=function(e){if(!e||!e.end||!e.start)return!1;var t=this.criteria.dateRange;return!(t&&t.start&&t.end)||this.getStartOfDayTime(e.start)<=this.getStartOfDayTime(t.start)&&this.getStartOfDayTime(e.end)>=this.getStartOfDayTime(t.end)},t.prototype.getStartOfDayTime=function(e){if(e){var t=new Date(e);return t.setHours(0,0,0,0),t.getTime()}},t}(n("81hy").a)},GxAf:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return y}));var r=n("K+RL"),i=n("y3MX"),a=n("mrSG"),o=n("lJxs"),s=n("G+73"),u=n("QNXn"),c=n("Gil/"),l=n("64fj"),d=n("fXoL"),f=function(e){function t(){return e.call(this)||this}return Object(a.b)(t,e),t.prototype.handle$=function(t){var n=this;return t.pipe(Object(c.a)([l.a]),Object(o.a)((function(t){return{actionId:s.a,propagate:!0,request:e.prototype.createHttpRequest.call(n,t.action),stateSnapshot:t.stateSnapshot}})))},t.\u0275prov=d["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac=function(e){return new(e||t)}}),t}(u.a),p=n("v/VQ"),m=n("k5Aa"),h={actionId:l.a,reducerFn:function(e,t){var n,r,i,o=t.entity,s={};return o&&(s=Object(a.a)(Object(a.a)({},o),{status:m.b.Open,userName:null===(n=null==e?void 0:e.currentUser)||void 0===n?void 0:n.userName,totalHours:(r=o.startTime,i=o.endTime,Math.round(Math.abs(r-i)/36e5*10)/10)})),t.entity=s,p.a.reducerFn(e,t)},stateProperties:function(e){return Object(a.d)(["currentUser"],p.a.stateProperties(e))}},v=n("06Nl"),g=[{provide:r.b,useClass:f,multi:!0},{provide:r.c,useValue:h,multi:!0}],y=[{provide:r.b,useClass:i.b,multi:!0},{provide:r.c,useValue:v.b,multi:!0}]},Ocsb:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("PCNd"),i=n("9RCi"),a=n("fXoL"),o=function(){function e(){}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.a,i.a],r.a]}),e}()},P592:function(e,t,n){"use strict";function r(e){return void 0===e&&(e=new Date),new Date(new Date(e).getFullYear(),11,31,23,59,59)}n.d(t,"a",(function(){return r}))},"bU+f":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("P592");function i(e,t){void 0===e&&(e=new Date);var n=function(e){return void 0===e&&(e=new Date),new Date(new Date(e).getFullYear(),0,1)}(e),i=Object(r.a)(e);return{start:t?n.toISOString():n,end:t?i.toISOString():i}}},ppRE:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n("mrSG"),i=n("LRne"),a=n("JX91"),o=n("pLZG"),s=n("yq3W"),u=n("SSDc"),c=n("+N20"),l=n("fXoL"),d=n("ofXK"),f=n("znSr"),p=n("kmnG"),m=n("qFsG"),h=n("yyB5");function v(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"mat-label"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n.question.label)}}function g(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"mat-hint"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](n.question.hint)}}function y(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"mat-error"),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.getValidationErrorMessage()," ")}}var b=function(e){return{"pointer-events":e}},S=function(e){function t(t){var n=e.call(this,t)||this;return n.dayNames=["S\xf8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xf8rdag"],n.dayShortNames=["S\xf8n","Man","Tir","Ons","Tor","Fre","L\xf8r"],n.monthNames=["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],n.monthShortNames=["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],n}return Object(r.b)(t,e),t.prototype.onChange=function(e){var t=this.question.valueSetter?this.question.valueSetter(e):e,n=this.control;this.question.overrideValueSetterControl&&(n=this.form.get(this.question.overrideValueSetterControl)),n.setValue(t),n.markAsDirty()},t.prototype.onQuestionChanges=function(t){e.prototype.onQuestionChanges.call(this,t),this.value$=this.control.valueChanges.pipe(Object(a.a)(this.control.value)),this.min$=this.setMinMax(t,"min"),this.max$=this.setMinMax(t,"max")},t.prototype.setMinMax=function(e,t){if(e){var n=Object(i.a)(e[t]);return"object"==typeof e[t]&&(n=Object(s.a)(e[t],this.form)),n.pipe(Object(o.a)((function(e){return null!=e})))}},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](u.a))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["app-ion-date-question"]],features:[l["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:34,consts:[[1,"w-100",3,"ngStyle","click"],[1,"w-100",2,"pointer-events","none!important",3,"color"],[4,"ngIf"],["matInput","","required","",3,"disabled","value","placeholder"],["fxHide","","cancel-text","Avbryt","done-text","Ferdig",3,"value","ionChange"],["dateTime",""]],template:function(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275reference"](10).click()})),l["\u0275\u0275elementStart"](1,"mat-form-field",1),l["\u0275\u0275template"](2,v,2,1,"mat-label",2),l["\u0275\u0275element"](3,"input",3),l["\u0275\u0275pipe"](4,"date"),l["\u0275\u0275pipe"](5,"async"),l["\u0275\u0275pipe"](6,"async"),l["\u0275\u0275template"](7,g,2,1,"mat-hint",2),l["\u0275\u0275template"](8,y,2,1,"mat-error",2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"ion-datetime",4,5),l["\u0275\u0275listener"]("ionChange",(function(e){return t.onChange(e.detail.value)})),l["\u0275\u0275pipe"](11,"async"),l["\u0275\u0275pipe"](12,"async"),l["\u0275\u0275pipe"](13,"func"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275property"]("ngStyle",l["\u0275\u0275pureFunction1"](32,b,t.control.disabled?"none":"auto")),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("color",t.question.color||"accent"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.question.label),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("disabled",t.control.disabled)("value",t.question.datePipeFormat?l["\u0275\u0275pipeBind2"](4,18,l["\u0275\u0275pipeBind1"](5,21,t.value$),t.question.datePipeFormat):l["\u0275\u0275pipeBind1"](6,23,t.value$))("placeholder",t.question.placeholder),l["\u0275\u0275attribute"]("aria-label",t.question.ariaLabel),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.question.hint),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.control.dirty&&t.control.invalid),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("value",t.control.value||l["\u0275\u0275pipeBind2"](13,29,t.question.defaultValueGetter,t.form.value)||t.question.defaultValueGetter),l["\u0275\u0275attribute"]("max",l["\u0275\u0275pipeBind1"](11,25,t.max$))("min",l["\u0275\u0275pipeBind1"](12,27,t.min$))("day-names",t.dayNames)("day-short-names",t.dayShortNames)("month-names",t.monthNames)("month-short-names",t.monthShortNames)("display-format",t.question.ionFormat)("minute-values",t.question.minuteValues))},directives:[d.n,f.c,p.c,d.m,m.a,f.b,p.g,p.f,p.b],pipes:[d.e,d.b,h.a],encapsulation:2,changeDetection:0}),t}(c.a)},sVak:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("953d");function i(e,t){void 0===e&&(e=new Date);var n=Object(r.a)(e),i=function(e){void 0===e&&(e=new Date);var t=e.getDay();return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(0==t?0:7)-t,23,59,59)}(e);return{start:t?n.toISOString():n,end:t?i.toISOString():i}}},t7j9:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("mrSG"),i=n("8Mnh"),a=n("O/YV"),o=n("Uejg"),s=n("cT5K");function u(e,t,n){var u=s.a.get(t.modelProp),d=e[t.modelProp];if(n&&(d=Object(a.a)(d,n)),!d||0==d.length)return d;var f=t.includedChildProps&&t.includedChildProps.length>0,p=t.includedForeignProps&&t.includedForeignProps.length>0,m={};p&&(m=function(e,t){var n,a,o={};try{for(var u=Object(r.e)(e),c=u.next();!c.done;c=u.next()){var l=c.value,d=s.a.get(l);o[l]=Object(i.a)(t[l],d.identifier)}}catch(f){n={error:f}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return o}(t.includedForeignProps,e));var h={};if(f&&(h=function(e,t,n){var i,a,s={};try{for(var u=Object(r.e)(e),c=u.next();!c.done;c=u.next()){var l=c.value;s[l]=Object(o.a)(n[l],t)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return s}(t.includedChildProps,u.foreignKey,e)),p||f)for(var v=0;v<d.length;v++){var g=d[v];c(t.includedForeignProps,m,g),l(t.includedChildProps,u,h,g),d[v]=g}return d}function c(e,t,n){var i,a;try{for(var o=Object(r.e)(e),u=o.next();!u.done;u=o.next()){var c=u.value,l=s.a.get(c);n[l.foreignProp]=t[c][n[l.foreignKey]]}}catch(d){i={error:d}}finally{try{u&&!u.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function l(e,t,n,i){var a,o;try{for(var s=Object(r.e)(e),u=s.next();!u.done;u=s.next()){var c=u.value;i[c]=n[c][i[t.identifier]]}}catch(l){a={error:l}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}}},y3MX:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h}));var r=n("tk/3"),i=n("LRne"),a=n("pLZG"),o=n("5+tZ"),s=n("IzEk"),u=n("lJxs"),c=n("Gil/"),l=n("DHoI"),d=n("06Nl"),f=n("fXoL"),p=n("qc5V"),m="FETCH_TIMESHEETS",h=function(){function e(e){var t=this;this.apiService=e,this.fetch$=function(e){var n,i=new r.e;return(null===(n=e.user)||void 0===n?void 0:n.userName)&&(i=i.set("UserName",e.user.userName)),e.dateRange&&(e.dateRange.start&&(i=i.set("StartDate",new Date(e.dateRange.start).getTime().toString())),e.dateRange.end&&(i=i.set("EndDate",new Date(e.dateRange.end).getTime().toString()))),e.mission&&(i=i.set("MissionId",e.mission.id.toString())),t.apiService.get("/Timesheets",i)}}return e.prototype.handle$=function(e){var t=this;return e.pipe(Object(c.a)([m]),Object(a.a)((function(e){return null!=e.action.timesheetCriteria})),Object(o.a)((function(e){return t._handle$(e.action)})))},e.prototype._handle$=function(t){var n=new l.a(t.timesheetCriteria);return console.log(t.timesheetCriteria,e.baseCriteria,n.containedIn(e.baseCriteria)),n.containedIn(e.baseCriteria)?Object(i.a)(null):(e.baseCriteria=t.timesheetCriteria,this.fetch$(t.timesheetCriteria).pipe(Object(s.a)(1),Object(u.a)((function(e){return{actionId:d.a,timesheets:e}}))))},e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275inject"](p.a))},e.\u0275prov=f["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}()}}]);
//# sourceMappingURL=14.2817481f415164277c7b.js.map
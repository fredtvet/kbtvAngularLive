(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{kvna:function(e,t,n){"use strict";n.r(t),n.d(t,"MissionModule",(function(){return Xe}));var i=n("PCNd"),o=n("DUip"),r=n("dJ3e"),a=n("mrSG"),c=n("26FU"),s=n("15JJ"),l=n("67Y/"),p=n("k5Aa"),d=n("TYT/"),u=n("ea4N"),m=n("Valr"),g=n("6tST"),f=n("h/AT"),h=n("uLXW"),v=n("K9Ia"),b=n("1eh6"),C=n("Gi3i"),x=n("ad02"),y=n("xMyE"),I=n("ny24"),S=function(e){function t(){var t=e.call(this)||this;return t.debounceTime=400,t.inputChanged=new d.EventEmitter,t.inputUpdated=new v.a,t.inputUpdated.asObservable().pipe(Object(C.a)(t.debounceTime),Object(x.a)(),Object(y.a)((function(e){return t.inputChanged.emit(e)})),Object(I.a)(t.unsubscribe)).subscribe(),t}return Object(a.b)(t,e),t.prototype.onKeyUp=function(e){this.onInputChange(e.target.value)},t.prototype.onInputChange=function(e){this.inputUpdated.next(e)},t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=d["\u0275\u0275defineDirective"]({type:t,selectors:[["","appInputListener",""]],hostBindings:function(e,t){1&e&&d["\u0275\u0275listener"]("keyup",(function(e){return t.onKeyUp(e)}))},inputs:{debounceTime:"debounceTime"},outputs:{inputChanged:"inputChanged"},features:[d["\u0275\u0275InheritDefinitionFeature"]]}),t}(b.a),O=n("pdUi"),M=n("Pohz"),_=n("XehU"),P=n("p+mS"),w=n("GsDI");function k(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p",6),d["\u0275\u0275text"](1,"Fant ingen oppdrag"),d["\u0275\u0275elementEnd"]())}var j=function(e){return["/oppdrag",e,"detaljer"]};function E(e,t){if(1&e&&d["\u0275\u0275element"](0,"app-list-card",7),2&e){var n=t.$implicit;d["\u0275\u0275property"]("endIcon",n.finished?"check":"chevron_right")("text","("+n.id+") "+n.address)("routerLink",d["\u0275\u0275pureFunction1"](3,j,n.id))}}function D(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",8),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().openMissionForm()})),d["\u0275\u0275elementStart"](1,"mat-icon"),d["\u0275\u0275text"](2,"add"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}var F=function(e,t){return[e,t]},N=function(){function e(e,t,n){var i=this;this._bottomSheet=e,this.router=t,this.route=n,this.Roles=p.f,this.missions=[],this.title="Oppdrag",this.search=new d.EventEmitter,this.onSearch=function(e){return i.search.emit(e)},this.openMissionForm=function(){return i.router.navigate(["ny"],{relativeTo:i.route})},this.trackByFn=function(e,t){return t.id}}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](f.b),d["\u0275\u0275directiveInject"](o.b),d["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-list-view"]],inputs:{missions:"missions",title:"title"},outputs:{search:"search"},decls:6,vars:7,consts:[["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","pl-2","pr-2","max-width",2,"overflow","hidden"],["appInputListener","","placeholder","S\xf8k med adresse eller id",1,"mt-2","mb-2","p-2","pl-3","mat-elevation-z2","fadeInDown",2,"background","white","border","none","border-radius","10px",3,"inputChanged"],["class","m-2",4,"ngIf"],["itemSize","60","maxBufferPx","800","minBufferPx","800","fxFlex",""],["startIcon","home_work",3,"endIcon","text","routerLink",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["mat-fab","","aria-label","ny","class","action_fab",3,"click",4,"ifRole"],[1,"m-2"],["startIcon","home_work",3,"endIcon","text","routerLink"],["mat-fab","","aria-label","ny",1,"action_fab",3,"click"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"input",1),d["\u0275\u0275listener"]("inputChanged",(function(e){return t.onSearch(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](2,k,2,0,"p",2),d["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",3),d["\u0275\u0275template"](4,E,1,5,"app-list-card",4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](5,D,3,0,"button",5)),2&e&&(d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",null==t.missions||0==t.missions.length),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("cdkVirtualForOf",t.missions)("cdkVirtualForTrackBy",t.trackByFn),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ifRole",d["\u0275\u0275pureFunction2"](4,F,t.Roles.Leder,t.Roles.Mellomleder)))},directives:[h.c,h.b,S,m.l,O.e,O.a,h.a,O.d,M.a,_.a,o.c,P.b,w.a],encapsulation:2,data:{animation:[g.a]},changeDetection:0}),e}(),R=n("RHY+");function B(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"app-mission-list-view",1),d["\u0275\u0275listener"]("search",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().searchMissionList(e)})),d["\u0275\u0275pipe"](1,"sortByDate"),d["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;d["\u0275\u0275property"]("missions",d["\u0275\u0275pipeBind3"](1,1,i.missions,null!=i.pageInfo&&i.pageInfo.historic?"lastVisited":"updatedAt","desc"))}}var L=function(){function e(e,t,n){var i=this;this.mainNavService=e,this.missionService=t,this.dialog=n,this.Roles=p.f,this.pageInfoSubject=new c.a({searchString:"",showFinishedMissions:!1,historic:!1}),this.searchMissionList=function(e){var t=Object(a.a)({},i.pageInfoSubject.value);t.searchString=e,i.pageInfoSubject.next(t)},this.toggleFinishedMissions=function(){var e=Object(a.a)({},i.pageInfoSubject.value);e.showFinishedMissions=!e.showFinishedMissions,i.pageInfoSubject.next(e);var t="check_box_outline_blank";e.showFinishedMissions&&(t="check_box");var n=i.mainNavService.getTopDefaultNavConfig();n.bottomSheetButtons[0].icon=t,i.mainNavService.addTopNavConfig({default:n})},this.toggleHistoricOrder=function(){var e=Object(a.a)({},i.pageInfoSubject.value);e.historic=!e.historic,i.pageInfoSubject.next(e);var t="color-background";e.historic&&(t="color-accent");var n=i.mainNavService.getTopDefaultNavConfig();n.buttons[0].colorClass=t,i.mainNavService.addTopNavConfig({default:n})},this.configureMainNav()}return e.prototype.ngOnInit=function(){var e=this;this.vm$=this.pageInfoSubject.pipe(Object(s.a)((function(t){return e.missionService.getBy$((function(n){return e.filterMission(n,t)})).pipe(Object(l.a)((function(e){return{missions:e,pageInfo:t}})))})))},e.prototype.filterMission=function(e,t){var n=e.finished==t.showFinishedMissions;n=n&&(!t.searchString||null==t.searchString||e.address.toLowerCase().includes(t.searchString.toLowerCase()));var i=+t.searchString;return isNaN(i)||(n=n||e.id===i),n},e.prototype.configureMainNav=function(){var e={title:"Oppdrag"};e.buttons=[{icon:"history",colorClass:"color-background",aria:"Historisk visning",callback:this.toggleHistoricOrder}],e.bottomSheetButtons=[{text:"Vis ferdige oppdrag",icon:"check_box_outline_blank",callback:this.toggleFinishedMissions}],this.mainNavService.addTopNavConfig({default:e})},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](r.o),d["\u0275\u0275directiveInject"](r.s),d["\u0275\u0275directiveInject"](u.b))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-list"]],decls:3,vars:3,consts:[[3,"missions","search",4,"ngIf"],[3,"missions","search"]],template:function(e,t){1&e&&(d["\u0275\u0275template"](0,B,2,5,"app-mission-list-view",0),d["\u0275\u0275pipe"](1,"async"),d["\u0275\u0275element"](2,"router-outlet")),2&e&&d["\u0275\u0275property"]("ngIf",d["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[m.l,o.g,N],pipes:[m.b,R.a],encapsulation:2,changeDetection:0}),e}(),V=n("1ua0"),$=n("VnD/"),T=n("dzgT"),U=n("aBAV"),A=n("MqYC"),H=function(e){return["/oppdrag",e,"bilder"]},z=function(e){return["/oppdrag",e,"dokumenter"]},q=function(e){return["/oppdrag",e,"notater"]};function X(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",1),d["\u0275\u0275elementStart"](1,"mat-grid-list",2),d["\u0275\u0275elementStart"](2,"a",3),d["\u0275\u0275elementStart"](3,"mat-grid-tile",4),d["\u0275\u0275elementStart"](4,"span",5),d["\u0275\u0275elementStart"](5,"mat-icon",6),d["\u0275\u0275text"](6,"phone"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](7,"br"),d["\u0275\u0275elementStart"](8,"span"),d["\u0275\u0275text"](9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"a",7),d["\u0275\u0275elementStart"](11,"mat-grid-tile",4),d["\u0275\u0275elementStart"](12,"span",5),d["\u0275\u0275elementStart"](13,"mat-icon",6),d["\u0275\u0275text"](14,"directions_car"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](15,"br"),d["\u0275\u0275elementStart"](16,"span"),d["\u0275\u0275text"](17,"Veibeskrivelse"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](18,"app-list-card",8),d["\u0275\u0275element"](19,"app-list-card",9),d["\u0275\u0275element"](20,"app-list-card",10),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](2),d["\u0275\u0275propertyInterpolate1"]("href","tel:",n.vm.mission.phoneNumber,"",d["\u0275\u0275sanitizeUrl"]),d["\u0275\u0275advance"](7),d["\u0275\u0275textInterpolate1"]("",n.vm.mission.phoneNumber||"N/A"," "),d["\u0275\u0275advance"](1),d["\u0275\u0275propertyInterpolate1"]("href","https://www.google.com/maps/dir/?api=1&destination=",n.vm.mission.address,"&travelmode=driving",d["\u0275\u0275sanitizeUrl"]),d["\u0275\u0275advance"](8),d["\u0275\u0275property"]("routerLink",d["\u0275\u0275pureFunction1"](6,H,n.vm.mission.id)),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("routerLink",d["\u0275\u0275pureFunction1"](8,z,n.vm.mission.id)),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("routerLink",d["\u0275\u0275pureFunction1"](10,q,n.vm.mission.id))}}var Q=function(){function e(){this.Roles=p.f}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-details-view"]],inputs:{vm:"vm"},decls:1,vars:1,consts:[["class","p-2 max-width",4,"ngIf"],[1,"p-2","max-width"],["cols","2","rowHeight","3:2","gutterSize","5",1,"mat-subheading-2","mb-2"],[3,"href"],["matRipple","",1,"mat-elevation-z2","bg-foreground"],[1,"text-center"],[1,"scale-150"],["target","_blank",3,"href"],["text","Bilder","startIcon","photo_library",3,"routerLink"],["text","Dokumenter","startIcon","folder",3,"routerLink"],["text","Notater","startIcon","rate_review",3,"routerLink"]],template:function(e,t){1&e&&d["\u0275\u0275template"](0,X,21,12,"div",0),2&e&&d["\u0275\u0275property"]("ngIf",t.vm)},directives:[m.l,U.a,U.c,A.n,w.a,_.a,o.c],encapsulation:2,changeDetection:0}),e}();function J(e,t){1&e&&d["\u0275\u0275element"](0,"app-mission-details-view",1),2&e&&d["\u0275\u0275property"]("vm",t.$implicit)}var G=function(){function e(e,t,n,i,o,r,a,c,s){var l=this;this.mainNavService=e,this.missionService=t,this.missionImageService=n,this.missionDocumentService=i,this.missionNoteService=o,this.notificationService=r,this.route=a,this.router=c,this.dialog=s,this.RolePresets=p.e,this.Roles=p.f,this.uploadImages=function(e){l.missionImageService.addImages$(e.missionId,e.files).subscribe((function(e){return l.notificationService.setNotification("Vellykket! "+e.length+" "+(e.length>1?"bilder":"bilde")+" lastet opp.")}))},this.deleteMission=function(e){l.onBack(),l.missionService.delete$(e).pipe(Object($.a)((function(e){return e}))).subscribe((function(e){return l.notificationService.setNotification("Vellykket! Oppdrag slettet.")}))},this.openMissionForm=function(e){return l.router.navigate(["rediger"],{relativeTo:l.route,queryParams:{idPreset:e}})},this.openDeleteMissionDialog=function(e){l.dialog.open(V.a,{data:"Bekreft at du \xf8nsker \xe5 slette oppdraget."}).afterClosed().pipe(Object($.a)((function(e){return e}))).subscribe((function(t){return l.deleteMission(e)}))},this.goToTimesheets=function(e){return l.router.navigate(["timer/liste",{returnRoute:l.router.url,missionId:JSON.stringify(e)}])},this.onBack=function(){return l.router.navigate(["/oppdrag"])}}return e.prototype.ngOnInit=function(){var e=this,t=+this.route.snapshot.paramMap.get("id"),n=this.missionService.getDetails$(t),i=this.missionImageService.getByMissionId$(t).pipe(Object(l.a)((function(e){return e.length}))),o=this.missionDocumentService.getByMissionId$(t).pipe(Object(l.a)((function(e){return e.length}))),r=this.missionNoteService.getByMissionId$(t).pipe(Object(l.a)((function(e){return e.length})));this.vm$=Object(T.a)(n,i,o,r).pipe(Object(l.a)((function(e){var t=Object(a.c)(e,4);return{mission:t[0],imageCount:t[1],documentCount:t[2],noteCount:t[3]}})),Object(y.a)((function(t){return e.configureMainNav(t.mission)})))},e.prototype.configureMainNav=function(e){var t={title:e.address.split(",").filter((function(e){return"norge"!==e.toLowerCase().replace(/\s/g,"")})),subTitle:e.finished?"Oppdrag ferdig!":"",subIcon:e.finished?"check":"",imgSrc:e.imageURL,backFn:this.onBack};t.bottomSheetButtons=[{text:"Registrer timer",icon:"timer",callback:this.goToTimesheets,params:[e],allowedRoles:p.e.Internal},{text:"Rediger",icon:"edit",callback:this.openMissionForm,params:[e.id],allowedRoles:[p.f.Leder]},{text:"Slett",icon:"delete_forever",callback:this.openDeleteMissionDialog,params:[e.id],allowedRoles:[p.f.Leder]}],this.mainNavService.addTopNavConfig({detail:t})},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](r.o),d["\u0275\u0275directiveInject"](r.s),d["\u0275\u0275directiveInject"](r.q),d["\u0275\u0275directiveInject"](r.p),d["\u0275\u0275directiveInject"](r.r),d["\u0275\u0275directiveInject"](r.v),d["\u0275\u0275directiveInject"](o.a),d["\u0275\u0275directiveInject"](o.b),d["\u0275\u0275directiveInject"](u.b))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-details"]],decls:3,vars:3,consts:[[3,"vm",4,"ngIf"],[3,"vm"]],template:function(e,t){1&e&&(d["\u0275\u0275template"](0,J,1,1,"app-mission-details-view",0),d["\u0275\u0275pipe"](1,"async"),d["\u0275\u0275element"](2,"router-outlet")),2&e&&d["\u0275\u0275property"]("ngIf",d["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[m.l,o.g,Q],pipes:[m.b],encapsulation:2,changeDetection:0}),e}(),W=n("9tSM"),Y=n("H5r2"),K=function(){function e(e,t,n,i){var o=this;this._missionImageService=e,this._notificationService=t,this._bottomSheetRef=n,this.data=i,this.close=function(e){return o._bottomSheetRef.dismiss(e)},this.mailImages=function(e){return o._missionImageService.mailImages$(e,o.data.ids).subscribe((function(e){o.close(!0),o._notificationService.setNotification("Vellykket! "+o.data.ids.length+" "+(o.data.ids.length>1?"bilder":"bilde")+" sendt")}))}}return e.prototype.ngOnInit=function(){this.navConfig={title:"Send bilder",leftBtn:{icon:"close",callback:this.close}}},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](r.q),d["\u0275\u0275directiveInject"](r.v),d["\u0275\u0275directiveInject"](f.d),d["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mail-image-sheet"]],decls:2,vars:2,consts:[[3,"config"],[3,"toEmailPreset","formSubmitted"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"app-simple-top-nav",0),d["\u0275\u0275elementStart"](1,"app-mail-to-form",1),d["\u0275\u0275listener"]("formSubmitted",(function(e){return t.mailImages(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275property"]("config",t.navConfig),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("toEmailPreset",t.data.toEmailPreset))},directives:[W.a,Y.a],encapsulation:2,changeDetection:0}),e}(),Z=n("2WDa"),ee=n("/Ioa"),te=n("FfOm");function ne(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"img",7),d["\u0275\u0275listener"]("tap",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"]();return e.toolbarHidden=!e.toolbarHidden}))("swiperight",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().previousImage()}))("swipeleft",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().nextImage()})),d["\u0275\u0275elementEnd"]()}if(2&e){var i=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("src",i.currentImage.fileURL,d["\u0275\u0275sanitizeUrl"])}}var ie=function(){function e(e){var t=this;this.bottomSheet=e,this.toolbarHidden=!1,this.imageDeleted=new d.EventEmitter,this.currentImageChanged=new d.EventEmitter,this.close=new d.EventEmitter,this.finished=function(){return t.close.emit()},this.openBottomSheet=function(){return t.bottomSheet.open(ee.a,{data:t.actions})}}return e.prototype.ngOnInit=function(){var e=this;this.currentImage&&(this.index=this.images.findIndex((function(t){return t.id==e.currentImage.id})))},e.prototype.changeCurrentImage=function(e){this.currentImage=e,this.currentImageChanged.emit(e)},e.prototype.nextImage=function(){if(this.index>=this.images.length-1)return null;this.index++,this.changeCurrentImage(this.images[this.index])},e.prototype.previousImage=function(){if(this.index<=0)return null;this.index--,this.changeCurrentImage(this.images[this.index])},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](f.b))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-image-viewer"]],inputs:{images:"images",currentImage:"currentImage",actions:"actions"},outputs:{imageDeleted:"imageDeleted",currentImageChanged:"currentImageChanged",close:"close"},decls:12,vars:5,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"toolbar-slim","image-toolbar","color-accent"],["imageToolBar",""],["mat-icon-button","","aria-label","Lukk",3,"click"],[1,"scale-150"],["mat-icon-button","",3,"click"],["layout-fill","",3,"src","tap","swiperight","swipeleft",4,"ngIf"],[1,"page_counter"],["layout-fill","",3,"src","tap","swiperight","swipeleft"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"mat-toolbar",0,1),d["\u0275\u0275elementStart"](2,"button",2),d["\u0275\u0275listener"]("click",(function(){return t.finished()})),d["\u0275\u0275elementStart"](3,"mat-icon",3),d["\u0275\u0275text"](4,"chevron_left"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"button",4),d["\u0275\u0275listener"]("click",(function(){return t.openBottomSheet()})),d["\u0275\u0275elementStart"](6,"mat-icon"),d["\u0275\u0275text"](7,"more_vert"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](8,ne,1,1,"img",5),d["\u0275\u0275elementStart"](9,"div",6),d["\u0275\u0275elementStart"](10,"h5"),d["\u0275\u0275text"](11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275property"]("@showHideToolbar",t.toolbarHidden?"hide":"show"),d["\u0275\u0275advance"](8),d["\u0275\u0275property"]("ngIf",t.currentImage),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("@showHideCounter",t.toolbarHidden?"hide":"show"),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate2"]("",t.index+1," / ",t.images.length,""))},directives:[te.a,h.c,h.b,P.b,w.a,m.l],styles:[".m-0[_ngcontent-%COMP%]{margin:0}.mt-0[_ngcontent-%COMP%]{margin-top:0}.ml-0[_ngcontent-%COMP%]{margin-left:0}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mb-0[_ngcontent-%COMP%]{margin-bottom:0}.m-1[_ngcontent-%COMP%]{margin:4px}.mt-1[_ngcontent-%COMP%]{margin-top:4px}.ml-1[_ngcontent-%COMP%]{margin-left:4px}.mr-1[_ngcontent-%COMP%]{margin-right:4px}.mb-1[_ngcontent-%COMP%]{margin-bottom:4px}.m-2[_ngcontent-%COMP%]{margin:8px}.mt-2[_ngcontent-%COMP%]{margin-top:8px}.ml-2[_ngcontent-%COMP%]{margin-left:8px}.mr-2[_ngcontent-%COMP%]{margin-right:8px}.mb-2[_ngcontent-%COMP%]{margin-bottom:8px}.m-3[_ngcontent-%COMP%]{margin:12px}.mt-3[_ngcontent-%COMP%]{margin-top:12px}.ml-3[_ngcontent-%COMP%]{margin-left:12px}.mr-3[_ngcontent-%COMP%]{margin-right:12px}.mb-3[_ngcontent-%COMP%]{margin-bottom:12px}.m-4[_ngcontent-%COMP%]{margin:16px}.mt-4[_ngcontent-%COMP%]{margin-top:16px}.ml-4[_ngcontent-%COMP%]{margin-left:16px}.mr-4[_ngcontent-%COMP%]{margin-right:16px}.mb-4[_ngcontent-%COMP%]{margin-bottom:16px}.m-5[_ngcontent-%COMP%]{margin:20px}.mt-5[_ngcontent-%COMP%]{margin-top:20px}.ml-5[_ngcontent-%COMP%]{margin-left:20px}.mr-5[_ngcontent-%COMP%]{margin-right:20px}.mb-5[_ngcontent-%COMP%]{margin-bottom:20px}.m-6[_ngcontent-%COMP%]{margin:24px}.mt-6[_ngcontent-%COMP%]{margin-top:24px}.ml-6[_ngcontent-%COMP%]{margin-left:24px}.mr-6[_ngcontent-%COMP%]{margin-right:24px}.mb-6[_ngcontent-%COMP%]{margin-bottom:24px}.m-auto[_ngcontent-%COMP%]{margin:auto}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.mr-auto[_ngcontent-%COMP%]{margin-right:auto}.mb-auto[_ngcontent-%COMP%]{margin-bottom:auto}.p-0[_ngcontent-%COMP%]{padding:0}.pt-0[_ngcontent-%COMP%]{padding-top:0}.pl-0[_ngcontent-%COMP%]{padding-left:0}.pr-0[_ngcontent-%COMP%]{padding-right:0}.pb-0[_ngcontent-%COMP%]{padding-bottom:0}.p-1[_ngcontent-%COMP%]{padding:4px}.pt-1[_ngcontent-%COMP%]{padding-top:4px}.pl-1[_ngcontent-%COMP%]{padding-left:4px}.pr-1[_ngcontent-%COMP%]{padding-right:4px}.pb-1[_ngcontent-%COMP%]{padding-bottom:4px}.p-2[_ngcontent-%COMP%]{padding:8px}.pt-2[_ngcontent-%COMP%]{padding-top:8px}.pl-2[_ngcontent-%COMP%]{padding-left:8px}.pr-2[_ngcontent-%COMP%]{padding-right:8px}.pb-2[_ngcontent-%COMP%]{padding-bottom:8px}.p-3[_ngcontent-%COMP%]{padding:12px}.pt-3[_ngcontent-%COMP%]{padding-top:12px}.pl-3[_ngcontent-%COMP%]{padding-left:12px}.pr-3[_ngcontent-%COMP%]{padding-right:12px}.pb-3[_ngcontent-%COMP%]{padding-bottom:12px}.p-4[_ngcontent-%COMP%]{padding:16px}.pt-4[_ngcontent-%COMP%]{padding-top:16px}.pl-4[_ngcontent-%COMP%]{padding-left:16px}.pr-4[_ngcontent-%COMP%]{padding-right:16px}.pb-4[_ngcontent-%COMP%]{padding-bottom:16px}.p-5[_ngcontent-%COMP%]{padding:20px}.pt-5[_ngcontent-%COMP%]{padding-top:20px}.pl-5[_ngcontent-%COMP%]{padding-left:20px}.pr-5[_ngcontent-%COMP%]{padding-right:20px}.pb-5[_ngcontent-%COMP%]{padding-bottom:20px}.p-6[_ngcontent-%COMP%]{padding:24px}.pt-6[_ngcontent-%COMP%]{padding-top:24px}.pl-6[_ngcontent-%COMP%]{padding-left:24px}.pr-6[_ngcontent-%COMP%]{padding-right:24px}.pb-6[_ngcontent-%COMP%]{padding-bottom:24px}.p-auto[_ngcontent-%COMP%]{padding:auto}.pt-auto[_ngcontent-%COMP%]{padding-top:auto}.pl-auto[_ngcontent-%COMP%]{padding-left:auto}.pr-auto[_ngcontent-%COMP%]{padding-right:auto}.pb-auto[_ngcontent-%COMP%]{padding-bottom:auto}img[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;transform:translatex(calc(50vw - 50%)) translatey(calc(50vh - 50%))}.top_left_fab[_ngcontent-%COMP%]{position:absolute;left:8px}.top_right_fab[_ngcontent-%COMP%]{position:absolute;right:8px}.image-toolbar[_ngcontent-%COMP%]{position:absolute;left:0;z-index:2;overflow:hidden;background:transparent!important}.page_counter[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:0;text-align:center;color:#fff;opacity:.5}"],data:{animation:[Object(Z.p)("showHideToolbar",[Object(Z.m)("show",Object(Z.n)({top:"0px"})),Object(Z.m)("hide",Object(Z.n)({top:"-56px"})),Object(Z.o)("show => hide",[Object(Z.e)(".1s ease-out")]),Object(Z.o)("hide => show",[Object(Z.e)(".1s ease-in")])]),Object(Z.p)("showHideCounter",[Object(Z.m)("show",Object(Z.n)({bottom:"0px"})),Object(Z.m)("hide",Object(Z.n)({bottom:"-56px"})),Object(Z.o)("show => hide",[Object(Z.e)(".1s ease-out")]),Object(Z.o)("hide => show",[Object(Z.e)(".1s ease-in")])])]},changeDetection:0}),e}(),oe=function(){function e(e,t,n,i,o){var r=this;this.dialog=e,this.downloaderService=t,this.missionImageService=n,this.dialogRef=i,this.data=o,this.deleteImage=function(e){return r.missionImageService.delete$(e).subscribe((function(e){return r.dialogRef.close()}))},this.close=function(){return r.dialogRef.close()},this.deleteCurrentImage=function(){return r.missionImageService.delete$(r.data.currentImage.id).subscribe((function(e){return r.dialogRef.close()}))},this.downloadImage=function(){return r.downloaderService.downloadUrl(r.data.currentImage.fileURL)},this.downloadImages=function(){return r.downloaderService.downloadUrls(r.data.images.map((function(e){return e.fileURL})))},this.openConfirmDeleteDialog=function(){r.dialog.open(V.a,{data:"Bekreft at du \xf8nsker \xe5 slette bildet."}).afterClosed().pipe(Object($.a)((function(e){return e}))).subscribe((function(e){return r.deleteCurrentImage()}))}}return e.prototype.ngOnInit=function(){this.actions=[{text:"Last ned bilde",icon:"cloud_download",callback:this.downloadImage},{text:"Last ned alle",icon:"cloud_download",callback:this.downloadImages},{text:"Slett bilde",icon:"delete",callback:this.openConfirmDeleteDialog,allowedRoles:[p.f.Leder]}]},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](u.b),d["\u0275\u0275directiveInject"](r.j),d["\u0275\u0275directiveInject"](r.q),d["\u0275\u0275directiveInject"](u.e),d["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-card-dialog-wrapper"]],decls:1,vars:3,consts:[[3,"images","currentImage","actions","imageDeleted","currentImageChanged","close"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"app-image-viewer",0),d["\u0275\u0275listener"]("imageDeleted",(function(e){return t.deleteImage(e)}))("currentImageChanged",(function(e){return t.data.currentImage=e}))("close",(function(){return t.close()})),d["\u0275\u0275elementEnd"]()),2&e&&d["\u0275\u0275property"]("images",t.data.images)("currentImage",t.data.currentImage)("actions",t.actions)},directives:[ie],encapsulation:2,changeDetection:0}),e}(),re=function(e){function t(){var t=e.call(this)||this;return t.selectedIdsSubject=new c.a([]),t.selectedIds$=t.selectedIdsSubject.asObservable(),t.entitiesSubject=new c.a([]),t.entities$=t.entitiesSubject.asObservable(),t.selectableEntities$=Object(T.a)(t.entities$,t.selectedIds$).pipe(Object(l.a)((function(e){var n=Object(a.c)(e,2);return t.getSelectableEntities(n[0],n[1])}))),t.isEntitySelected=function(e){return t.selectedIdsSubject.value.includes(e)},t}return Object(a.b)(t,e),Object.defineProperty(t.prototype,"entities",{get:function(){return Object(a.d)(this.entitiesSubject.value)},enumerable:!0,configurable:!0}),t.prototype.addEntities=function(e){this.entitiesSubject.next(e)},t.prototype.addSelections=function(e){this.selectedIdsSubject.next(e)},t.prototype.toggleEntity=function(e){var t=Object(a.d)(this.selectedIdsSubject.value),n=t.findIndex((function(t){return t==e}));-1==n?t.push(e):t.splice(n,1),this.selectedIdsSubject.next(t)},t.prototype.getSelectableEntities=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=t.includes(e[i].id);n.push({entity:e[i],selected:o})}return n},t.\u0275prov=d["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac=function(e){return new(e||t)}}),t}(b.a),ae=n("0mNj"),ce=function(e){function t(t){var n=e.call(this)||this;return n.selectableListPresenter=t,n.selectionChanged=new d.EventEmitter,n.selectableEntities$=n.selectableListPresenter.selectableEntities$,n.clearSelections=function(){return n.selectableListPresenter.addSelections([])},n}return Object(a.b)(t,e),Object.defineProperty(t.prototype,"entities",{set:function(e){this.selectableListPresenter.addEntities(e)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.selectableListPresenter.selectedIds$.pipe(Object(ae.a)(1),Object(I.a)(this.unsubscribe)).subscribe((function(t){return e.selectionChanged.emit(t)}))},t.prototype.toggleSelect=function(e){this.selectableListPresenter.toggleEntity(e.entity.id)},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](re))},t.\u0275dir=d["\u0275\u0275defineDirective"]({type:t,inputs:{entities:"entities"},outputs:{selectionChanged:"selectionChanged"},features:[d["\u0275\u0275InheritDefinitionFeature"]]}),t}(b.a),se=["*"],le=function(){function e(){var e=this;this.isSelected=!1,this.selected=new d.EventEmitter,this.toggleSelection=function(){e.isSelected=!e.isSelected,e.selected.emit(e.isSelected)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-selectable-card"]],inputs:{selectedText:"selectedText",selectedIcon:"selectedIcon",isSelected:"isSelected"},outputs:{selected:"selected"},ngContentSelectors:se,decls:7,vars:4,consts:[["matRipple","",1,"container",3,"press"],["fxLayout","column","fxLayoutAlign","center center",1,"overlay"],[1,"mat-body-strong"]],template:function(e,t){1&e&&(d["\u0275\u0275projectionDef"](),d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275listener"]("press",(function(){return t.toggleSelection()})),d["\u0275\u0275projection"](1),d["\u0275\u0275elementStart"](2,"div",1),d["\u0275\u0275elementStart"](3,"mat-icon"),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"span",2),d["\u0275\u0275text"](6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](2),d["\u0275\u0275styleProp"]("opacity",t.isSelected?.65:0),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](t.selectedIcon),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](t.selectedText))},directives:[A.n,h.c,h.b,w.a],styles:[".m-0[_ngcontent-%COMP%]{margin:0}.mt-0[_ngcontent-%COMP%]{margin-top:0}.ml-0[_ngcontent-%COMP%]{margin-left:0}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mb-0[_ngcontent-%COMP%]{margin-bottom:0}.m-1[_ngcontent-%COMP%]{margin:4px}.mt-1[_ngcontent-%COMP%]{margin-top:4px}.ml-1[_ngcontent-%COMP%]{margin-left:4px}.mr-1[_ngcontent-%COMP%]{margin-right:4px}.mb-1[_ngcontent-%COMP%]{margin-bottom:4px}.m-2[_ngcontent-%COMP%]{margin:8px}.mt-2[_ngcontent-%COMP%]{margin-top:8px}.ml-2[_ngcontent-%COMP%]{margin-left:8px}.mr-2[_ngcontent-%COMP%]{margin-right:8px}.mb-2[_ngcontent-%COMP%]{margin-bottom:8px}.m-3[_ngcontent-%COMP%]{margin:12px}.mt-3[_ngcontent-%COMP%]{margin-top:12px}.ml-3[_ngcontent-%COMP%]{margin-left:12px}.mr-3[_ngcontent-%COMP%]{margin-right:12px}.mb-3[_ngcontent-%COMP%]{margin-bottom:12px}.m-4[_ngcontent-%COMP%]{margin:16px}.mt-4[_ngcontent-%COMP%]{margin-top:16px}.ml-4[_ngcontent-%COMP%]{margin-left:16px}.mr-4[_ngcontent-%COMP%]{margin-right:16px}.mb-4[_ngcontent-%COMP%]{margin-bottom:16px}.m-5[_ngcontent-%COMP%]{margin:20px}.mt-5[_ngcontent-%COMP%]{margin-top:20px}.ml-5[_ngcontent-%COMP%]{margin-left:20px}.mr-5[_ngcontent-%COMP%]{margin-right:20px}.mb-5[_ngcontent-%COMP%]{margin-bottom:20px}.m-6[_ngcontent-%COMP%]{margin:24px}.mt-6[_ngcontent-%COMP%]{margin-top:24px}.ml-6[_ngcontent-%COMP%]{margin-left:24px}.mr-6[_ngcontent-%COMP%]{margin-right:24px}.mb-6[_ngcontent-%COMP%]{margin-bottom:24px}.m-auto[_ngcontent-%COMP%]{margin:auto}.mt-auto[_ngcontent-%COMP%]{margin-top:auto}.ml-auto[_ngcontent-%COMP%]{margin-left:auto}.mr-auto[_ngcontent-%COMP%]{margin-right:auto}.mb-auto[_ngcontent-%COMP%]{margin-bottom:auto}.p-0[_ngcontent-%COMP%]{padding:0}.pt-0[_ngcontent-%COMP%]{padding-top:0}.pl-0[_ngcontent-%COMP%]{padding-left:0}.pr-0[_ngcontent-%COMP%]{padding-right:0}.pb-0[_ngcontent-%COMP%]{padding-bottom:0}.p-1[_ngcontent-%COMP%]{padding:4px}.pt-1[_ngcontent-%COMP%]{padding-top:4px}.pl-1[_ngcontent-%COMP%]{padding-left:4px}.pr-1[_ngcontent-%COMP%]{padding-right:4px}.pb-1[_ngcontent-%COMP%]{padding-bottom:4px}.p-2[_ngcontent-%COMP%]{padding:8px}.pt-2[_ngcontent-%COMP%]{padding-top:8px}.pl-2[_ngcontent-%COMP%]{padding-left:8px}.pr-2[_ngcontent-%COMP%]{padding-right:8px}.pb-2[_ngcontent-%COMP%]{padding-bottom:8px}.p-3[_ngcontent-%COMP%]{padding:12px}.pt-3[_ngcontent-%COMP%]{padding-top:12px}.pl-3[_ngcontent-%COMP%]{padding-left:12px}.pr-3[_ngcontent-%COMP%]{padding-right:12px}.pb-3[_ngcontent-%COMP%]{padding-bottom:12px}.p-4[_ngcontent-%COMP%]{padding:16px}.pt-4[_ngcontent-%COMP%]{padding-top:16px}.pl-4[_ngcontent-%COMP%]{padding-left:16px}.pr-4[_ngcontent-%COMP%]{padding-right:16px}.pb-4[_ngcontent-%COMP%]{padding-bottom:16px}.p-5[_ngcontent-%COMP%]{padding:20px}.pt-5[_ngcontent-%COMP%]{padding-top:20px}.pl-5[_ngcontent-%COMP%]{padding-left:20px}.pr-5[_ngcontent-%COMP%]{padding-right:20px}.pb-5[_ngcontent-%COMP%]{padding-bottom:20px}.p-6[_ngcontent-%COMP%]{padding:24px}.pt-6[_ngcontent-%COMP%]{padding-top:24px}.pl-6[_ngcontent-%COMP%]{padding-left:24px}.pr-6[_ngcontent-%COMP%]{padding-right:24px}.pb-6[_ngcontent-%COMP%]{padding-bottom:24px}.p-auto[_ngcontent-%COMP%]{padding:auto}.pt-auto[_ngcontent-%COMP%]{padding-top:auto}.pl-auto[_ngcontent-%COMP%]{padding-left:auto}.pr-auto[_ngcontent-%COMP%]{padding-right:auto}.pb-auto[_ngcontent-%COMP%]{padding-bottom:auto}.container[_ngcontent-%COMP%]{position:relative;margin:1px}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;height:100%;width:100%;opacity:0;transition:.5s ease;background-color:#000;color:#fff}"],changeDetection:0}),e}(),pe=n("z9HP"),de=function(){function e(){}return e.prototype.transform=function(e,t){void 0===t&&(t=!1);for(var n=[],i=t?0:1;i<=e;i++)n.push(i);return n},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d["\u0275\u0275definePipe"]({name:"arrayFromNumber",type:e,pure:!0}),e}(),ue=function(){function e(){}return e.prototype.transform=function(e,t,n){for(var i=Math.ceil(e.length/n),o=[],r=0;r<i;r++){var a=e.slice(r*n,(r+1)*n);a.length>=t&&o.push(a[t-1])}return o},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d["\u0275\u0275definePipe"]({name:"arrayslice",type:e,pure:!0}),e}(),me=function(){function e(){}return e.prototype.transform=function(e){return e.replace(/images/gi,"thumbnails")},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d["\u0275\u0275definePipe"]({name:"thumbnail",type:e,pure:!0}),e}();function ge(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"app-selectable-card",4),d["\u0275\u0275listener"]("selected",(function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"](2).toggleSelect(e)}))("click",(function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"](2).imageClick(e.entity)})),d["\u0275\u0275element"](1,"img",5),d["\u0275\u0275pipe"](2,"thumbnail"),d["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;d["\u0275\u0275property"]("isSelected",i.selected),d["\u0275\u0275advance"](1),d["\u0275\u0275propertyInterpolate"]("src",d["\u0275\u0275pipeBind1"](2,2,i.entity.fileURL),d["\u0275\u0275sanitizeUrl"])}}function fe(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",2),d["\u0275\u0275template"](1,ge,3,4,"app-selectable-card",3),d["\u0275\u0275pipe"](2,"arrayslice"),d["\u0275\u0275pipe"](3,"async"),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",d["\u0275\u0275pipeBind3"](2,2,d["\u0275\u0275pipeBind1"](3,6,i.selectableEntities$),n,i.totalRows))("ngForTrackBy",i.trackById)}}var he=function(e){function t(t){var n=e.call(this,t)||this;return n.disableImageViewer=!1,n.totalRows=2,n.imageClicked=new d.EventEmitter,n.imageClick=function(e){n.disableImageViewer||n.selectableListPresenter.isEntitySelected(e.id)||n.imageClicked.emit(e)},n}return Object(a.b)(t,e),t.prototype.toggleSelect=function(t){var n=this;this.disableImageViewer=!0,e.prototype.toggleSelect.call(this,t),setTimeout((function(){return n.disableImageViewer=!1}),500)},t.prototype.trackById=function(e,t){return t.entity.id},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](re))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["app-image-list"]],inputs:{totalRows:"totalRows"},outputs:{imageClicked:"imageClicked"},features:[d["\u0275\u0275ProvidersFeature"]([re]),d["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[[1,"entity-row"],["class","entity-column",4,"ngFor","ngForOf"],[1,"entity-column"],["selectedText","Bilde valgt","selectedIcon","check_circle",3,"isSelected","selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["selectedText","Bilde valgt","selectedIcon","check_circle",3,"isSelected","selected","click"],["appImageErrorReloader","",1,"entity-card","fadeIn",3,"src"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275template"](1,fe,4,8,"div",1),d["\u0275\u0275pipe"](2,"arrayFromNumber"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",d["\u0275\u0275pipeBind1"](2,1,t.totalRows)))},directives:[m.k,le,pe.a],pipes:[de,ue,m.b,me],encapsulation:2,changeDetection:0}),t}(ce),ve=["imageList"];function be(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"app-image-list",5,6),d["\u0275\u0275listener"]("selectionChanged",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().currentSelections=e}))("imageClicked",(function(e){d["\u0275\u0275restoreView"](n);var i=t.$implicit;return d["\u0275\u0275nextContext"]().openImageViewer(e,i)})),d["\u0275\u0275pipe"](2,"async"),d["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("totalRows",d["\u0275\u0275pipeBind1"](2,2,o.isXs$)?2:4)("entities",i)}}function Ce(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275elementStart"](1,"button",8),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](2);return e.openMailImageSheet(e.currentSelections)})),d["\u0275\u0275elementStart"](2,"mat-icon"),d["\u0275\u0275text"](3,"send"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"button",9),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](2);return e.openConfirmDeleteDialog(e.currentSelections)})),d["\u0275\u0275elementStart"](5,"mat-icon"),d["\u0275\u0275text"](6,"delete_forever"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()}}function xe(e,t){if(1&e&&(d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275template"](1,Ce,7,0,"ng-container",7),d["\u0275\u0275elementContainerEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ifRole",n.RolePresets.Authority)}}function ye(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",10),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](),d["\u0275\u0275reference"](5).click()})),d["\u0275\u0275elementStart"](1,"mat-icon"),d["\u0275\u0275text"](2,"camera_enhance"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}var Ie=function(e){function t(t,n,i,o,r,a,c,s,l){var d=e.call(this)||this;return d.deviceInfoService=t,d.bottomSheet=n,d.dialog=i,d.notificationService=o,d.mainNavService=r,d.missionImageService=a,d.missionService=c,d.route=s,d.router=l,d.RolePresets=p.e,d.currentSelections=[],d.isXs$=d.deviceInfoService.isXs$,d.uploadImages=function(e){d.missionImageService.addImages$(d.missionId,e).subscribe((function(e){return d.notificationService.setNotification("Vellykket! "+e.length+" "+(e.length>1?"bilder":"bilde")+" lastet opp.")}))},d.deleteImages=function(e){d.missionImageService.deleteRange$(e).subscribe((function(t){d.imageList.clearSelections(),d.notificationService.setNotification("Vellykket! "+e.length+" "+(e.length>1?"bilder":"bilde")+" slettet.")}))},d.openConfirmDeleteDialog=function(e){d.dialog.open(V.a,{data:"Bekreft at du \xf8nsker \xe5 slette utvalgte bilder."}).afterClosed().pipe(Object($.a)((function(e){return e}))).subscribe((function(t){return d.deleteImages(e)}))},d.openMailImageSheet=function(e){d.bottomSheet.open(K,{data:{toEmailPreset:d.mission.employer?d.mission.employer.email:null,ids:e}}).afterDismissed().pipe(Object($.a)((function(e){return e}))).subscribe((function(e){return d.imageList.clearSelections()}))},d.updateMainNav=function(e){var t=d.mainNavService.getTopDefaultNavConfig();t.bottomSheetButtons=d.getBottomSheetButtons(e.map((function(e){return e.id}))),d.mainNavService.addTopNavConfig({default:t})},d.onBack=function(e){return d.router.navigate(["/oppdrag",e,"detaljer"])},d.getBottomSheetButtons=function(e){return[{icon:"send",text:"Send alle bilder",callback:d.openMailImageSheet,params:[e],allowedRoles:p.e.Authority}]},d.configureMainNav(d.missionId),d}return Object(a.b)(t,e),Object.defineProperty(t.prototype,"missionId",{get:function(){return+this.route.snapshot.paramMap.get("id")},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.images$=this.missionImageService.getByMissionId$(this.missionId).pipe(Object(y.a)(this.updateMainNav)),this.missionService.getDetails$(this.missionId).pipe(Object(I.a)(this.unsubscribe)).subscribe((function(t){return e.mission=t}))},t.prototype.openImageViewer=function(e,t){this.dialog.open(oe,{width:"100%",height:"100%",panelClass:"image_viewer_dialog",data:{currentImage:e,images:t}})},t.prototype.configureMainNav=function(e){this.mainNavService.addTopNavConfig({default:{title:"Bilder",backFn:this.onBack,backFnParams:[e]}})},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](r.h),d["\u0275\u0275directiveInject"](f.b),d["\u0275\u0275directiveInject"](u.b),d["\u0275\u0275directiveInject"](r.v),d["\u0275\u0275directiveInject"](r.o),d["\u0275\u0275directiveInject"](r.q),d["\u0275\u0275directiveInject"](r.s),d["\u0275\u0275directiveInject"](o.a),d["\u0275\u0275directiveInject"](o.b))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-image-list"]],viewQuery:function(e,t){var n;1&e&&d["\u0275\u0275viewQuery"](ve,!0),2&e&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.imageList=n.first)},features:[d["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:5,consts:[[3,"totalRows","entities","selectionChanged","imageClicked",4,"ngIf"],[4,"ngIf"],["mat-fab","","aria-label","ny","class","action_fab",3,"click",4,"ifRole"],["type","file","multiple","",2,"display","none",3,"change"],["imageInput",""],[3,"totalRows","entities","selectionChanged","imageClicked"],["imageList",""],[4,"ifRole"],["mat-fab","","aria-label","ny",1,"action_fab_2",3,"click"],["mat-fab","","aria-label","ny",1,"action_fab_3","bg-warn",3,"click"],["mat-fab","","aria-label","ny",1,"action_fab",3,"click"]],template:function(e,t){1&e&&(d["\u0275\u0275template"](0,be,3,4,"app-image-list",0),d["\u0275\u0275pipe"](1,"async"),d["\u0275\u0275template"](2,xe,2,1,"ng-container",1),d["\u0275\u0275template"](3,ye,3,0,"button",2),d["\u0275\u0275elementStart"](4,"input",3,4),d["\u0275\u0275listener"]("change",(function(e){return t.uploadImages(e.target.files)})),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275property"]("ngIf",d["\u0275\u0275pipeBind1"](1,3,t.images$)),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.currentSelections.length>0),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ifRole",t.RolePresets.Internal))},directives:[m.l,M.a,he,P.b,w.a],pipes:[m.b],encapsulation:2,changeDetection:0}),t}(b.a),Se=function(){function e(e,t,n,i){var o=this;this._missionDocumentService=e,this._notificationService=t,this._bottomSheetRef=n,this.data=i,this.close=function(e){return o._bottomSheetRef.dismiss(e)},this.mailDocuments=function(e){return o._missionDocumentService.mailDocuments$(e,o.data.ids).subscribe((function(e){o.close(!0),o._notificationService.setNotification("Vellykket! "+o.data.ids.length+" "+(o.data.ids.length>1?"dokumenter":"dokument")+" sendt")}))}}return e.prototype.ngOnInit=function(){this.navConfig={title:"Send dokumenter",leftBtn:{icon:"close",callback:this.close}}},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](r.p),d["\u0275\u0275directiveInject"](r.v),d["\u0275\u0275directiveInject"](f.d),d["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mail-document-sheet"]],decls:2,vars:2,consts:[[3,"config"],[3,"toEmailPreset","formSubmitted"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"app-simple-top-nav",0),d["\u0275\u0275elementStart"](1,"app-mail-to-form",1),d["\u0275\u0275listener"]("formSubmitted",(function(e){return t.mailDocuments(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275property"]("config",t.navConfig),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("toEmailPreset",t.data.toEmailPreset))},directives:[W.a,Y.a],encapsulation:2,changeDetection:0}),e}(),Oe=function(){function e(){}return e.prototype.transform=function(e){switch(e){case"csv":return p.c.Csv;case"pdf":return p.c.Pdf;case"jpg":case"png":return p.c.ImageFile;case"doc":case"docm":case"docx":case"dot":case"dotm":case"dotx":return p.c.Word;case"xla":case"xlam":case"xls":case"xlsb":case"xlsm":case"xlsx":case"xlt":case"xlw":return p.c.Excel;default:return p.c.DefaultFile}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d["\u0275\u0275definePipe"]({name:"fileiconFromFiletype",type:e,pure:!0}),e}(),Me=function(){function e(){}return e.prototype.transform=function(e){return e.split(".").pop()},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d["\u0275\u0275definePipe"]({name:"filetypeFromUrl",type:e,pure:!0}),e}();function _e(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"app-selectable-card",4),d["\u0275\u0275listener"]("selected",(function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"](2).toggleSelect(e)}))("click",(function(){d["\u0275\u0275restoreView"](n);var e=t.$implicit;return d["\u0275\u0275nextContext"](2).documentClick(e.entity)})),d["\u0275\u0275elementStart"](1,"div",5),d["\u0275\u0275element"](2,"mat-icon",6),d["\u0275\u0275pipe"](3,"fileiconFromFiletype"),d["\u0275\u0275pipe"](4,"filetypeFromUrl"),d["\u0275\u0275elementStart"](5,"div"),d["\u0275\u0275text"](6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"div",7),d["\u0275\u0275text"](8),d["\u0275\u0275pipe"](9,"uppercase"),d["\u0275\u0275pipe"](10,"filetypeFromUrl"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"div",7),d["\u0275\u0275text"](12,"Lastet opp 21.mai 2020"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;d["\u0275\u0275property"]("isSelected",i.selected),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("svgIcon",d["\u0275\u0275pipeBind1"](3,4,d["\u0275\u0275pipeBind1"](4,6,i.entity.fileURL))),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](null==i.entity.documentType?null:i.entity.documentType.name),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"]("Filtype: ",d["\u0275\u0275pipeBind1"](9,8,d["\u0275\u0275pipeBind1"](10,10,i.entity.fileURL)),"")}}function Pe(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",2),d["\u0275\u0275template"](1,_e,13,12,"app-selectable-card",3),d["\u0275\u0275pipe"](2,"arrayslice"),d["\u0275\u0275pipe"](3,"async"),d["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",d["\u0275\u0275pipeBind3"](2,2,d["\u0275\u0275pipeBind1"](3,6,i.selectableEntities$),n,i.totalRows))("ngForTrackBy",i.trackById)}}var we=function(e){function t(t){var n=e.call(this,t)||this;return n.totalRows=2,n.documentClicked=new d.EventEmitter,n}return Object(a.b)(t,e),t.prototype.toggleSelect=function(t){var n=this;this.clickDisabled=!0,e.prototype.toggleSelect.call(this,t),setTimeout((function(){return n.clickDisabled=!1}),500)},t.prototype.documentClick=function(e){this.clickDisabled||this.selectableListPresenter.isEntitySelected(e.id)||this.documentClicked.emit(e)},t.prototype.trackById=function(e,t){return t.entity.id},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](re))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["app-document-list"]],inputs:{totalRows:"totalRows"},outputs:{documentClicked:"documentClicked"},features:[d["\u0275\u0275ProvidersFeature"]([re]),d["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[[1,"entity-row"],["class","entity-column",4,"ngFor","ngForOf"],[1,"entity-column"],["selectedText","Dokument valgt","selectedIcon","check_circle",3,"isSelected","selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["selectedText","Dokument valgt","selectedIcon","check_circle",3,"isSelected","selected","click"],[1,"bg-foreground","text-center","mat-elevation-z2","p-2","pt-6","pb-6","m-1","fadeIn"],[1,"scale-150","mb-2",3,"svgIcon"],[1,"mat-caption"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275template"](1,Pe,4,8,"div",1),d["\u0275\u0275pipe"](2,"arrayFromNumber"),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",d["\u0275\u0275pipeBind1"](2,1,t.totalRows)))},directives:[m.k,le,w.a],pipes:[de,ue,m.b,Oe,Me,m.t],encapsulation:2}),t}(ce),ke=["documentList"];function je(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"app-document-list",3,4),d["\u0275\u0275listener"]("selectionChanged",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().currentSelections=e}))("documentClicked",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().downloadDocument(e)})),d["\u0275\u0275pipe"](2,"async"),d["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("totalRows",d["\u0275\u0275pipeBind1"](2,2,o.isXs$)?2:4)("entities",i)}}function Ee(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275elementStart"](1,"button",6),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](2);return e.openMailDocumentSheet(e.currentSelections)})),d["\u0275\u0275elementStart"](2,"mat-icon"),d["\u0275\u0275text"](3,"send"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"button",7),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](2);return e.openConfirmDeleteDialog(e.currentSelections)})),d["\u0275\u0275elementStart"](5,"mat-icon"),d["\u0275\u0275text"](6,"delete_forever"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()}}var De=function(e){return[e]};function Fe(e,t){if(1&e&&(d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275template"](1,Ee,7,0,"ng-container",5),d["\u0275\u0275elementContainerEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ifRole",d["\u0275\u0275pureFunction1"](1,De,n.Roles.Leder))}}function Ne(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",8),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().openDocumentForm()})),d["\u0275\u0275elementStart"](1,"mat-icon"),d["\u0275\u0275text"](2,"note_add"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}var Re=function(e){function t(t,n,i,o,r,a,c,s,l,d,u){var m=e.call(this)||this;return m.deviceInfoService=t,m.bottomSheet=n,m.downloaderService=i,m.missionDocumentService=o,m.documentTypeService=r,m.missionService=a,m.notificationService=c,m.mainNavService=s,m.route=l,m.router=d,m.dialog=u,m.Roles=p.f,m.currentSelections=[],m.isXs$=m.deviceInfoService.isXs$,m.deleteDocuments=function(e){m.missionDocumentService.deleteRange$(e).subscribe((function(t){m.documentList.clearSelections(),m.notificationService.setNotification("Vellykket! "+e.length+" "+(e.length>1?"dokumenter":"dokument")+" slettet.")}))},m.openConfirmDeleteDialog=function(e){m.dialog.open(V.a,{data:"Bekreft at du \xf8nsker \xe5 slette utvalgte dokumenter."}).afterClosed().pipe(Object($.a)((function(e){return e}))).subscribe((function(t){return m.deleteDocuments(e)}))},m.openMailDocumentSheet=function(e){m.bottomSheet.open(Se,{data:{toEmailPreset:m.mission.employer?m.mission.employer.email:null,ids:e}}).afterDismissed().pipe(Object($.a)((function(e){return e}))).subscribe((function(e){return m.documentList.clearSelections()}))},m.openDocumentForm=function(){return m.router.navigate(["skjema"],{relativeTo:m.route,queryParams:{missionId:m.missionId}})},m.downloadDocument=function(e){return m.downloaderService.downloadUrl(e.fileURL)},m.onBack=function(e){return m.router.navigate(["/oppdrag",e,"detaljer"])},m}return Object(a.b)(t,e),Object.defineProperty(t.prototype,"missionId",{get:function(){return+this.route.snapshot.paramMap.get("id")},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.configureMainNav(this.missionId);var t=this.missionDocumentService.getByMissionId$(this.missionId),n=this.documentTypeService.getAll$();this.documentsWithType$=Object(T.a)(t,n).pipe(Object(l.a)((function(e){var t=Object(a.c)(e,2),n=t[1];return t[0].map((function(e){return e.documentType=n.find((function(t){return t.id==e.documentTypeId})),e}))}))),this.missionService.getDetails$(this.missionId).pipe(Object(I.a)(this.unsubscribe)).subscribe((function(t){return e.mission=t}))},t.prototype.configureMainNav=function(e){this.mainNavService.addTopNavConfig({default:{title:"Dokumenter",backFn:this.onBack,backFnParams:[e]}})},t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275directiveInject"](r.h),d["\u0275\u0275directiveInject"](f.b),d["\u0275\u0275directiveInject"](r.j),d["\u0275\u0275directiveInject"](r.p),d["\u0275\u0275directiveInject"](r.i),d["\u0275\u0275directiveInject"](r.s),d["\u0275\u0275directiveInject"](r.v),d["\u0275\u0275directiveInject"](r.o),d["\u0275\u0275directiveInject"](o.a),d["\u0275\u0275directiveInject"](o.b),d["\u0275\u0275directiveInject"](u.b))},t.\u0275cmp=d["\u0275\u0275defineComponent"]({type:t,selectors:[["app-mission-document-list"]],viewQuery:function(e,t){var n;1&e&&d["\u0275\u0275viewQuery"](ke,!0),2&e&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.documentList=n.first)},features:[d["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:7,consts:[[3,"totalRows","entities","selectionChanged","documentClicked",4,"ngIf"],[4,"ngIf"],["mat-fab","","aria-label","ny","class","action_fab",3,"click",4,"ifRole"],[3,"totalRows","entities","selectionChanged","documentClicked"],["documentList",""],[4,"ifRole"],["mat-fab","","aria-label","ny",1,"action_fab_2",3,"click"],["mat-fab","","aria-label","ny",1,"action_fab_3","bg-warn",3,"click"],["mat-fab","","aria-label","ny",1,"action_fab",3,"click"]],template:function(e,t){1&e&&(d["\u0275\u0275template"](0,je,3,4,"app-document-list",0),d["\u0275\u0275pipe"](1,"async"),d["\u0275\u0275template"](2,Fe,2,3,"ng-container",1),d["\u0275\u0275template"](3,Ne,3,0,"button",2),d["\u0275\u0275element"](4,"router-outlet")),2&e&&(d["\u0275\u0275property"]("ngIf",d["\u0275\u0275pipeBind1"](1,3,t.documentsWithType$)),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.currentSelections.length>0),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ifRole",d["\u0275\u0275pureFunction1"](5,De,t.Roles.Leder)))},directives:[m.l,M.a,o.g,we,P.b,w.a],pipes:[m.b],encapsulation:2}),t}(b.a),Be=n("XIAg");function Le(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",8),d["\u0275\u0275elementStart"](1,"mat-icon",9),d["\u0275\u0275text"](2,"star"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"span",10),d["\u0275\u0275text"](4,"Viktig"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}function Ve(e,t){if(1&e&&(d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275elementStart"](1,"span",6),d["\u0275\u0275text"](2),d["\u0275\u0275template"](3,Le,5,0,"span",7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()),2&e){var n=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",n.note.title," "),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.note.pinned)}}function $e(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementContainerStart"](0),d["\u0275\u0275elementStart"](1,"span"),d["\u0275\u0275elementStart"](2,"button",11),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).editNote()})),d["\u0275\u0275elementStart"](3,"mat-icon"),d["\u0275\u0275text"](4,"edit"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"button",12),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"](2).deleteNote()})),d["\u0275\u0275elementStart"](6,"mat-icon"),d["\u0275\u0275text"](7,"delete"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"]()}}function Te(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",1),d["\u0275\u0275template"](1,Ve,4,2,"ng-container",2),d["\u0275\u0275elementStart"](2,"span"),d["\u0275\u0275text"](3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](4,"mat-divider",3),d["\u0275\u0275elementStart"](5,"span",4),d["\u0275\u0275elementStart"](6,"span"),d["\u0275\u0275text"](7),d["\u0275\u0275pipe"](8,"date"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](9,$e,8,0,"ng-container",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){var n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",n.note.title||n.note.pinned),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",n.note.content," "),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate2"](" ",d["\u0275\u0275pipeBind2"](8,5,n.note.createdAt,"dd.MMM")," av ",n.note.createdBy||"Anonym"," "),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ifRole",n.RolePresets.Authority)}}var Ue=function(){function e(){var e=this;this.RolePresets=p.e,this.deleteClicked=new d.EventEmitter,this.editClicked=new d.EventEmitter,this.deleteNote=function(){return e.deleteClicked.emit(e.note.id)},this.editNote=function(){return e.editClicked.emit(e.note.id)}}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-note-card"]],inputs:{note:"note"},outputs:{deleteClicked:"deleteClicked",editClicked:"editClicked"},decls:1,vars:1,consts:[["fxLayout","column","fxLayoutAlign","space-between start","fxLayoutGap","5px","class","app-card m-1 p-2 mat-elevation-z2 fadeIn",4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-between start","fxLayoutGap","5px",1,"app-card","m-1","p-2","mat-elevation-z2","fadeIn"],[4,"ngIf"],[1,"w-100","mb-0"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],[4,"ifRole"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mat-h2","w-100"],["class","ml-auto","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"ml-auto"],["color","accent"],[1,"mat-caption","line-height-100"],["mat-icon-button","","color","primary","aria-label","Rediger notat",3,"click"],["mat-icon-button","","color","warn","aria-label","Slett notat",3,"click"]],template:function(e,t){1&e&&d["\u0275\u0275template"](0,Te,10,8,"div",0),2&e&&d["\u0275\u0275property"]("ngIf",t.note)},directives:[m.l,h.c,h.b,h.d,Be.a,M.a,w.a,P.b],pipes:[m.e],encapsulation:2}),e}();function Ae(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"app-note-card",3),d["\u0275\u0275listener"]("deleteClicked",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().openConfirmDeleteDialog(e)}))("editClicked",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().openEditNoteForm(e)})),d["\u0275\u0275elementEnd"]()}2&e&&d["\u0275\u0275property"]("note",t.$implicit)}function He(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",4),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().openCreateNoteForm()})),d["\u0275\u0275elementStart"](1,"mat-icon"),d["\u0275\u0275text"](2,"add"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}var ze=[{path:"",component:L,canActivate:[r.d],data:{animation:"MissionList"},children:[{path:"ny",loadChildren:function(){return n.e(3).then(n.bind(null,"4XuV")).then((function(e){return e.MissionFormModule}))}}]},{path:":id/detaljer",component:G,canActivate:[r.d],data:{animation:"MissionDetails"},children:[{path:"rediger",loadChildren:function(){return n.e(3).then(n.bind(null,"4XuV")).then((function(e){return e.MissionFormModule}))}}]},{path:":id/bilder",component:Ie,canActivate:[r.d],data:{animation:"MissionImages"}},{path:":id/dokumenter",component:Re,canActivate:[r.d],data:{animation:"MissionDocuments"},children:[{path:"skjema",loadChildren:function(){return n.e(11).then(n.bind(null,"PEQ5")).then((function(e){return e.MissionDocumentFormModule}))}}]},{path:":id/notater",component:function(){function e(e,t,n,i,o,r,a){var c=this;this.bottomSheet=e,this.missionNoteService=t,this.notificationService=n,this.mainNavService=i,this.route=o,this.router=r,this.dialog=a,this.RolePresets=p.e,this.deleteNote=function(e){return c.missionNoteService.delete$(e).subscribe((function(e){return c.notificationService.setNotification("Vellykket! notat slettet.")}))},this.openConfirmDeleteDialog=function(e){c.dialog.open(V.a,{data:"Bekreft at du \xf8nsker \xe5 slette notatet."}).afterClosed().pipe(Object($.a)((function(e){return e}))).subscribe((function(t){return c.deleteNote(e)}))},this.openCreateNoteForm=function(){return c.router.navigate(["skjema"],{relativeTo:c.route,queryParams:{missionId:c.missionId}})},this.openEditNoteForm=function(e){return c.router.navigate(["skjema"],{relativeTo:c.route,queryParams:{idPreset:e,missionId:c.missionId}})},this.onBack=function(e){return c.router.navigate(["/oppdrag",e,"detaljer"])}}return Object.defineProperty(e.prototype,"missionId",{get:function(){return+this.route.snapshot.paramMap.get("id")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.configureMainNav(this.missionId),this.notes$=this.missionNoteService.getByMissionId$(this.missionId)},e.prototype.configureMainNav=function(e){this.mainNavService.addTopNavConfig({default:{title:"Notater",backFn:this.onBack,backFnParams:[e]}})},e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](f.b),d["\u0275\u0275directiveInject"](r.r),d["\u0275\u0275directiveInject"](r.v),d["\u0275\u0275directiveInject"](r.o),d["\u0275\u0275directiveInject"](o.a),d["\u0275\u0275directiveInject"](o.b),d["\u0275\u0275directiveInject"](u.b))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-mission-note-list"]],decls:5,vars:4,consts:[[1,"max-width"],[3,"note","deleteClicked","editClicked",4,"ngFor","ngForOf"],["mat-fab","","aria-label","ny","class","action_fab",3,"click",4,"ifRole"],[3,"note","deleteClicked","editClicked"],["mat-fab","","aria-label","ny",1,"action_fab",3,"click"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275template"](1,Ae,1,1,"app-note-card",1),d["\u0275\u0275pipe"](2,"async"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](3,He,3,0,"button",2),d["\u0275\u0275element"](4,"router-outlet")),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",d["\u0275\u0275pipeBind1"](2,2,t.notes$)),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ifRole",t.RolePresets.Internal))},directives:[m.k,M.a,o.g,Ue,P.b,w.a],pipes:[m.b],encapsulation:2}),e}(),canActivate:[r.d],data:{animation:"MissionNotes"},children:[{path:"skjema",loadChildren:function(){return n.e(12).then(n.bind(null,"p2ue")).then((function(e){return e.MissionNoteFormModule}))}}]}],qe=function(){function e(){}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.f.forChild(ze)],o.f]}),e}(),Xe=function(){function e(){}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[m.e],imports:[[i.a,qe]]}),e}()}}]);
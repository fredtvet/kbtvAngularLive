(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"0V3p":function(e,t,n){"use strict";n.r(t),n.d(t,"TimesheetAdminModule",(function(){return te}));var i=n("DUip"),r=n("mrSG"),a=n("aVFR"),c=n("VnD/"),o=n("ny24"),s=n("67Y/"),l=n("dzgT"),p=n("1YJq"),u=n("1eh6"),m=n("TYT/"),d=n("dJ3e"),f=n("h/AT"),v=n("Valr"),h=n("uLXW"),g=n("pdUi"),w=n("2WDa"),y=n("MqYC"),b=n("qaSM"),k=n("GsDI"),x=["*"],S=function(){function e(e){var t=this;this.deviceInfoService=e,this.isSwipeActionHidden=!0,this.isXs$=this.deviceInfoService.isXs$,this.handleSwipeBtnClick=function(e,n,i){void 0===i&&(i=[]),e.preventDefault(),t.swipeEnabled&&(i&&0!=i.length||(i=t.swipeButton.params),t.isSwipeActionHidden=!0,t.handleFn(n,i))},this.handleNavClick=function(e,n){void 0===n&&(n=[]),e&&(n&&0!=n.length||(n=t.navButton.params),t.handleFn(e,n))}}return e.prototype.hideSwipeAction=function(e,t){this.swipeEnabled&&(this.isSwipeActionHidden=t)},e.prototype.handleFn=function(e,t){t?e.apply(void 0,Object(r.d)(t)):e()},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](d.i))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-swipe-card"]],inputs:{swipeButton:"swipeButton",navButton:"navButton",swipeEnabled:"swipeEnabled"},ngContentSelectors:x,decls:7,vars:6,consts:[["fxLayout","row","fxLayoutAlign","start stretch",1,"app-card","mat-elevation-z2","m-1"],["fxLayout","column","fxLayoutAlign","center center","matRipple","",2,"position","relative","width","86px!important",3,"ngClass","press"],[1,"scale-125"],["fxFlex","","matRipple","",1,"bg-foreground",2,"position","relative","z-index","1!important",3,"matRippleDisabled","click","swiperight","swipeleft"]],template:function(e,t){1&e&&(m["\u0275\u0275projectionDef"](),m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275listener"]("press",(function(e){return t.handleSwipeBtnClick(e,t.swipeButton.callback)})),m["\u0275\u0275elementStart"](2,"mat-icon",2),m["\u0275\u0275text"](3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",3),m["\u0275\u0275listener"]("click",(function(){return t.handleNavClick(null==t.navButton?null:t.navButton.callback)}))("swiperight",(function(e){return t.hideSwipeAction(e,!1)}))("swipeleft",(function(e){return t.hideSwipeAction(e,!0)})),m["\u0275\u0275pipe"](5,"async"),m["\u0275\u0275projection"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",t.swipeButton.colorClass),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](t.swipeButton.icon),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("matRippleDisabled",!t.navButton)("@showHideConfirm",m["\u0275\u0275pipeBind1"](5,4,t.isXs$)&&t.isSwipeActionHidden?"hide":"show"))},directives:[h.c,h.b,y.k,v.j,b.a,k.a,h.a],pipes:[v.b],encapsulation:2,data:{animation:[Object(w.p)("showHideConfirm",[Object(w.m)("show",Object(w.n)({marginLeft:"0px"})),Object(w.m)("hide",Object(w.n)({marginLeft:"-81px"})),Object(w.o)("show => hide",[Object(w.e)(".1s ease-out")]),Object(w.o)("hide => show",[Object(w.e)(".1s ease-in")]),Object(w.o)("void => *",Object(w.e)(0))])]},changeDetection:0}),e}(),I=n("QdsK"),C=n("+1Be"),O=n("uad8"),j=["weekList"],T=["timesheetList"],B=function(e){return{$implicit:e}};function F(e,t){if(1&e&&m["\u0275\u0275elementContainer"](0,5),2&e){var n=t.$implicit;m["\u0275\u0275nextContext"]();var i=m["\u0275\u0275reference"](3);m["\u0275\u0275property"]("ngTemplateOutlet",n.view||i)("ngTemplateOutletContext",m["\u0275\u0275pureFunction1"](2,B,n.context))}}var E=function(e,t){return{callback:e,params:t}},L=function(e){return[e]},N=function(e,t,n,i){return{callback:e,params:t,icon:n,colorClass:i}};function $(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"app-swipe-card",10),m["\u0275\u0275element"](1,"app-timesheet-summary-card-content",11),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("navButton",m["\u0275\u0275pureFunction2"](4,E,i.selectWeek,n.week))("swipeEnabled",n.openHours>0)("swipeButton",m["\u0275\u0275pureFunction4"](9,N,i.confirmTimesheets,m["\u0275\u0275pureFunction1"](7,L,n.timesheets),n.openHours>0?"lock_open":"lock",n.openHours>0?"bg-warn":"bg-success")),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("summary",n)}}function V(e,t){if(1&e&&m["\u0275\u0275elementContainer"](0,12),2&e){m["\u0275\u0275nextContext"](2);var n=m["\u0275\u0275reference"](7);m["\u0275\u0275property"]("ngTemplateOutlet",n)}}function A(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",6),m["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",7),m["\u0275\u0275template"](2,$,2,14,"app-swipe-card",8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](3,V,1,1,"ng-container",9)),2&e){var n=t.$implicit,i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("cdkVirtualForOf",n)("cdkVirtualForTrackBy",i.trackByWeek)("cdkVirtualForTemplateCacheSize",0),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==n.length)}}function R(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",16),m["\u0275\u0275elementStart"](1,"app-timesheet-card",17),m["\u0275\u0275listener"]("statusChanged",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).changeTimesheetStatus(e.id,e.status)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("timesheet",i)}}function W(e,t){if(1&e&&m["\u0275\u0275elementContainer"](0,12),2&e){m["\u0275\u0275nextContext"](2);var n=m["\u0275\u0275reference"](7);m["\u0275\u0275property"]("ngTemplateOutlet",n)}}function D(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",13),m["\u0275\u0275elementStart"](1,"cdk-virtual-scroll-viewport",14),m["\u0275\u0275template"](2,R,2,1,"div",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](3,W,1,1,"ng-container",9)),2&e){var n=t.$implicit,i=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("cdkVirtualForOf",n)("cdkVirtualForTrackBy",i.trackById),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==n.length)}}function U(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",18),m["\u0275\u0275text"](1,"Fant ingen timer!"),m["\u0275\u0275elementEnd"]())}function Y(e,t){1&e&&m["\u0275\u0275element"](0,"mat-spinner",20)}function q(e,t){if(1&e&&(m["\u0275\u0275template"](0,Y,1,0,"mat-spinner",19),m["\u0275\u0275pipe"](1,"async")),2&e){var n=m["\u0275\u0275nextContext"](),i=m["\u0275\u0275reference"](7);m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](1,2,n.loading$))("ngIfElse",i)}}var H=function(e){function t(t,n,i,r,o,s,l){var u=e.call(this)||this;return u.loadingService=t,u.timesheetService=n,u.mainNavService=i,u.route=r,u.router=o,u.dateTimeService=s,u._bottomSheet=l,u.loading$=u.loadingService.queryLoading$,u.updateUri=function(e,t){u.router.navigate(e||t?["timeadministrering",t||u.selectedUserName,e||u.selectedYear]:["timeadministrering"])},u.selectWeek=function(e){return u.router.navigate([],{relativeTo:u.route,queryParams:{week:e},queryParamsHandling:"merge"})},u.changeTimesheetStatus=function(e,t){u.timesheetService.changeStatus$(e,t).subscribe()},u.confirmTimesheets=function(e){if(e){var t=e.reduce((function(e,t){return 0==t.status&&e.push(t.id),e}),[]);0!=t.length&&u.timesheetService.changeStatuses$(t,p.j.Confirmed).subscribe()}},u.loadWeekSummaries=function(e,t){var n=new Date;n.setFullYear(e),u.timesheetService.addFilter({dateRange:u.dateTimeService.getYearRange(n),userName:t})},u.openWeekFilter=function(){u._bottomSheet.open(a.a,{data:{year:u.selectedYear,userName:u.selectedUserName}}).afterDismissed().pipe(Object(c.a)((function(e){return null!=e}))).subscribe((function(e){return u.updateUri(e.year,e.userName)}))},u.trackByWeek=function(e,t){return t.week},u.trackById=function(e,t){return t.id},u.timesheetService.addGroupBy(p.c.Week),u.configureWeekListNav(),u.initalizeObservable(),u}return Object(r.b)(t,e),Object.defineProperty(t.prototype,"selectedYear",{get:function(){return+this.route.snapshot.params.year},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedUserName",{get:function(){return this.route.snapshot.params.userName},enumerable:!0,configurable:!0}),t.prototype.initalizeObservable=function(){var e=this;this.route.params.pipe(Object(o.a)(this.unsubscribe)).subscribe((function(t){return e.loadWeekSummaries(t.year,t.userName)})),this.activeView$=Object(l.a)(this.timesheetService.timesheetSummaries$,this.route.queryParams).pipe(Object(c.a)((function(e){var t=Object(r.c)(e,2)[0];return t&&t.length>0})),Object(s.a)((function(t){var n=Object(r.c)(t,2),i=n[0],a=n[1],c={view:null,context:null};return a.week?(c.context=i.find((function(e){return e.week==a.week})).timesheets,c.view=e.timesheetList,e.configureTimesheetListNav(a.week)):(c.context=i.sort((function(e,t){return t.week-e.week})),c.view=e.weekList,e.configureWeekListNav()),c})))},t.prototype.configureWeekListNav=function(){this.mainNavService.addTopNavConfig({default:{title:"Uker",subTitle:this.selectedYear+" - "+this.selectedUserName,backFn:this.updateUri,buttons:[{icon:"filter_list",colorClass:"color-accent",callback:this.openWeekFilter}]}})},t.prototype.configureTimesheetListNav=function(e){this.mainNavService.addTopNavConfig({default:{title:"Uke "+e,subTitle:this.selectedYear+" - "+this.selectedUserName,backFn:this.selectWeek,backFnParams:[null],buttons:[{icon:"filter_list",colorClass:"color-accent",callback:this.openWeekFilter}]}})},t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275directiveInject"](d.o),m["\u0275\u0275directiveInject"](d.A),m["\u0275\u0275directiveInject"](d.p),m["\u0275\u0275directiveInject"](i.a),m["\u0275\u0275directiveInject"](i.b),m["\u0275\u0275directiveInject"](d.h),m["\u0275\u0275directiveInject"](f.b))},t.\u0275cmp=m["\u0275\u0275defineComponent"]({type:t,selectors:[["app-timesheet-admin-list"]],viewQuery:function(e,t){var n;1&e&&(m["\u0275\u0275viewQuery"](j,!0),m["\u0275\u0275viewQuery"](T,!0)),2&e&&(m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.weekList=n.first),m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.timesheetList=n.first))},features:[m["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:4,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["weekList",""],["timesheetList",""],["noContent",""],["loading",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","fadeInRight","max-width"],["itemSize","82","maxBufferPx","800","minBufferPx","800","fxFlex",""],[3,"navButton","swipeEnabled","swipeButton",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"navButton","swipeEnabled","swipeButton"],[3,"summary"],[3,"ngTemplateOutlet"],["fxLayout","column","fxLayoutAlign","start stretch",1,"h-100","fadeInRight"],["itemSize","108","maxBufferPx","800","minBufferPx","800","fxFlex",""],["class","m-1",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"m-1"],["adminView","true",3,"timesheet","statusChanged"],[1,"w-100","text-center","mt-2","mat-h3"],["class","center-spinner","color","accent",4,"ngIf","ngIfElse"],["color","accent",1,"center-spinner"]],template:function(e,t){if(1&e&&(m["\u0275\u0275template"](0,F,1,4,"ng-container",0),m["\u0275\u0275pipe"](1,"async"),m["\u0275\u0275template"](2,A,4,4,"ng-template",null,1,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275template"](4,D,4,3,"ng-template",null,2,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275template"](6,U,2,0,"ng-template",null,3,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275template"](8,q,2,4,"ng-template",null,4,m["\u0275\u0275templateRefExtractor"])),2&e){var n=m["\u0275\u0275reference"](9);m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](1,2,t.activeView$))("ngIfElse",n)}},directives:[v.l,v.q,h.c,h.b,g.e,g.a,h.a,g.d,S,I.a,C.a,O.b],pipes:[v.b],encapsulation:2,changeDetection:0}),t}(u.a),P=n("SRL/"),z=function(e,t){return["/timeadministrering",e,t]};function M(e,t){if(1&e&&m["\u0275\u0275element"](0,"app-list-card",6),2&e){var n=t.$implicit,i=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("text",n.firstName+" "+n.lastName)("routerLink",m["\u0275\u0275pureFunction2"](2,z,n.userName,i.thisYear))}}function _(e,t){if(1&e&&m["\u0275\u0275elementContainer"](0,7),2&e){m["\u0275\u0275nextContext"](2);var n=m["\u0275\u0275reference"](3);m["\u0275\u0275property"]("ngTemplateOutlet",n)}}function Q(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",3),m["\u0275\u0275template"](1,M,1,5,"app-list-card",4),m["\u0275\u0275template"](2,_,1,1,"ng-container",5),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",n),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",0==n.length)}}function J(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",8),m["\u0275\u0275text"](1,"Fant ingen ansatte!"),m["\u0275\u0275elementEnd"]())}function X(e,t){1&e&&m["\u0275\u0275element"](0,"mat-spinner",10)}function G(e,t){if(1&e&&(m["\u0275\u0275template"](0,X,1,0,"mat-spinner",9),m["\u0275\u0275pipe"](1,"async")),2&e){var n=m["\u0275\u0275nextContext"](),i=m["\u0275\u0275reference"](3);m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](1,2,n.loading$))("ngIfElse",i)}}var K=[{path:"",component:function(){function e(e,t,n){this.loadingService=e,this.mainNavService=t,this.userService=n,this.users$=this.userService.getAll$(),this.thisYear=(new Date).getFullYear(),this.loading$=this.loadingService.queryLoading$,this.configureMainNav()}return e.prototype.ngOnInit=function(){},e.prototype.configureMainNav=function(){this.mainNavService.addTopNavConfig({default:{title:"Administrer timer"}})},e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](d.o),m["\u0275\u0275directiveInject"](d.p),m["\u0275\u0275directiveInject"](d.C))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-admin-user-list"]],decls:6,vars:4,consts:[["class","p-2 max-width",4,"ngIf","ngIfElse"],["noUsers",""],["loading",""],[1,"p-2","max-width"],["startIcon","person","endIcon","chevron_right",3,"text","routerLink",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet",4,"ngIf"],["startIcon","person","endIcon","chevron_right",3,"text","routerLink"],[3,"ngTemplateOutlet"],[1,"w-100","text-center","mt-2","mat-h3"],["class","center-spinner","color","accent",4,"ngIf","ngIfElse"],["color","accent",1,"center-spinner"]],template:function(e,t){if(1&e&&(m["\u0275\u0275template"](0,Q,3,2,"div",0),m["\u0275\u0275pipe"](1,"async"),m["\u0275\u0275template"](2,J,2,0,"ng-template",null,1,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275template"](4,G,2,4,"ng-template",null,2,m["\u0275\u0275templateRefExtractor"])),2&e){var n=m["\u0275\u0275reference"](5);m["\u0275\u0275property"]("ngIf",m["\u0275\u0275pipeBind1"](1,2,t.users$))("ngIfElse",n)}},directives:[v.l,v.k,P.a,i.c,v.q,O.b],pipes:[v.b],encapsulation:2,changeDetection:0}),e}(),canActivate:[d.d],data:{allowedRoles:[p.i.Leder],page:p.a.TimesheetAdminUserList}},{path:":userName/:year",component:H,canActivate:[d.d],data:{allowedRoles:[p.i.Leder],page:p.a.TimesheetAdminList}}],Z=function(){function e(){}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(K)],i.f]}),e}(),ee=n("Ocsb"),te=function(){function e(){}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[ee.a,Z]]}),e}()}}]);
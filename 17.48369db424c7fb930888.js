(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"+wwp":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={id:"Id",name:"Navn",phonenumber:"Telefonnummer",address:"Adresse",user:"Bruker",title:"Tittel",content:"Innhold",createdat:"Opprettet",createdby:"Opprettet av",filename:"Lenke",description:"Beskrivelse",finished:"Ferdig",username:"Brukernavn",firstname:"Fornavn",lastname:"Etternavn",email:"Epost",role:"Rolle",none:"Ingen",year:"\xc5r",month:"M\xe5ned",weeknr:"Uke",week:"Uke",date:"Dato",day:"Dag",fullname:"Navn",confirmedhours:"L\xe5ste timer",openhours:"\xc5pne timer",password:"Passord",status:"Status",starttime:"Starttid",endtime:"Sluttid",totalhours:"Timer",comment:"Kommentar",timesheet:"Time",timesheetid:"Time",timesheets:"Timer",mission:"Oppdrag",missionid:"Oppdrag",missions:"Oppdrag",employer:"Oppdragsgiver",employerid:"Oppdragsgiver",employers:"Oppdragsgivere",documenttype:"Dokumenttype",documenttypeid:"Dokumenttype",documenttypes:"Dokumenttyper",missiondocument:"Dokument",missiondocumentid:"Dokument",missiondocuments:"Dokumenter",missionnote:"Notat",missionnoteId:"Notat",missionnotes:"Notater",missiontype:"Oppdragstype",missiontypeid:"Oppdragstype",missiontypes:"Oppdragstyper",inboundemailpassword:"Epostpassord",inboundemailpasswordid:"Epostpassord",inboundemailpasswords:"Epostpassord",showall:"Vis alt",currentweek:"Denne uken",currentmonth:"Denne m\xe5ned",currentyear:"I \xe5r",custommonth:"Velg m\xe5ned",custom:"Velg tid",open:"\xc5pen",confirmed:"L\xe5st"}},"67B9":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("mrSG"),i=r("fXoL"),o=["dataGrid"],a=function(){function e(){this.columnDefs=[],this.rowData=[]}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(e){this._config=e,this.initNgGrid(e)},enumerable:!1,configurable:!0}),e.prototype.autoSizeGrid=function(){var e=this.dataGrid.columnApi.getAllColumns().filter((function(e){return"checkbox"!=e.getColId()}));this.dataGrid.columnApi.autoSizeColumns(e)},e.prototype.initNgGrid=function(e){if(!(null==e?void 0:e.data)||0===e.data.length)return this.columnDefs=[],this.rowData=[],void(this.currentObject=null);var t=e.data[0];this.hasSameObjectProps(t,this.currentObject)||(this.currentObject=t,this.columnDefs=this.addColDefs(t)),this.rowData=e.data},e.prototype.hasSameObjectProps=function(e,t){var r,i,o=Object.keys(e||{});if(o.length!==Object.keys(t||{}).length)return!1;try{for(var a=Object(n.e)(o),s=a.next();!s.done;s=a.next())if(!t.hasOwnProperty(s.value))return!1}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!0},e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e,viewQuery:function(e,t){var r;1&e&&i["\u0275\u0275viewQuery"](o,!0),2&e&&i["\u0275\u0275queryRefresh"](r=i["\u0275\u0275loadQuery"]())&&(t.dataGrid=r.first)},inputs:{config:"config"}}),e}()},NlAt:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("mrSG"),i=r("8Mnh"),o=r("cT5K"),a=function(){function e(e,t,r){var i,a;this.modelProp=e,this.propConfig=o.a.get(this.modelProp);var s=null===(i=this.propConfig)||void 0===i?void 0:i.foreigns;this.includedForeignProps="all"===r?s||[]:this.getProps(r,s);var c=null===(a=this.propConfig)||void 0===a?void 0:a.children;this.includedChildProps="all"===t?c||[]:this.getProps(t,c),this.includedProps=Object(n.d)([e],this.includedChildProps,this.includedForeignProps)}return e.prototype.getProps=function(e,t){var r,o;if(!t||!(null==e?void 0:e.length))return[];var a=[],s=Object(i.a)(t);try{for(var c=Object(n.e)(e),u=c.next();!u.done;u=c.next()){var p=u.value;s[p]?a.push(p):console.error("'"+p+"' not registered as a relation in model config for '"+this.modelProp+"'")}}catch(l){r={error:l}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}return a},e}()},O9in:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="SAVE_MODEL"},QNXn:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("lJxs"),i=r("G+73"),o=r("+wwp"),a=r("Gil/"),s=r("cT5K"),c=r("O9in"),u=r("fXoL"),p=function(){function e(){}return e.prototype.handle$=function(e){var t=this;return e.pipe(Object(a.a)([c.a]),Object(n.a)((function(e){return{actionId:i.a,propagate:!0,request:t.createHttpRequest(e.action),stateSnapshot:e.stateSnapshot}})))},e.prototype.createHttpRequest=function(e){var t=s.a.get(e.stateProp);return t||console.error("No model config for property "+e.stateProp),{apiUrl:e.apiUrlOverride||this.createApiUrl(e,t),body:this.createHttpBody(e),method:this.createHttpMethod(e),cancelMessage:this.createCancelMessage(e,t)}},e.prototype.createCancelMessage=function(e,t){var r,n;return(2===e.saveAction?"Oppdatering":"Oppretting")+" av "+o.a[null===(r=t.foreignProp)||void 0===r?void 0:r.toLowerCase()].toLowerCase()+" med "+o.a[null===(n=t.displayProp)||void 0===n?void 0:n.toLowerCase()].toLowerCase()+" "+e.entity[t.displayProp]+" er reversert!"},e.prototype.createHttpBody=function(e){return e.entity},e.prototype.createApiUrl=function(e,t){return t.apiUrl+(2===e.saveAction?"/"+e.entity[t.identifier]:"")},e.prototype.createHttpMethod=function(e){return 2===e.saveAction?"PUT":"POST"},e.\u0275prov=u["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},ogwQ:function(e,t,r){"use strict";r.r(t),r.d(t,"TimesheetStatisticModule",(function(){return z}));var n=r("mrSG"),i=r("tyNb"),o=r("itXk"),a=r("lJxs"),s=r("MOy9"),c=r("iUDA"),u=r("k5Aa"),p=r("bRJ9"),l=r("m/Bn"),d=r("K+RL"),f=r("qWeu"),m=r("1G5W"),h=r("DoxI"),v=r("rmBP"),y=r("RuLz"),g=r("y3MX"),b=r("DHoI"),C="SET_GROUP_BY",O={actionId:C,reducerFn:function(e,t){return{timesheetGroupBy:t.groupBy}}},w=r("fXoL"),j=r("iI2U"),D=r("sYIv"),P=r("lvqV"),S=function(e){function t(t,r,i){var s=e.call(this)||this;return s.summaryAggregator=t,s.store=r,s.componentStore=i,s.criteria$=s.componentStore.selectProperty$("timesheetCriteria"),s.criteriaFormState$=s.store.select$(["missions","users"]).pipe(Object(a.a)((function(e){return{options:e}}))),s.groupBy$=s.componentStore.selectProperty$("timesheetGroupBy"),s.filteredTimesheets$=Object(o.a)([s.store.selectProperty$("timesheets"),s.componentStore.selectProperty$("timesheetCriteria")]).pipe(Object(y.a)(b.a),Object(a.a)((function(e){return e.records}))),s.groupedTimesheets$=Object(o.a)([s.filteredTimesheets$,s.groupBy$]).pipe(Object(a.a)((function(e){var t=Object(n.c)(e,2),r=t[0];return s.summaryAggregator.groupByType(t[1],r)||r}))),s.tableConfig$=Object(o.a)([s.groupedTimesheets$,s.store.selectProperty$("users")]).pipe(Object(a.a)((function(e){return{data:Object(h.a)(e[0],e[1])}}))),s.updateCriteria=function(e){return s.componentStore.dispatch({actionId:f.a,timesheetCriteria:e})},s.updateGroupBy=function(e){return s.componentStore.dispatch({actionId:C,groupBy:e})},s.componentStore.selectProperty$("timesheetCriteria").pipe(Object(m.a)(s.unsubscribe)).subscribe((function(e){return s.store.dispatch({actionId:g.a,timesheetCriteria:e})})),s}return Object(n.b)(t,e),Object.defineProperty(t.prototype,"criteria",{get:function(){return this.componentStore.selectProperty("timesheetCriteria")},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(w["\u0275\u0275inject"](j.a),w["\u0275\u0275inject"](D.a),w["\u0275\u0275inject"](P.a))},t.\u0275prov=w["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(Object(v.a)()),T={timesheetGroupBy:u.a.Month},k=Object(n.d)([S],l.a,[{provide:d.a,useValue:T},{provide:d.c,useValue:f.b,multi:!0},{provide:d.c,useValue:O,multi:!0}]),B=r("sNHF"),F=r("AEq6"),G=r("tYFc"),I=r("ofXK"),$=r("67B9"),N=r("+wwp"),x=function(){function e(e){var t=this;this.datePipe=e,this.convertMonthIndex=function(e){return null!=(null==e?void 0:e.value)?t.datePipe.transform((new Date).setMonth(e.value),"MMM"):void 0},this.convertDate=function(e){return(null==e?void 0:e.value)?t.datePipe.transform(e.value):void 0},this.convertTime=function(e){return(null==e?void 0:e.value)?t.datePipe.transform(e.value,"shortTime"):void 0},this.convertStatus=function(e){var t;return N.a[null===(t=u.b[e.value])||void 0===t?void 0:t.toLowerCase()]},this.summaryColDefs=[{field:"date",valueFormatter:this.convertDate},{field:"year"},{field:"month",valueFormatter:this.convertMonthIndex},{field:"weekNr"},{field:"fullName"},{field:"openHours"},{field:"confirmedHours"}],this.timesheetColDefs=[{field:"startTime",headerName:N.a.date,valueFormatter:this.convertDate},{field:"fullName"},{field:"totalHours",maxWidth:75},{field:"startTime",valueFormatter:this.convertTime},{field:"endTime",valueFormatter:this.convertTime},{field:"status",valueFormatter:this.convertStatus},{field:"missionId"},{field:"comment",maxWidth:200}]}return e.prototype.createColDefs=function(e){return this._createColDefs(e,e.confirmedHours||e.openHours?this.summaryColDefs:this.timesheetColDefs)},e.prototype._createColDefs=function(e,t){var r,i,o=[];try{for(var a=Object(n.e)(t),s=a.next();!s.done;s=a.next()){var c=s.value;null!=e[c.field]&&o.push(this.mergeDefaultColDef(c))}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o},e.prototype.mergeDefaultColDef=function(e){var t={headerName:N.a[e.field.toLowerCase()],sortable:!0};return Object(n.a)(Object(n.a)({},t),e)},e.\u0275fac=function(t){return new(t||e)(w["\u0275\u0275inject"](I.e))},e.\u0275prov=w["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}(),M=r("cWTo"),A=function(e){function t(t){var r=e.call(this)||this;return r.colDefsFactory=t,r}return Object(n.b)(t,e),t.prototype.initNgGrid=function(t){var r;if(!(null==t?void 0:t.data)||0===t.data.length)return e.prototype.initNgGrid.call(this,t);var n=t.data[0];this.isSummaryData=!(!n.confirmedHours&&!n.openHours),e.prototype.initNgGrid.call(this,t),null===(r=this.dataGrid)||void 0===r||r.api.setPinnedBottomRowData(this.isSummaryData?this.addSummaryBottomRow(t):this.addTimesheetBottomRow(t))},t.prototype.addColDefs=function(e){return this.colDefsFactory.createColDefs(e)},t.prototype.addSummaryBottomRow=function(e){for(var t=0,r=0,n=e.data.length;n--;){var i=e.data[n];t+=i.openHours,r+=i.confirmedHours}return[{openHours:Math.round(10*t)/10,confirmedHours:Math.round(10*r)/10,fullName:"Sum av timer",timesheets:[]}]},t.prototype.addTimesheetBottomRow=function(e){for(var t=0,r=e.data.length;r--;)t+=e.data[r].totalHours;return[{totalHours:Math.round(10*t)/10,fullName:"Sum av timer"}]},t.\u0275fac=function(e){return new(e||t)(w["\u0275\u0275directiveInject"](x))},t.\u0275cmp=w["\u0275\u0275defineComponent"]({type:t,selectors:[["app-timesheet-statistic-table"]],features:[w["\u0275\u0275ProvidersFeature"]([x]),w["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[["rowSelection","multiple","suppressRowClickSelection","true","suppressColumnVirtualisation","true","overlayNoRowsTemplate","Tomt",1,"ag-theme-balham","h-100",3,"rowData","columnDefs","allowContextMenuWithControlKey","modelUpdated"],["dataGrid",""]],template:function(e,t){1&e&&(w["\u0275\u0275elementStart"](0,"ag-grid-angular",0,1),w["\u0275\u0275listener"]("modelUpdated",(function(){return t.autoSizeGrid()})),w["\u0275\u0275elementEnd"]()),2&e&&w["\u0275\u0275property"]("rowData",t.rowData)("columnDefs",t.columnDefs)},directives:[M.a],encapsulation:2,changeDetection:0}),t}($.a),H=r("XiUz"),R=r("ci80"),E=r("WX+2"),L=["statTable"];function V(e,t){if(1&e&&(w["\u0275\u0275elementContainerStart"](0,4),w["\u0275\u0275element"](1,"app-main-top-nav-bar",5),w["\u0275\u0275element"](2,"app-chips-bar",6),w["\u0275\u0275element"](3,"app-chips-bar",6),w["\u0275\u0275elementContainerEnd"]()),2&e){var r=t.$implicit;w["\u0275\u0275advance"](1),w["\u0275\u0275property"]("config",r.navConfig),w["\u0275\u0275advance"](1),w["\u0275\u0275property"]("chips",r.groupByChips),w["\u0275\u0275advance"](1),w["\u0275\u0275property"]("chips",r.criteriaChips)}}var U=[{path:"",component:function(){function e(e,t,r){var i=this;this.facade=e,this.formService=t,this.chipsFactory=r,this.partialVm$=this.facade.criteria$.pipe(Object(a.a)((function(e){var t=Object(s.a)(e,{dateRangePreset:null});return{criteriaChips:i.getCriteriaChips(e,t),navConfig:i.getNavConfig(t)}}))),this.navVm$=Object(o.a)([this.facade.groupBy$.pipe(Object(a.a)((function(e){return i.getGroupByChips(e)}))),this.partialVm$]).pipe(Object(a.a)((function(e){var t=Object(n.c)(e,2),r=t[1];return r.groupByChips=t[0],r}))),this.tableConfig$=this.facade.tableConfig$,this.openTimesheetFilter=function(){i.formService.open({formConfig:Object(n.a)(Object(n.a)({},c.a),{initialValue:i.facade.criteria}),formState:i.facade.criteriaFormState$,navConfig:{title:"Velg filtre"},submitCallback:function(e){return i.facade.updateCriteria(e)}})},this.exportAsCsv=function(){i.statTable.dataGrid.api.exportDataAsCsv({processCellCallback:function(e){var t=e.column.getColDef();if(t.valueFormatter instanceof Function){var r=Object(n.a)(Object(n.a)({},e),{data:e.node.data,node:e.node,colDef:e.column.getColDef()});return t.valueFormatter(r)}return e.value}})},this.addGroupBy=function(e){return i.facade.updateGroupBy(e)}}return e.prototype.resetCriteriaProp=function(e,t){t[e]=null,this.facade.updateCriteria(t)},e.prototype.getNavConfig=function(e){return{title:"Timestatistikk",buttons:[{icon:"filter_list",color:e&&e>0?"accent":null,callback:this.openTimesheetFilter},{icon:"cloud_download",callback:this.exportAsCsv}]}},e.prototype.getGroupByChips=function(e){return this.chipsFactory.createEnumSelectionChips(u.a,e,this.addGroupBy)},e.prototype.getCriteriaChips=function(e,t){var r=this;return 0===t?[{text:"\xc5pne filter",color:"accent",onClick:this.openTimesheetFilter}]:this.chipsFactory.createCriteriaChips(e,(function(t){return r.resetCriteriaProp(t,e)}),p.a)},e.\u0275fac=function(t){return new(t||e)(w["\u0275\u0275directiveInject"](S),w["\u0275\u0275directiveInject"](B.FormService),w["\u0275\u0275directiveInject"](F.a))},e.\u0275cmp=w["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timesheet-statistic"]],viewQuery:function(e,t){var r;1&e&&w["\u0275\u0275viewQuery"](L,!0),2&e&&w["\u0275\u0275queryRefresh"](r=w["\u0275\u0275loadQuery"]())&&(t.statTable=r.first)},features:[w["\u0275\u0275ProvidersFeature"](k)],decls:6,vars:6,consts:[["disableElevation","true"],["navbar","",4,"ngIf"],["fxFlex","",3,"config"],["statTable",""],["navbar",""],[3,"config"],[3,"chips"]],template:function(e,t){1&e&&(w["\u0275\u0275elementStart"](0,"app-main-skeleton",0),w["\u0275\u0275template"](1,V,4,3,"ng-container",1),w["\u0275\u0275pipe"](2,"async"),w["\u0275\u0275element"](3,"app-timesheet-statistic-table",2,3),w["\u0275\u0275pipe"](5,"async"),w["\u0275\u0275elementEnd"]()),2&e&&(w["\u0275\u0275advance"](1),w["\u0275\u0275property"]("ngIf",w["\u0275\u0275pipeBind1"](2,2,t.navVm$)),w["\u0275\u0275advance"](2),w["\u0275\u0275property"]("config",w["\u0275\u0275pipeBind1"](5,4,t.tableConfig$)))},directives:[G.a,I.m,A,H.a,R.a,E.a],pipes:[I.b],encapsulation:2,changeDetection:0}),e}()}],Q=function(){function e(){}return e.\u0275mod=w["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=w["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(U)],i.f]}),e}(),X=r("DEyP"),_=r("Ocsb"),q=r("AZLh"),K=r("GxAf"),W=r("9RCi"),z=function(){function e(){}return e.\u0275mod=w["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=w["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:Object(n.d)([I.e],K.a),imports:[[_.a,Q,W.a,X.a,q.a]]}),e}()},"v/VQ":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("mrSG");function i(e,t){if(!e||0==e.length)return e;var r=e.slice();return r.unshift(t),r}var o=r("cT5K"),a={actionId:r("O9in").a,reducerFn:function(e,t){var r=o.a.get(t.stateProp);return t.entity.updatedAt=(new Date).getTime(),function(e,t,r,a){var s,c,u=o.a.get(t);try{for(var p=Object(n.e)(u.foreigns||[]),l=p.next();!l.done;l=p.next()){var d=l.value,f=o.a.get(d),m=r[f.foreignProp];if(m){var h=m[f.identifier];h?(e[d]=i(e[d],m),r[f.foreignKey]=h,r[f.foreignProp]=null):(console.error("Entity from "+t+" has foreign property from "+d+" set with no ID"),r[f.foreignProp]=null)}}}catch(v){s={error:v}}finally{try{l&&!l.done&&(c=p.return)&&c.call(p)}finally{if(s)throw s.error}}return e[t]=a(r,e[t]),e}(e,t.stateProp,t.entity,2===t.saveAction?function(e,t){return function(e,t,r){if(!e||0==e.length)return e;for(var i=e.slice(),o=0;o<i.length;o++){var a=i[o];if(a[r]===t[r]){i[o]=Object(n.a)({},Object.assign(a,t));break}}return i}(t,e,r.identifier)}:function(e,t){return i(t,e)})},stateProperties:function(e){var t,r,i=[e.stateProp],a=o.a.get(e.stateProp);if(a.foreigns)try{for(var s=Object(n.e)(a.foreigns),c=s.next();!c.done;c=s.next()){var u=c.value,p=o.a.get(u);e.entity[p.foreignProp]&&i.push(u)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i}}}}]);
//# sourceMappingURL=17.48369db424c7fb930888.js.map